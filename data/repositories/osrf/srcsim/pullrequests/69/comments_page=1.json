{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36100672.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36100672"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "My score is being reset to zero when I complete T1CP4 after skipping CP2 and CP3. (Maybe I messed something up syncing with default after merging pull request #70?)\n\nAlso I have a question, the checkpoint list on the score message shows the **current checkpoint as zero** until it is completed, right? This is marked as **ok?** below.\n\nHow to reproduce:\n\n1. `roslaunch srcsim unique.launch init:=true &`\n1. `rostopic echo /srcsim/finals/score`\n1. At this point, nothing is published - ok\n1. `rosservice call /srcsim/finals/start_task 1 1`\n1. Score == 0 - ok, list empty - ok\n1. Manually teleport robot out of start box\n1. Score == 0 - ok, but there is also a zero checkpoint on the list - **ok?**\n1. Manually teleport robot to satellite\n1. Score == 1 - ok, but there is also a zero checkpoint on the **end** of the list - **ok?**\n1. Skip to checkpoint 4: `rosservice call /srcsim/finals/start_task 1 4`\n1. Score == 1 - ok, but there are also **3 zero checkpoints** on the **end** of the list - **ok?**\n1. Manually teleport robot to finish box 1\n1. Score == 0 - **not ok**, list empty - **not ok**", "markup": "markdown", "html": "<p>My score is being reset to zero when I complete T1CP4 after skipping CP2 and CP3. (Maybe I messed something up syncing with default after merging <a href=\"#!/osrf/srcsim/pull-requests/70/split-t1cp2\" rel=\"nofollow\" class=\"ap-connect-link\">pull request #70</a>?)</p>\n<p>Also I have a question, the checkpoint list on the score message shows the <strong>current checkpoint as zero</strong> until it is completed, right? This is marked as <strong>ok?</strong> below.</p>\n<p>How to reproduce:</p>\n<ol>\n<li><code>roslaunch srcsim unique.launch init:=true &amp;</code></li>\n<li><code>rostopic echo /srcsim/finals/score</code></li>\n<li>At this point, nothing is published - ok</li>\n<li><code>rosservice call /srcsim/finals/start_task 1 1</code></li>\n<li>Score == 0 - ok, list empty - ok</li>\n<li>Manually teleport robot out of start box</li>\n<li>Score == 0 - ok, but there is also a zero checkpoint on the list - <strong>ok?</strong></li>\n<li>Manually teleport robot to satellite</li>\n<li>Score == 1 - ok, but there is also a zero checkpoint on the <strong>end</strong> of the list - <strong>ok?</strong></li>\n<li>Skip to checkpoint 4: <code>rosservice call /srcsim/finals/start_task 1 4</code></li>\n<li>Score == 1 - ok, but there are also <strong>3 zero checkpoints</strong> on the <strong>end</strong> of the list - <strong>ok?</strong></li>\n<li>Manually teleport robot to finish box 1</li>\n<li>Score == 0 - <strong>not ok</strong>, list empty - <strong>not ok</strong></li>\n</ol>", "type": "rendered"}, "created_on": "2017-05-02T20:12:51.722915+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-02T20:12:51.725556+00:00", "type": "pullrequest_comment", "id": 36100672}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36106193.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36106193"}}, "parent": {"id": 36100672, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36100672.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36100672"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "The doc for the message field `checkpoints_completion` says:\n\n> Array of times when checkpoints were completed across all tasks. If a checkpoint was skipped, its time is zero.\n\nSo every checkpoint of a task reports as \"zero\". I think that describes the **ok** lines. I haven't checked if the tasks report the correct number of **zero checkpoints** when multiple are skipped - that is basically existing code which I didn't touch.\n\n---\n\nWhat does `checkpoints_completion` contain when the score jumps back to 0 in step 13? The loop never decrements the score so I can only imagine that this could happen when the checkpoint times suddenly vanish.", "markup": "markdown", "html": "<p>The doc for the message field <code>checkpoints_completion</code> says:</p>\n<blockquote>\n<p>Array of times when checkpoints were completed across all tasks. If a checkpoint was skipped, its time is zero.</p>\n</blockquote>\n<p>So every checkpoint of a task reports as \"zero\". I think that describes the <strong>ok</strong> lines. I haven't checked if the tasks report the correct number of <strong>zero checkpoints</strong> when multiple are skipped - that is basically existing code which I didn't touch.</p>\n<hr />\n<p>What does <code>checkpoints_completion</code> contain when the score jumps back to 0 in step 13? The loop never decrements the score so I can only imagine that this could happen when the checkpoint times suddenly vanish.</p>", "type": "rendered"}, "created_on": "2017-05-02T21:48:27.505233+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-02T21:48:27.507975+00:00", "type": "pullrequest_comment", "id": 36106193}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36107702.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36107702"}}, "parent": {"id": 36106193, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36106193.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36106193"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "I think this is all related to the indexing problem I described below. \n\n* `checkpoints_completion` is reporting zero for the checkpoint we're currently trying to complete, and if I understood right, this is not intentional\n* When I said \"list\" above I meant the `checkpoints_completion` array, so to answer your question, by step 13, the array is cleared", "markup": "markdown", "html": "<p>I think this is all related to the indexing problem I described below. </p>\n<ul>\n<li><code>checkpoints_completion</code> is reporting zero for the checkpoint we're currently trying to complete, and if I understood right, this is not intentional</li>\n<li>When I said \"list\" above I meant the <code>checkpoints_completion</code> array, so to answer your question, by step 13, the array is cleared</li>\n</ul>", "type": "rendered"}, "created_on": "2017-05-02T22:20:56.994710+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-02T22:20:56.997701+00:00", "type": "pullrequest_comment", "id": 36107702}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36281411.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36281411"}}, "parent": {"id": 36106193, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36106193.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36106193"}}, "depth": 2}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "@dirk-thomas, take a look at f2945f0. I changed the index logic and added a couple of checks to handle completed tasks. Feel free to merge it in if it makes sense to you.\n\nUsing that branch, I was able to make a combo across all 3 tasks, skipping some checkpoints on the way.", "markup": "markdown", "html": "<p>@dirk-thomas, take a look at <a href=\"#!/osrf/srcsim/commits/f2945f0\" rel=\"nofollow\" class=\"ap-connect-link\">f2945f0</a>. I changed the index logic and added a couple of checks to handle completed tasks. Feel free to merge it in if it makes sense to you.</p>\n<p>Using that branch, I was able to make a combo across all 3 tasks, skipping some checkpoints on the way.</p>", "type": "rendered"}, "created_on": "2017-05-05T00:59:18.002005+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-05T01:00:47.982478+00:00", "type": "pullrequest_comment", "id": 36281411}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36615535.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36615535"}}, "parent": {"id": 36281411, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36281411.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36281411"}}, "depth": 3}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Thank you, I merged you patch. In a follow up commit (817ca3fed459b405a378540cdcd2113877696a00) I simplified the logic.\n\nWith that state I was able to \"check\" task 1 CPs 1, 2, and 3 with a score of 6. Then skipping to 2.3 and \"checking\" that one (opening the solar panel) which increased the score to 7 as expected.", "markup": "markdown", "html": "<p>Thank you, I merged you patch. In a follow up commit (<a href=\"#!/osrf/srcsim/commits/817ca3fed459b405a378540cdcd2113877696a00\" rel=\"nofollow\" class=\"ap-connect-link\">817ca3fed459b405a378540cdcd2113877696a00</a>) I simplified the logic.</p>\n<p>With that state I was able to \"check\" task 1 CPs 1, 2, and 3 with a score of 6. Then skipping to 2.3 and \"checking\" that one (opening the solar panel) which increased the score to 7 as expected.</p>", "type": "rendered"}, "created_on": "2017-05-10T23:58:30.280849+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-10T23:58:30.283511+00:00", "type": "pullrequest_comment", "id": 36615535}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36917847.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36917847"}}, "parent": {"id": 36615535, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36615535.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36615535"}}, "depth": 4}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Thanks for merging the patch. \n\nI know the the lines you removed make things complicated, but I think they're necessary. If you follow the steps described above with the current version of your branch, you'll see that when you complete T1CP4, the score is reset to zero and `checkpoints_completion` gets empty. That happens because `this->tasks[i-1]->CurrentCheckpointId()` returns zero after all checkpoints on a task are finished.", "markup": "markdown", "html": "<p>Thanks for merging the patch. </p>\n<p>I know the the lines you removed make things complicated, but I think they're necessary. If you follow the steps described above with the current version of your branch, you'll see that when you complete T1CP4, the score is reset to zero and <code>checkpoints_completion</code> gets empty. That happens because <code>this-&gt;tasks[i-1]-&gt;CurrentCheckpointId()</code> returns zero after all checkpoints on a task are finished.</p>", "type": "rendered"}, "created_on": "2017-05-15T23:04:25.247634+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-15T23:04:25.249723+00:00", "type": "pullrequest_comment", "id": 36917847}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36992449.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36992449"}}, "parent": {"id": 36917847, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36917847.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36917847"}}, "depth": 5}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Oh, I see. Sorry, for this. I expected the API to return different things.\n\nI pushed 31231c2e5f79008ef8d113cd0ec8f61ded41530a which should address this case and be easy to read / verify.", "markup": "markdown", "html": "<p>Oh, I see. Sorry, for this. I expected the API to return different things.</p>\n<p>I pushed <a href=\"#!/osrf/srcsim/commits/31231c2e5f79008ef8d113cd0ec8f61ded41530a\" rel=\"nofollow\" class=\"ap-connect-link\">31231c2e5f79008ef8d113cd0ec8f61ded41530a</a> which should address this case and be easy to read / verify.</p>", "type": "rendered"}, "created_on": "2017-05-16T16:53:26.946181+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-16T16:53:26.948982+00:00", "type": "pullrequest_comment", "id": 36992449}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37016903.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37016903"}}, "parent": {"id": 36992449, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36992449.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36992449"}}, "depth": 6}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Awesome, much more elegant this way :) The issue described above is fixed for me. I was able to make a combo across all 3 tasks.\n\nNow I'm only seeing a small problem in the very end. The moment I complete task 3 checkpoint 8, I get one last score message, but that message doesn't contain the whole task 3. So I never get a score message including the successful T3CP8, and the final score actually decreases. \n\nThese are the last 2 messages I got, note how the last 7 checkpoints from the first message are missing on the second message:\n\n~~~\ncheckpoints_completion:                                                                                                            [10/1885]\n  - \n    secs: 33\n    nsecs: 700000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 35\n    nsecs: 657000000\n  - \n    secs: 38\n    nsecs: 402000000\n  - \n    secs: 39\n    nsecs: 190000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 44\n    nsecs:  23000000\n  - \n    secs: 45\n    nsecs: 264000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\nscore: 10\n---\ncheckpoints_completion: \n  - \n    secs: 33\n    nsecs: 700000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 35\n    nsecs: 657000000\n  - \n    secs: 38\n    nsecs: 402000000\n  - \n    secs: 39\n    nsecs: 190000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 44\n    nsecs:  23000000\nscore: 8\n~~~", "markup": "markdown", "html": "<p>Awesome, much more elegant this way :) The issue described above is fixed for me. I was able to make a combo across all 3 tasks.</p>\n<p>Now I'm only seeing a small problem in the very end. The moment I complete task 3 checkpoint 8, I get one last score message, but that message doesn't contain the whole task 3. So I never get a score message including the successful T3CP8, and the final score actually decreases. </p>\n<p>These are the last 2 messages I got, note how the last 7 checkpoints from the first message are missing on the second message:</p>\n<div class=\"codehilite\"><pre><span></span>checkpoints_completion:                                                                                                            [10/1885]\n  - \n    secs: 33\n    nsecs: 700000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 35\n    nsecs: 657000000\n  - \n    secs: 38\n    nsecs: 402000000\n  - \n    secs: 39\n    nsecs: 190000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 44\n    nsecs:  23000000\n  - \n    secs: 45\n    nsecs: 264000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\nscore: 10\n---\ncheckpoints_completion: \n  - \n    secs: 33\n    nsecs: 700000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 35\n    nsecs: 657000000\n  - \n    secs: 38\n    nsecs: 402000000\n  - \n    secs: 39\n    nsecs: 190000000\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 0\n    nsecs:         0\n  - \n    secs: 44\n    nsecs:  23000000\nscore: 8\n</pre></div>", "type": "rendered"}, "created_on": "2017-05-16T23:49:20.508355+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-16T23:49:20.510537+00:00", "type": "pullrequest_comment", "id": 37016903}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37020824.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37020824"}}, "parent": {"id": 37016903, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37016903.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37016903"}}, "depth": 7}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Can you tell what the values for `current` for the tasks and checkpoints is supposed to be in the case of the last invocation of `OnUpdate`?  ", "markup": "markdown", "html": "<p>Can you tell what the values for <code>current</code> for the tasks and checkpoints is supposed to be in the case of the last invocation of <code>OnUpdate</code>?  </p>", "type": "rendered"}, "created_on": "2017-05-17T01:49:38.415015+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-17T01:49:38.417261+00:00", "type": "pullrequest_comment", "id": 37020824}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37021810.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37021810"}}, "parent": {"id": 37020824, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37020824.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37020824"}}, "depth": 8}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "I believe that `current` task is 3 in the beginning of `OnUpdate`, then it runs `Task::Update` on task 3 and checks that the last checkpoint is complete, so that changes `Task::CurrentCheckpointId` to zero. Which causes `if (i == this->current && j >= this->tasks[i-1]->CurrentCheckpointId())` to be true, skipping the score count for the whole task 3.", "markup": "markdown", "html": "<p>I believe that <code>current</code> task is 3 in the beginning of <code>OnUpdate</code>, then it runs <code>Task::Update</code> on task 3 and checks that the last checkpoint is complete, so that changes <code>Task::CurrentCheckpointId</code> to zero. Which causes <code>if (i == this-&gt;current &amp;&amp; j &gt;= this-&gt;tasks[i-1]-&gt;CurrentCheckpointId())</code> to be true, skipping the score count for the whole task 3.</p>", "type": "rendered"}, "created_on": "2017-05-17T02:23:45.356941+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-17T02:23:45.359545+00:00", "type": "pullrequest_comment", "id": 37021810}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37021856.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37021856"}}, "parent": {"id": 37021810, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37021810.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37021810"}}, "depth": 9}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "How is that different and distinguishable from the state where the first cp of the last task hasn't been started yet?", "markup": "markdown", "html": "<p>How is that different and distinguishable from the state where the first cp of the last task hasn't been started yet?</p>", "type": "rendered"}, "created_on": "2017-05-17T02:25:19.848582+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-17T02:25:19.850802+00:00", "type": "pullrequest_comment", "id": 37021856}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37022841.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37022841"}}, "parent": {"id": 37021856, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37021856.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37021856"}}, "depth": 10}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "I guess one way would be to check the current checkpoint before calling `Task::Update`. \n\nAlternatively, we could change the checkpoint id logic to have different numbers before the task starts and after it ends, for example 0 and 100.", "markup": "markdown", "html": "<p>I guess one way would be to check the current checkpoint before calling <code>Task::Update</code>. </p>\n<p>Alternatively, we could change the checkpoint id logic to have different numbers before the task starts and after it ends, for example 0 and 100.</p>", "type": "rendered"}, "created_on": "2017-05-17T02:56:44.310020+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-17T02:57:09.652652+00:00", "type": "pullrequest_comment", "id": 37022841}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37022952.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37022952"}}, "parent": {"id": 37022841, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37022841.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37022841"}}, "depth": 11}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "I don't think we can move the logic before `Task::Update` since the task hasn't been updated and doesn't represent the latest state for scoring yet.\n\nWhy not increment `CurrentCheckpointId()` the same as before. So once the last checkpoint has been finished / skipped the value is `CheckpointCount() + 1`? So `0` means no cp has been started `1` - `N` identifies which cp is currently in progress, and `N + 1` means all checkpoints are over.", "markup": "markdown", "html": "<p>I don't think we can move the logic before <code>Task::Update</code> since the task hasn't been updated and doesn't represent the latest state for scoring yet.</p>\n<p>Why not increment <code>CurrentCheckpointId()</code> the same as before. So once the last checkpoint has been finished / skipped the value is <code>CheckpointCount() + 1</code>? So <code>0</code> means no cp has been started <code>1</code> - <code>N</code> identifies which cp is currently in progress, and <code>N + 1</code> means all checkpoints are over.</p>", "type": "rendered"}, "created_on": "2017-05-17T03:01:17.628528+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-17T03:01:17.631545+00:00", "type": "pullrequest_comment", "id": 37022952}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37023148.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37023148"}}, "parent": {"id": 37022952, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37022952.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37022952"}}, "depth": 12}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Oh I didn't mean to move the whole logic before the update, I think we could just keep the checkpoint value on a variable to compare after the update.\n\nI think using `N+1` is fine, but there are a few places on the code where we check whether the current checkpoint is zero, so we just need to make sure we're not calling those after the task is finished. We also set the checkpoint to zero if the task times out, so we need to update that too.", "markup": "markdown", "html": "<p>Oh I didn't mean to move the whole logic before the update, I think we could just keep the checkpoint value on a variable to compare after the update.</p>\n<p>I think using <code>N+1</code> is fine, but there are a few places on the code where we check whether the current checkpoint is zero, so we just need to make sure we're not calling those after the task is finished. We also set the checkpoint to zero if the task times out, so we need to update that too.</p>", "type": "rendered"}, "created_on": "2017-05-17T03:08:54.870153+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-17T03:08:54.872387+00:00", "type": "pullrequest_comment", "id": 37023148}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37088491.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37088491"}}, "parent": {"id": 37023148, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37023148.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37023148"}}, "depth": 13}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Here we go: in 2b01d21ed04a19b99357e1a77345cd1e1c425890 I changed the semantic of Task::current to represent finished task with `current = count + 1`.", "markup": "markdown", "html": "<p>Here we go: in <a href=\"#!/osrf/srcsim/commits/2b01d21ed04a19b99357e1a77345cd1e1c425890\" rel=\"nofollow\" class=\"ap-connect-link\">2b01d21ed04a19b99357e1a77345cd1e1c425890</a> I changed the semantic of Task::current to represent finished task with <code>current = count + 1</code>.</p>", "type": "rendered"}, "created_on": "2017-05-17T16:58:06.964671+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-17T16:58:06.967474+00:00", "type": "pullrequest_comment", "id": 37088491}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37090419.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37090419"}}, "parent": {"id": 37088491, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37088491.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37088491"}}, "depth": 14}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Awesome, looks like it's working for me. I also tested timeouts and the scoring behaves properly.", "markup": "markdown", "html": "<p>Awesome, looks like it's working for me. I also tested timeouts and the scoring behaves properly.</p>", "type": "rendered"}, "created_on": "2017-05-17T17:27:33.966075+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-17T17:27:33.968526+00:00", "type": "pullrequest_comment", "id": 37090419}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37090573.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37090573"}}, "parent": {"id": 37090419, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37090419.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37090419"}}, "depth": 15}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "I'll sync this with default and give it a last try before merging.", "markup": "markdown", "html": "<p>I'll sync this with default and give it a last try before merging.</p>", "type": "rendered"}, "created_on": "2017-05-17T17:29:57.693754+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-17T17:29:57.696980+00:00", "type": "pullrequest_comment", "id": 37090573}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37090582.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37090582"}}, "parent": {"id": 37090419, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37090419.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37090419"}}, "depth": 15}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": ":+1: ", "markup": "markdown", "html": "<p>:+1: </p>", "type": "rendered"}, "created_on": "2017-05-17T17:30:03.979184+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-17T17:30:03.982539+00:00", "type": "pullrequest_comment", "id": 37090582}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36107549.json"}, "code": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/srcsim/diff/osrf/srcsim:98b92c19871a..c04b01715b88?path=src%2FFinalsPlugin.cc"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36107549"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "I think some of the problem comes from here. `this->current` goes from 1 to 3, instead of 0 to 2. My bad, this should be clear on the documentation. As you can see on the line above, `this->current - 1` is used to index the `this->tasks` vector.\n\nThe same goes for the checkpoint ids... Sorry for making this more complicated than it needs to be.", "markup": "markdown", "html": "<p>I think some of the problem comes from here. <code>this-&gt;current</code> goes from 1 to 3, instead of 0 to 2. My bad, this should be clear on the documentation. As you can see on the line above, <code>this-&gt;current - 1</code> is used to index the <code>this-&gt;tasks</code> vector.</p>\n<p>The same goes for the checkpoint ids... Sorry for making this more complicated than it needs to be.</p>", "type": "rendered"}, "created_on": "2017-05-02T22:17:03.336103+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "inline": {"to": 255, "from": null, "path": "src/FinalsPlugin.cc"}, "updated_on": "2017-05-02T22:17:03.338684+00:00", "type": "pullrequest_comment", "id": 36107549}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36615557.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36615557"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "Currently this patch contains a TODO that it needs to consider if a CP was reset. Currently the API doesn't allow a user to reset the current CP and the underlying data structure doesn't have a place to store this information.", "markup": "markdown", "html": "<p>Currently this patch contains a TODO that it needs to consider if a CP was reset. Currently the API doesn't allow a user to reset the current CP and the underlying data structure doesn't have a place to store this information.</p>", "type": "rendered"}, "created_on": "2017-05-10T23:59:22.197251+00:00", "user": {"display_name": "Dirk Thomas", "uuid": "{a8effe61-90f2-4949-89a8-9c6972071de7}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D"}, "html": {"href": "https://bitbucket.org/%7Ba8effe61-90f2-4949-89a8-9c6972071de7%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2f77876936467715bd75258c967bcaa4d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsDT-2.png"}}, "nickname": "Dirk Thomas", "type": "user", "account_id": "557058:763d049c-c4c6-4e59-85a5-2d7a8fbbdd58"}, "updated_on": "2017-05-10T23:59:22.199263+00:00", "type": "pullrequest_comment", "id": 36615557}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/37090809.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-37090809"}}, "parent": {"id": 36615557, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69/comments/36615557.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69/_/diff#comment-36615557"}}, "depth": 1}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 69, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/69.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/69"}}, "title": "add publishing of Score message"}, "content": {"raw": "I mentioned this on issue #104", "markup": "markdown", "html": "<p>I mentioned this on issue <a href=\"#!/osrf/srcsim/issues/104/val-cant-move-joints-after-a-fall\" rel=\"nofollow\" title=\"val can&#39;t move joints after a fall\" class=\"ap-connect-link\"><s>#104</s></a></p>", "type": "rendered"}, "created_on": "2017-05-17T17:32:51.364964+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-05-17T17:32:51.368308+00:00", "type": "pullrequest_comment", "id": 37090809}], "page": 1, "size": 21}