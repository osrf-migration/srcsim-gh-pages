{"pagelen": 50, "values": [{"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684906.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684906"}}, "parent": {"id": 38684803, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684803.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684803"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Actually, a list of things that are cause for a valid gazebo reset would be nice.  The inability to reset the ihmc state estimator should also count, I think, as Val can't take any steps when the pose estimate is maybe more than 30cm lower than the previous one.", "markup": "markdown", "html": "<p>Actually, a list of things that are cause for a valid gazebo reset would be nice.  The inability to reset the ihmc state estimator should also count, I think, as Val can't take any steps when the pose estimate is maybe more than 30cm lower than the previous one.</p>", "type": "rendered"}, "created_on": "2017-06-13T04:47:39.951227+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-13T04:47:39.997772+00:00", "type": "pullrequest_comment", "id": 38684906}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684888.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684888"}}, "parent": {"id": 38684803, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684803.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684803"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "I need to ask @nkoenig about this", "markup": "markdown", "html": "<p>I need to ask @nkoenig about this</p>", "type": "rendered"}, "created_on": "2017-06-13T04:47:20.841377+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-13T04:47:20.850132+00:00", "type": "pullrequest_comment", "id": 38684888}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684803.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684803"}}, "parent": {"id": 38684712, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684712.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684712"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Isn't a harness failure to detach a penalty-free gazebo reset?  I'd be hesitant to detach it myself.", "markup": "markdown", "html": "<p>Isn't a harness failure to detach a penalty-free gazebo reset?  I'd be hesitant to detach it myself.</p>", "type": "rendered"}, "created_on": "2017-06-13T04:44:44.286362+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-13T04:44:44.349054+00:00", "type": "pullrequest_comment", "id": 38684803}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684712.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684712"}}, "parent": {"id": 38684673, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684673.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684673"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "You are allowed to detach the harness at your own risk.", "markup": "markdown", "html": "<p>You are allowed to detach the harness at your own risk.</p>", "type": "rendered"}, "created_on": "2017-06-13T04:42:14.289360+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-13T04:42:14.291402+00:00", "type": "pullrequest_comment", "id": 38684712}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684673.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684673"}}, "parent": {"id": 38684516, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684516.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684516"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Would that be legal for the competition? Or just for debugging?", "markup": "markdown", "html": "<p>Would that be legal for the competition? Or just for debugging?</p>", "type": "rendered"}, "created_on": "2017-06-13T04:40:37.440965+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-13T04:40:37.479977+00:00", "type": "pullrequest_comment", "id": 38684673}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38684516.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38684516"}}, "parent": {"id": 38580537, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38580537.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38580537"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Another point about getting stuck in Harness state 4; I've still seen this happen. Sometimes there is weight not evenly distributed on the feet, so it's not fully trying to stand up and doesn't trigger the detach. If it really seems stuck, before restarting the simulation or reharnessing, try just detaching the harness by publishing true to `/valkyrie/harness/detach`:\n\n~~~\nrostopic pub -1 /valkyrie/harness/detach std_msgs/Bool true\n~~~", "markup": "markdown", "html": "<p>Another point about getting stuck in Harness state 4; I've still seen this happen. Sometimes there is weight not evenly distributed on the feet, so it's not fully trying to stand up and doesn't trigger the detach. If it really seems stuck, before restarting the simulation or reharnessing, try just detaching the harness by publishing true to <code>/valkyrie/harness/detach</code>:</p>\n<div class=\"codehilite\"><pre><span></span>rostopic pub -1 /valkyrie/harness/detach std_msgs/Bool true\n</pre></div>", "type": "rendered"}, "created_on": "2017-06-13T04:35:08.354447+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-13T04:35:08.356713+00:00", "type": "pullrequest_comment", "id": 38684516}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38674132.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38674132"}}, "parent": {"id": 38673205, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38673205.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38673205"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "you betcha", "markup": "markdown", "html": "<p>you betcha</p>", "type": "rendered"}, "created_on": "2017-06-12T22:04:01.753858+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-12T22:04:01.757210+00:00", "type": "pullrequest_comment", "id": 38674132}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38673205.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38673205"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Will there be a release of srcsim 0.8 to correspond to the start of finals?", "markup": "markdown", "html": "<p>Will there be a release of srcsim 0.8 to correspond to the start of finals?</p>", "type": "rendered"}, "created_on": "2017-06-12T21:40:37.773023+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-12T21:40:37.812699+00:00", "type": "pullrequest_comment", "id": 38673205}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"update": {"description": "The feet can get tangled up when reharnessing, so this PR resets joint positions just before lowering. I got the neutral joint positions by echoing the joint_states when it seemed to be at equilibrium.\r\n\r\nFor a kinda weird reason, I don't reset the joints connecting the pelvis to the torso. The `pelvis` is the root of the urdf kinematic tree, but the torso is link attached to the harness. The [Joint::SetPosition](https://bitbucket.org/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/physics/Joint.hh?fileviewer=file-view-default#Joint.hh-347) function sets the child link poses down the entire kinematic chain, but this doesn't work since the torso pose is already constrained by the harness. To reset the torso joints, one would have to teleport the robot to a place with no other collisions nearby, then call `SetJointPosition` on all the joints, then attach the harness. Making this change would require a lot more code to be touched, so I think this is a good compromise. The legs will still swing down into place even if the torso joints aren't reset, but they should be untangled.\r\n\r\nIntended to address #207 and #241.", "title": "Reset joint positions after harnessing (all except the torso joints)", "destination": {"commit": {"hash": "4e95f3e70fca", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/4e95f3e70fca.json"}, "html": {"href": "#!/osrf/srcsim/commits/4e95f3e70fca"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "615b237fe5f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/615b237fe5f1.json"}, "html": {"href": "#!/osrf/srcsim/commits/615b237fe5f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "harness_joint_position"}}, "state": "MERGED", "author": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "date": "2017-06-12T21:03:02.110869+00:00"}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38666422.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38666422"}}, "parent": {"id": 38628767, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38628767.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38628767"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Yes, we are planning to use this in the finals.", "markup": "markdown", "html": "<p>Yes, we are planning to use this in the finals.</p>", "type": "rendered"}, "created_on": "2017-06-12T19:40:35.919458+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-12T19:40:35.921628+00:00", "type": "pullrequest_comment", "id": 38666422}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38666409.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38666409"}}, "parent": {"id": 38580537, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38580537.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38580537"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "I think the `robot_pose` height can change quite a bit after re-harnessing. Look at the z value if you get stuck in harness state 4 and try commanding a higher pelvis height, relative to where the state estimator thinks it is. If you command a really high z value, it should stand up very straight, which should get you out of the harness, then try lowering the pelvis height a little (but not too much).", "markup": "markdown", "html": "<p>I think the <code>robot_pose</code> height can change quite a bit after re-harnessing. Look at the z value if you get stuck in harness state 4 and try commanding a higher pelvis height, relative to where the state estimator thinks it is. If you command a really high z value, it should stand up very straight, which should get you out of the harness, then try lowering the pelvis height a little (but not too much).</p>", "type": "rendered"}, "created_on": "2017-06-12T19:40:10.064251+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-12T19:40:10.068316+00:00", "type": "pullrequest_comment", "id": 38666409}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"approval": {"date": "2017-06-12T19:40:02.441088+00:00", "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"update": {"description": "The feet can get tangled up when reharnessing, so this PR resets joint positions just before lowering. I got the neutral joint positions by echoing the joint_states when it seemed to be at equilibrium.\r\n\r\nFor a kinda weird reason, I don't reset the joints connecting the pelvis to the torso. The `pelvis` is the root of the urdf kinematic tree, but the torso is link attached to the harness. The [Joint::SetPosition](https://bitbucket.org/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/physics/Joint.hh?fileviewer=file-view-default#Joint.hh-347) function sets the child link poses down the entire kinematic chain, but this doesn't work since the torso pose is already constrained by the harness. To reset the torso joints, one would have to teleport the robot to a place with no other collisions nearby, then call `SetJointPosition` on all the joints, then attach the harness. Making this change would require a lot more code to be touched, so I think this is a good compromise. The legs will still swing down into place even if the torso joints aren't reset, but they should be untangled.\r\n\r\nIntended to address #207 and #241.", "title": "Reset joint positions after harnessing (all except the torso joints)", "destination": {"commit": {"hash": "4e95f3e70fca", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/4e95f3e70fca.json"}, "html": {"href": "#!/osrf/srcsim/commits/4e95f3e70fca"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "615b237fe5f1", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/615b237fe5f1.json"}, "html": {"href": "#!/osrf/srcsim/commits/615b237fe5f1"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "harness_joint_position"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2017-06-12T19:35:16.366687+00:00"}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38628767.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38628767"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Is this change going to go in for the finals?", "markup": "markdown", "html": "<p>Is this change going to go in for the finals?</p>", "type": "rendered"}, "created_on": "2017-06-12T12:09:33.090575+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-12T12:09:33.138129+00:00", "type": "pullrequest_comment", "id": 38628767}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38588533.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38588533"}}, "parent": {"id": 38588517, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38588517.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38588517"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Bummer, but thanks for pointing those comments out.", "markup": "markdown", "html": "<p>Bummer, but thanks for pointing those comments out.</p>", "type": "rendered"}, "created_on": "2017-06-10T17:18:29.438015+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-10T17:18:29.472853+00:00", "type": "pullrequest_comment", "id": 38588533}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38588517.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38588517"}}, "parent": {"id": 38586891, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38586891.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38586891"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "I've tried using those topics after teleportation before, but unfortunately they don't seem to work with such big leaps in space. See [this](#!/osrf/srcsim/issues/119/robot-pose-not-updated-after-task#comment-35980493) and [this](#!/osrf/srcsim/issues/142/localization-and-teleportation#comment-37122413) comments", "markup": "markdown", "html": "<p>I've tried using those topics after teleportation before, but unfortunately they don't seem to work with such big leaps in space. See <a data-is-external-link=\"true\" href=\"#!/osrf/srcsim/issues/119/robot-pose-not-updated-after-task#comment-35980493\" rel=\"nofollow\">this</a> and <a data-is-external-link=\"true\" href=\"#!/osrf/srcsim/issues/142/localization-and-teleportation#comment-37122413\" rel=\"nofollow\">this</a> comments</p>", "type": "rendered"}, "created_on": "2017-06-10T17:14:49.040206+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-06-10T17:14:49.042557+00:00", "type": "pullrequest_comment", "id": 38588517}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38586891.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38586891"}}, "parent": {"id": 38584105, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38584105.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38584105"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "@chapulina This could be a good time for `/ihmc_ros/localization/pelvis_pose_correction` or `/ihmc_ros/localization/pelvis_odom_pose_correction`.  You've got the Gazebo ground truth for the pelvis pose; could publish something during reharness to correct the pelvis pose, which will hopefully help with this.", "markup": "markdown", "html": "<p>@chapulina This could be a good time for <code>/ihmc_ros/localization/pelvis_pose_correction</code> or <code>/ihmc_ros/localization/pelvis_odom_pose_correction</code>.  You've got the Gazebo ground truth for the pelvis pose; could publish something during reharness to correct the pelvis pose, which will hopefully help with this.</p>", "type": "rendered"}, "created_on": "2017-06-10T14:26:36.440167+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-10T14:26:36.501037+00:00", "type": "pullrequest_comment", "id": 38586891}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38584105.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38584105"}}, "parent": {"id": 38580537, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38580537.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38580537"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "humm GoHome on the pelvis and chest don't seem to prevent Val from trying to squat again", "markup": "markdown", "html": "<p>humm GoHome on the pelvis and chest don't seem to prevent Val from trying to squat again</p>", "type": "rendered"}, "created_on": "2017-06-10T06:24:28.736966+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-06-10T06:24:46.291002+00:00", "type": "pullrequest_comment", "id": 38584105}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38583414.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38583414"}}, "parent": {"id": 38583304, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38583304.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38583304"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "I am using it. I do it before any 'skip' to put Val into a stable pose but I do tip the chest 10 degrees. That seems a more stable position, overall. I also, not always accurately, spread the feet to have 0.30 m between them. ", "markup": "markdown", "html": "<p>I am using it. I do it before any 'skip' to put Val into a stable pose but I do tip the chest 10 degrees. That seems a more stable position, overall. I also, not always accurately, spread the feet to have 0.30 m between them. </p>", "type": "rendered"}, "created_on": "2017-06-10T02:16:08.518493+00:00", "user": {"display_name": "Rud Merriam", "uuid": "{79efa10c-b8b6-4b55-9d05-7d0057e235cb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B79efa10c-b8b6-4b55-9d05-7d0057e235cb%7D"}, "html": {"href": "https://bitbucket.org/%7B79efa10c-b8b6-4b55-9d05-7d0057e235cb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:c6ed1bc6-3112-49ac-9453-b3846fe562dc/5c7bde69-befb-417b-9aae-9db0c9a59777/128"}}, "nickname": "rmerriam", "type": "user", "account_id": "557058:c6ed1bc6-3112-49ac-9453-b3846fe562dc"}, "updated_on": "2017-06-10T02:16:08.580549+00:00", "type": "pullrequest_comment", "id": 38583414}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38583304.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38583304"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "I've never tried using the `/ihmc_ros/valkyrie/control/go_home` topic, but it sounds like it could reset the controller to a known configuration while re-harnessing.", "markup": "markdown", "html": "<p>I've never tried using the <code>/ihmc_ros/valkyrie/control/go_home</code> topic, but it sounds like it could reset the controller to a known configuration while re-harnessing.</p>", "type": "rendered"}, "created_on": "2017-06-10T01:46:19.305509+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": "2017-06-10T01:46:19.307955+00:00", "type": "pullrequest_comment", "id": 38583304}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38582269.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38582269"}}, "parent": {"id": 38572850, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38572850.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38572850"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Funny, I don't see that happen. After a fall Val is brought up facing the right position and stays there. \n\nJust FYI, one of the things I've been doing before calling for a skip is bringing Val to a standing neutral position. Actually been adding that reset in at a number of places to increase general stability. It's a waste of time because it's often a duplicate of something done must seconds prior. ", "markup": "markdown", "html": "<p>Funny, I don't see that happen. After a fall Val is brought up facing the right position and stays there. </p>\n<p>Just FYI, one of the things I've been doing before calling for a skip is bringing Val to a standing neutral position. Actually been adding that reset in at a number of places to increase general stability. It's a waste of time because it's often a duplicate of something done must seconds prior. </p>", "type": "rendered"}, "created_on": "2017-06-09T23:42:56.029390+00:00", "user": {"display_name": "Rud Merriam", "uuid": "{79efa10c-b8b6-4b55-9d05-7d0057e235cb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B79efa10c-b8b6-4b55-9d05-7d0057e235cb%7D"}, "html": {"href": "https://bitbucket.org/%7B79efa10c-b8b6-4b55-9d05-7d0057e235cb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:c6ed1bc6-3112-49ac-9453-b3846fe562dc/5c7bde69-befb-417b-9aae-9db0c9a59777/128"}}, "nickname": "rmerriam", "type": "user", "account_id": "557058:c6ed1bc6-3112-49ac-9453-b3846fe562dc"}, "updated_on": "2017-06-09T23:42:56.078630+00:00", "type": "pullrequest_comment", "id": 38582269}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38580537.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38580537"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "@scpeters Here's one way to easily recreate this (at least the part where it executes the last pelvis height prior to collapse).\n\n```\nrostopic pub /ihmc_ros/valkyrie/control/pelvis_height_trajectory ihmc_msgs/PelvisHeightTrajectoryRosMessage \"execution_mode: 0\nprevious_message_id: 0\ntrajectory_points:\n- time: 0.5\n  position: 0.4\n  velocity: 0.0\n  unique_id: 0\nunique_id: -1\" -1\n\nrosservice call /srcsim/finals/start_task 1 2\n```\n\nYou can reharness to task 1-2 again and again and get different behavior each time.  [Here's a video where I run this.](https://www.youtube.com/watch?v=9cdkgxDFQoc)  The first time Val seems okay, but a few seconds after harnessing is finished, she tries to go back to the previous pelvis height and falls again.  Reharnessing again leads to the harness stuck in state 4.\n\nThis doesn't recreate the torso issue -- which makes me wonder if the IHMC side is storing the last robot commands received.", "markup": "markdown", "html": "<p>@scpeters Here's one way to easily recreate this (at least the part where it executes the last pelvis height prior to collapse).</p>\n<div class=\"codehilite\"><pre><span></span>rostopic pub /ihmc_ros/valkyrie/control/pelvis_height_trajectory ihmc_msgs/PelvisHeightTrajectoryRosMessage &quot;execution_mode: 0\nprevious_message_id: 0\ntrajectory_points:\n- time: 0.5\n  position: 0.4\n  velocity: 0.0\n  unique_id: 0\nunique_id: -1&quot; -1\n\nrosservice call /srcsim/finals/start_task 1 2\n</pre></div>\n\n\n<p>You can reharness to task 1-2 again and again and get different behavior each time.  <a data-is-external-link=\"true\" href=\"https://www.youtube.com/watch?v=9cdkgxDFQoc\" rel=\"nofollow\">Here's a video where I run this.</a>  The first time Val seems okay, but a few seconds after harnessing is finished, she tries to go back to the previous pelvis height and falls again.  Reharnessing again leads to the harness stuck in state 4.</p>\n<p>This doesn't recreate the torso issue -- which makes me wonder if the IHMC side is storing the last robot commands received.</p>", "type": "rendered"}, "created_on": "2017-06-09T22:07:26.300405+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-09T22:35:44.319595+00:00", "type": "pullrequest_comment", "id": 38580537}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38574570.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38574570"}}, "parent": {"id": 38574529, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38574529.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38574529"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Only when reharnessing after a fall.  It seems fine when skipping ahead.  If it's a fall, then I skip ahead (ie, fall in task 1 start box, then skip to in front of valves), then I see the torso orientation issue too.", "markup": "markdown", "html": "<p>Only when reharnessing after a fall.  It seems fine when skipping ahead.  If it's a fall, then I skip ahead (ie, fall in task 1 start box, then skip to in front of valves), then I see the torso orientation issue too.</p>", "type": "rendered"}, "created_on": "2017-06-09T19:44:00.591079+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-09T19:44:47.110827+00:00", "type": "pullrequest_comment", "id": 38574570}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38574529.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38574529"}}, "parent": {"id": 38572850, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38572850.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38572850"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "does this happen when you reharness after a fall or when just skipping ahead?", "markup": "markdown", "html": "<p>does this happen when you reharness after a fall or when just skipping ahead?</p>", "type": "rendered"}, "created_on": "2017-06-09T19:43:14.778431+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-09T19:43:14.781424+00:00", "type": "pullrequest_comment", "id": 38574529}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38574501.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38574501"}}, "parent": {"id": 38574241, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38574241.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38574241"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "This is before I publish any commands to Valkyrie after the reharness.  She will usually come down just fine, then the reharness finishes, she will raise her pelvis, adjust the torso, and command the same arm states as immediately prior to the fall -- regardless of her configuration during the reharness and immediately afterward.\n\nI need to do my dry run tonight, but I'll post code to reproduce this issue as soon as I can.", "markup": "markdown", "html": "<p>This is before I publish any commands to Valkyrie after the reharness.  She will usually come down just fine, then the reharness finishes, she will raise her pelvis, adjust the torso, and command the same arm states as immediately prior to the fall -- regardless of her configuration during the reharness and immediately afterward.</p>\n<p>I need to do my dry run tonight, but I'll post code to reproduce this issue as soon as I can.</p>", "type": "rendered"}, "created_on": "2017-06-09T19:42:56.010669+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-09T19:42:56.064479+00:00", "type": "pullrequest_comment", "id": 38574501}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38574241.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38574241"}}, "parent": {"id": 38572850, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38572850.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38572850"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "can you give an example of a command that would let me reproduce this? do you publish a torso message?", "markup": "markdown", "html": "<p>can you give an example of a command that would let me reproduce this? do you publish a torso message?</p>", "type": "rendered"}, "created_on": "2017-06-09T19:38:40.284489+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-09T19:38:40.286962+00:00", "type": "pullrequest_comment", "id": 38574241}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38574048.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38574048"}}, "parent": {"id": 38573061, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38573061.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38573061"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "that is very likely to be true\n", "markup": "markdown", "html": "<p>that is very likely to be true</p>", "type": "rendered"}, "created_on": "2017-06-09T19:34:54.160246+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-09T19:34:54.162461+00:00", "type": "pullrequest_comment", "id": 38574048}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38573061.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38573061"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "My comment above and the fact that walking is failing make me wonder if the IHMC controller is not resetting its state when restarting after a reharness.", "markup": "markdown", "html": "<p>My comment above and the fact that walking is failing make me wonder if the IHMC controller is not resetting its state when restarting after a reharness.</p>", "type": "rendered"}, "created_on": "2017-06-09T19:15:09.056982+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-09T19:15:09.101119+00:00", "type": "pullrequest_comment", "id": 38573061}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38572850.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38572850"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "Any idea why I see the torso twist to match its previous world orientation?  Say, if I fall in the world 1 start box with the torso facing +x, then reharness to checkpoint 2, Valkyrie will be lowered okay, facing the valves.  However, after the harness detaches, the first thing she does is rotate her torso to face the way she had been facing prior to the fall (in addition to moving the arm joints to where they were prior to falling).  It's not that she's commanding the old torso joint angles, as then she'd still be facing the same way as the pelvis, rather she seems to be matching the old torso orientation.", "markup": "markdown", "html": "<p>Any idea why I see the torso twist to match its previous world orientation?  Say, if I fall in the world 1 start box with the torso facing +x, then reharness to checkpoint 2, Valkyrie will be lowered okay, facing the valves.  However, after the harness detaches, the first thing she does is rotate her torso to face the way she had been facing prior to the fall (in addition to moving the arm joints to where they were prior to falling).  It's not that she's commanding the old torso joint angles, as then she'd still be facing the same way as the pelvis, rather she seems to be matching the old torso orientation.</p>", "type": "rendered"}, "created_on": "2017-06-09T19:11:20.229905+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-09T19:12:53.555992+00:00", "type": "pullrequest_comment", "id": 38572850}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"comment": {"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38572232.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38572232"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "If the pelvis is still getting twisted, we can also change the harness manager to wait a little longer or teleport to a higher starting point.", "markup": "markdown", "html": "<p>If the pelvis is still getting twisted, we can also change the harness manager to wait a little longer or teleport to a higher starting point.</p>", "type": "rendered"}, "created_on": "2017-06-09T18:59:19.226145+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": "2017-06-09T18:59:19.228258+00:00", "type": "pullrequest_comment", "id": 38572232}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"update": {"description": "The feet can get tangled up when reharnessing, so this PR resets joint positions just before lowering. I got the neutral joint positions by echoing the joint_states when it seemed to be at equilibrium.\r\n\r\nFor a kinda weird reason, I don't reset the joints connecting the pelvis to the torso. The `pelvis` is the root of the urdf kinematic tree, but the torso is link attached to the harness. The [Joint::SetPosition](https://bitbucket.org/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/physics/Joint.hh?fileviewer=file-view-default#Joint.hh-347) function sets the child link poses down the entire kinematic chain, but this doesn't work since the torso pose is already constrained by the harness. To reset the torso joints, one would have to teleport the robot to a place with no other collisions nearby, then call `SetJointPosition` on all the joints, then attach the harness. Making this change would require a lot more code to be touched, so I think this is a good compromise. The legs will still swing down into place even if the torso joints aren't reset, but they should be untangled.\r\n\r\nIntended to address #207 and #241.", "title": "Reset joint positions after harnessing (all except the torso joints)", "destination": {"commit": {"hash": "4e95f3e70fca", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/4e95f3e70fca.json"}, "html": {"href": "#!/osrf/srcsim/commits/4e95f3e70fca"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9c97c0bc61ec", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/9c97c0bc61ec.json"}, "html": {"href": "#!/osrf/srcsim/commits/9c97c0bc61ec"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "harness_joint_position"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2017-06-09T18:57:02.398519+00:00"}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}, {"update": {"description": "The feet can get tangled up when reharnessing, so this PR resets joint positions just before lowering. I got the neutral joint positions by echoing the joint_states when it seemed to be at equilibrium.\r\n\r\nFor a kinda weird reason, I don't reset the joints connecting the pelvis to the torso. The `pelvis` is the root of the urdf kinematic tree, but the torso is link attached to the harness. The [Joint::SetPosition](https://bitbucket.org/osrf/gazebo/src/42215f2019f5ae64fc8a0610ef804a0fc53b0740/gazebo/physics/Joint.hh?fileviewer=file-view-default#Joint.hh-347) function sets the child link poses down the entire kinematic chain, but this doesn't work since the torso pose is already constrained by the harness. To reset the torso joints, one would have to teleport the robot to a place with no other collisions nearby, then call `SetJointPosition` on all the joints, then attach the harness. Making this change would require a lot more code to be touched, so I think this is a good compromise. The legs will still swing down into place even if the torso joints aren't reset, but they should be untangled.\r\n\r\nIntended to address #207 and #241.", "title": "Reset joint positions after harnessing (all except the torso joints)", "destination": {"commit": {"hash": "4e95f3e70fca", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/4e95f3e70fca.json"}, "html": {"href": "#!/osrf/srcsim/commits/4e95f3e70fca"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "default"}}, "reason": "", "source": {"commit": {"hash": "9c97c0bc61ec", "type": "commit", "links": {"self": {"href": "data/repositories/osrf/srcsim/commit/9c97c0bc61ec.json"}, "html": {"href": "#!/osrf/srcsim/commits/9c97c0bc61ec"}}}, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "branch": {"name": "harness_joint_position"}}, "state": "OPEN", "author": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "date": "2017-06-09T18:57:02.362925+00:00"}, "pull_request": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}}]}