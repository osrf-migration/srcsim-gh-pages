{"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99/comments/38580537.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99/_/diff#comment-38580537"}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 99, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/99.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/99"}}, "title": "Reset joint positions after harnessing (all except the torso joints)"}, "content": {"raw": "@scpeters Here's one way to easily recreate this (at least the part where it executes the last pelvis height prior to collapse).\n\n```\nrostopic pub /ihmc_ros/valkyrie/control/pelvis_height_trajectory ihmc_msgs/PelvisHeightTrajectoryRosMessage \"execution_mode: 0\nprevious_message_id: 0\ntrajectory_points:\n- time: 0.5\n  position: 0.4\n  velocity: 0.0\n  unique_id: 0\nunique_id: -1\" -1\n\nrosservice call /srcsim/finals/start_task 1 2\n```\n\nYou can reharness to task 1-2 again and again and get different behavior each time.  [Here's a video where I run this.](https://www.youtube.com/watch?v=9cdkgxDFQoc)  The first time Val seems okay, but a few seconds after harnessing is finished, she tries to go back to the previous pelvis height and falls again.  Reharnessing again leads to the harness stuck in state 4.\n\nThis doesn't recreate the torso issue -- which makes me wonder if the IHMC side is storing the last robot commands received.", "markup": "markdown", "html": "<p>@scpeters Here's one way to easily recreate this (at least the part where it executes the last pelvis height prior to collapse).</p>\n<div class=\"codehilite\"><pre><span></span>rostopic pub /ihmc_ros/valkyrie/control/pelvis_height_trajectory ihmc_msgs/PelvisHeightTrajectoryRosMessage &quot;execution_mode: 0\nprevious_message_id: 0\ntrajectory_points:\n- time: 0.5\n  position: 0.4\n  velocity: 0.0\n  unique_id: 0\nunique_id: -1&quot; -1\n\nrosservice call /srcsim/finals/start_task 1 2\n</pre></div>\n\n\n<p>You can reharness to task 1-2 again and again and get different behavior each time.  <a data-is-external-link=\"true\" href=\"https://www.youtube.com/watch?v=9cdkgxDFQoc\" rel=\"nofollow\">Here's a video where I run this.</a>  The first time Val seems okay, but a few seconds after harnessing is finished, she tries to go back to the previous pelvis height and falls again.  Reharnessing again leads to the harness stuck in state 4.</p>\n<p>This doesn't recreate the torso issue -- which makes me wonder if the IHMC side is storing the last robot commands received.</p>", "type": "rendered"}, "created_on": "2017-06-09T22:07:26.300405+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-09T22:35:44.319595+00:00", "type": "pullrequest_comment", "id": 38580537}