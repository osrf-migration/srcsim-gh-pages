{"links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/19/comments/28801584.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/19/_/diff#comment-28801584"}}, "parent": {"id": 28800382, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/19/comments/28800382.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/19/_/diff#comment-28800382"}}}, "deleted": false, "pullrequest": {"type": "pullrequest", "id": 19, "links": {"self": {"href": "data/repositories/osrf/srcsim/pullrequests/19.json"}, "html": {"href": "#!/osrf/srcsim/pull-requests/19"}}, "title": "Scoring"}, "content": {"raw": "Great find!  This was exactly my concern from the very beginning when I saw that we were going to have to do transforms that were not included in the ROS tf.  It gets really messy. \nIn any case, what frame do you think we should publish in?\nSeems like it could be ROS head frame, ROS neck frame, or Gazebo neck frame.\nAs long as one gets picked soon and we stick with it, I'm good.\n\nI decided I better check the rotation frames too.  The rotation from ROS head frame to Gazebo world has nonzero values in both roll (expected because it is inverted) and pitch.  What to do about the pitch offset?\nIt's especially confusing because the Gazebo model has no head frame.  The neck pitch in the Valkyrie model is set to 0.\n\n\n```\n#!python\n\nhead frame (0,0,0) becomes world frame: X, Y, Z = 0.103639, -0.045790, 1.615896\nhead frame (0,0,0) becomes world frame: roll, pitch, yaw = 3.141456, 0.129107, -0.000327\n```\n", "markup": "markdown", "html": "<p>Great find!  This was exactly my concern from the very beginning when I saw that we were going to have to do transforms that were not included in the ROS tf.  It gets really messy. \nIn any case, what frame do you think we should publish in?\nSeems like it could be ROS head frame, ROS neck frame, or Gazebo neck frame.\nAs long as one gets picked soon and we stick with it, I'm good.</p>\n<p>I decided I better check the rotation frames too.  The rotation from ROS head frame to Gazebo world has nonzero values in both roll (expected because it is inverted) and pitch.  What to do about the pitch offset?\nIt's especially confusing because the Gazebo model has no head frame.  The neck pitch in the Valkyrie model is set to 0.</p>\n<div class=\"codehilite language-python\"><pre><span></span><span class=\"n\">head</span> <span class=\"n\">frame</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"n\">becomes</span> <span class=\"n\">world</span> <span class=\"n\">frame</span><span class=\"p\">:</span> <span class=\"n\">X</span><span class=\"p\">,</span> <span class=\"n\">Y</span><span class=\"p\">,</span> <span class=\"n\">Z</span> <span class=\"o\">=</span> <span class=\"mf\">0.103639</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">0.045790</span><span class=\"p\">,</span> <span class=\"mf\">1.615896</span>\n<span class=\"n\">head</span> <span class=\"n\">frame</span> <span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"n\">becomes</span> <span class=\"n\">world</span> <span class=\"n\">frame</span><span class=\"p\">:</span> <span class=\"n\">roll</span><span class=\"p\">,</span> <span class=\"n\">pitch</span><span class=\"p\">,</span> <span class=\"n\">yaw</span> <span class=\"o\">=</span> <span class=\"mf\">3.141456</span><span class=\"p\">,</span> <span class=\"mf\">0.129107</span><span class=\"p\">,</span> <span class=\"o\">-</span><span class=\"mf\">0.000327</span>\n</pre></div>", "type": "rendered"}, "created_on": "2016-12-23T04:45:42.714035+00:00", "user": {"display_name": "dan", "uuid": "{a93bd0ec-35fc-49a5-aa8a-b0b57403c2d0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba93bd0ec-35fc-49a5-aa8a-b0b57403c2d0%7D"}, "html": {"href": "https://bitbucket.org/%7Ba93bd0ec-35fc-49a5-aa8a-b0b57403c2d0%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dd56d3105d7602d83d5c35a320f6b36cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsD-6.png"}}, "nickname": "dan77062", "type": "user", "account_id": "557058:e0e36946-cb60-4776-8f47-2e9a0285ad35"}, "updated_on": "2016-12-23T05:50:16.246692+00:00", "type": "pullrequest_comment", "id": 28801584}