{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/91/comments/34687204.json"}, "html": {"href": "#!/osrf/srcsim/issues/91#comment-34687204"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/91.json"}}, "type": "issue", "id": 91, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "us.ihmc.valkyrieRosControl.ValkyrieRosControlController does not extend us.ihmc.rosControl.wholeRobot.IHMCWholeRobotControlJavaBridge"}, "content": {"raw": "I believe it is a java7/8 issue. The issue is that the `ros-indigo-ihmc-ros-control` package is built on the ROS buildfarm against the `default-java` package, so the `libihmc_ros_control_java_bridge.so` library is linked against the JRE in `/usr/lib/jvm/default-java`:\n\n~~~\n$ ldd /opt/ros/indigo/lib/libihmc_whole_robot_control_java_bridge.so | grep java\n\tlibihmc_ros_control_java_bridge.so => /opt/ros/indigo/lib/libihmc_ros_control_java_bridge.so (0x00007f55d293b000)\n\tlibjvm.so => /usr/lib/jvm/default-java/jre/lib/amd64/server/libjvm.so (0x00007f55ce3b3000)\n~~~\n\nOn trusty, that points to openjdk7. In order to switch to openjdk8, try the following (JAVA_HOME should already be set according to the installation instructions, but I'm including it for completeness):\n\n~~~\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\nsudo update-alternatives --config java\nsudo update-alternatives --config javac\n~~~\n\nThe `update-alternatives` commands are interactive and require you to select openjdk8.\n\nThe next command is a bit nasty re-writing of symbolic links installed from the `default-jre-headless` package, but I'm not sure of a better way to do it:\n\n~~~\nsudo rm /usr/lib/jvm/default-java\nsudo ln -s /usr/lib/jvm/java-8-openjdk-amd64 /usr/lib/jvm/default-java\n~~~\n\ncc @\\_jrivero_", "markup": "markdown", "html": "<p>I believe it is a java7/8 issue. The issue is that the <code>ros-indigo-ihmc-ros-control</code> package is built on the ROS buildfarm against the <code>default-java</code> package, so the <code>libihmc_ros_control_java_bridge.so</code> library is linked against the JRE in <code>/usr/lib/jvm/default-java</code>:</p>\n<div class=\"codehilite\"><pre><span></span>$ ldd /opt/ros/indigo/lib/libihmc_whole_robot_control_java_bridge.so <span class=\"p\">|</span> grep java\n    libihmc_ros_control_java_bridge.so <span class=\"o\">=</span>&gt; /opt/ros/indigo/lib/libihmc_ros_control_java_bridge.so <span class=\"o\">(</span>0x00007f55d293b000<span class=\"o\">)</span>\n    libjvm.so <span class=\"o\">=</span>&gt; /usr/lib/jvm/default-java/jre/lib/amd64/server/libjvm.so <span class=\"o\">(</span>0x00007f55ce3b3000<span class=\"o\">)</span>\n</pre></div>\n\n\n<p>On trusty, that points to openjdk7. In order to switch to openjdk8, try the following (JAVA_HOME should already be set according to the installation instructions, but I'm including it for completeness):</p>\n<div class=\"codehilite\"><pre><span></span>export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\nsudo update-alternatives --config java\nsudo update-alternatives --config javac\n</pre></div>\n\n\n<p>The <code>update-alternatives</code> commands are interactive and require you to select openjdk8.</p>\n<p>The next command is a bit nasty re-writing of symbolic links installed from the <code>default-jre-headless</code> package, but I'm not sure of a better way to do it:</p>\n<div class=\"codehilite\"><pre><span></span>sudo rm /usr/lib/jvm/default-java\nsudo ln -s /usr/lib/jvm/java-8-openjdk-amd64 /usr/lib/jvm/default-java\n</pre></div>\n\n\n<p>cc @_jrivero_</p>", "type": "rendered"}, "created_on": "2017-02-25T02:04:32.580088+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 34687204}