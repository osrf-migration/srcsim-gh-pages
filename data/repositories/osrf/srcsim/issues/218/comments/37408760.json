{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/218/comments/37408760.json"}, "html": {"href": "#!/osrf/srcsim/issues/218#comment-37408760"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/218.json"}}, "type": "issue", "id": 218, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "docker build error"}, "content": {"raw": "If a team is having an intermittent docker build issue that always occurs in the same place, they can try adding `sync` to the `RUN` command prior to the command that fails with `Text file busy`.\n\nI'm assuming this is an issue with building a team's field computer docker image using the `src_deploy.bash` script in cloudsim-sim. Since @dan77062 reported the issue happens intermittently I added a pull request to retry building the team's docker image up to 5 times in [this pull request](https://bitbucket.org/osrf/cloudsim-sim/pull-requests/66)\n\n`Text file busy` is probably [`ETXTBSY`](https://linux.die.net/man/2/access) which happens when one attempts to write to a file that is being executed. There are reports of this happening in docker files: [here where executing file after running chmod](https://github.com/moby/moby/issues/9547), [here with mention of an AUFS issue](https://github.com/moby/moby/issues/13594). There's also discussion about `chmod` in `aufs` and a race condition leading to `ETXTBSY` [on the aufs mailing list](http://aufs-users.narkive.com/ivifYRBa/aufs-text-file-busy-error).", "markup": "markdown", "html": "<p>If a team is having an intermittent docker build issue that always occurs in the same place, they can try adding <code>sync</code> to the <code>RUN</code> command prior to the command that fails with <code>Text file busy</code>.</p>\n<p>I'm assuming this is an issue with building a team's field computer docker image using the <code>src_deploy.bash</code> script in cloudsim-sim. Since @dan77062 reported the issue happens intermittently I added a pull request to retry building the team's docker image up to 5 times in <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/cloudsim-sim/pull-requests/66\" rel=\"nofollow\">this pull request</a></p>\n<p><code>Text file busy</code> is probably <a data-is-external-link=\"true\" href=\"https://linux.die.net/man/2/access\" rel=\"nofollow\"><code>ETXTBSY</code></a> which happens when one attempts to write to a file that is being executed. There are reports of this happening in docker files: <a data-is-external-link=\"true\" href=\"https://github.com/moby/moby/issues/9547\" rel=\"nofollow\">here where executing file after running chmod</a>, <a data-is-external-link=\"true\" href=\"https://github.com/moby/moby/issues/13594\" rel=\"nofollow\">here with mention of an AUFS issue</a>. There's also discussion about <code>chmod</code> in <code>aufs</code> and a race condition leading to <code>ETXTBSY</code> <a data-is-external-link=\"true\" href=\"http://aufs-users.narkive.com/ivifYRBa/aufs-text-file-busy-error\" rel=\"nofollow\">on the aufs mailing list</a>.</p>", "type": "rendered"}, "created_on": "2017-06-06T16:08:33.338149+00:00", "user": {"display_name": "Shane Loretz", "uuid": "{656e3311-aad9-45a1-aaf7-b0ee0e84b287}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D"}, "html": {"href": "https://bitbucket.org/%7B656e3311-aad9-45a1-aaf7-b0ee0e84b287%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:684383ab-ac95-4859-a350-4a6f41a94a22/c7a1ebf5-cade-4115-9f26-9d3facb776db/128"}}, "nickname": "Shane Loretz", "type": "user", "account_id": "557058:684383ab-ac95-4859-a350-4a6f41a94a22"}, "updated_on": "2017-06-06T19:06:45.479821+00:00", "type": "issue_comment", "id": 37408760}