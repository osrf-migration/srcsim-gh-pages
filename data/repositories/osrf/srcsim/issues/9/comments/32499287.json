{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/9/comments/32499287.json"}, "html": {"href": "#!/osrf/srcsim/issues/9#comment-32499287"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/9.json"}}, "type": "issue", "id": 9, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "Valkyrie Drops to the Ground due to incorrect delays in startup script"}, "content": {"raw": "The issue that @T_AL is having (at least in the post here) is this:\n\n```\n#!c++\n\nexception subscribing to AngularVelocityX : /sensors/middlePelvisIMU/AngularVelocityX has not been registered.\nexception subscribing to AngularVelocityY : /sensors/middlePelvisIMU/AngularVelocityY has not been registered.\nexception subscribing to AngularVelocityZ : /sensors/middlePelvisIMU/AngularVelocityZ has not been registered.\nexception subscribing to LinearAccelerationX : /sensors/middlePelvisIMU/LinearAccelerationX has not been registered.\nexception subscribing to LinearAccelerationY : /sensors/middlePelvisIMU/LinearAccelerationY has not been registered.\nexception subscribing to LinearAccelerationZ : /sensors/middlePelvisIMU/LinearAccelerationZ has not been registered.\nexception subscribing to QuaternionW : /sensors/middlePelvisIMU/QuaternionW has not been registered.\nexception subscribing to QuaternionX : /sensors/middlePelvisIMU/QuaternionX has not been registered.\nexception subscribing to QuaternionY : /sensors/middlePelvisIMU/QuaternionY has not been registered.\nexception subscribing to QuaternionZ : /sensors/middlePelvisIMU/QuaternionZ has not been registered.\n[Err] [Model.cc:1073] Exception occured in the Load function of plugin with name[SharedMemorySimInterfacePlugin] and filename[libval_gazebo.so]. This plugin will not run.\n```\nThis issue is not the same as issue 6, but is not the same. The plugin is looking for topics that do not exist. When they do not, the plugin fails but that doesn't mean that the manager has failed. This will cause the robot to load properly and appear that the controller is running properly, but none of the commands will get to the robot in simulation.\n\nA possible fix for this is if you look in val_gazebo/launch/val_empty_world.launch Inside there you will find the call to the gazebo plugin which looks like:\n\n\n```\n#!c++\n\n<node name=\"$(anon urdf_spawner)\" pkg=\"val_deploy\" type=\"delayed_roslaunch.sh\" args=\"6 val_gazebo spawn_urdf_model_from_robot_description.launch modelName:=valkyrie zOffset:=1.25\" output=\"screen\"/>\n```\nThe first argument is a delay on the gazebo spawn. If you are having an issue with the plugin not loading properly, or if you increased the delay on the controller_manager spawn then you whould increase the delay here form 6.", "markup": "markdown", "html": "<p>The issue that @T_AL is having (at least in the post here) is this:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">AngularVelocityX</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">AngularVelocityX</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">AngularVelocityY</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">AngularVelocityY</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">AngularVelocityZ</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">AngularVelocityZ</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">LinearAccelerationX</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">LinearAccelerationX</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">LinearAccelerationY</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">LinearAccelerationY</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">LinearAccelerationZ</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">LinearAccelerationZ</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">QuaternionW</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">QuaternionW</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">QuaternionX</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">QuaternionX</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">QuaternionY</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">QuaternionY</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"n\">exception</span> <span class=\"n\">subscribing</span> <span class=\"n\">to</span> <span class=\"nl\">QuaternionZ</span> <span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">sensors</span><span class=\"o\">/</span><span class=\"n\">middlePelvisIMU</span><span class=\"o\">/</span><span class=\"n\">QuaternionZ</span> <span class=\"n\">has</span> <span class=\"n\">not</span> <span class=\"n\">been</span> <span class=\"n\">registered</span><span class=\"p\">.</span>\n<span class=\"p\">[</span><span class=\"n\">Err</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">Model</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">1073</span><span class=\"p\">]</span> <span class=\"n\">Exception</span> <span class=\"n\">occured</span> <span class=\"n\">in</span> <span class=\"n\">the</span> <span class=\"n\">Load</span> <span class=\"n\">function</span> <span class=\"n\">of</span> <span class=\"n\">plugin</span> <span class=\"n\">with</span> <span class=\"n\">name</span><span class=\"p\">[</span><span class=\"n\">SharedMemorySimInterfacePlugin</span><span class=\"p\">]</span> <span class=\"n\">and</span> <span class=\"n\">filename</span><span class=\"p\">[</span><span class=\"n\">libval_gazebo</span><span class=\"p\">.</span><span class=\"n\">so</span><span class=\"p\">].</span> <span class=\"n\">This</span> <span class=\"n\">plugin</span> <span class=\"n\">will</span> <span class=\"n\">not</span> <span class=\"n\">run</span><span class=\"p\">.</span>\n</pre></div>\n\n\n<p>This issue is not the same as issue 6, but is not the same. The plugin is looking for topics that do not exist. When they do not, the plugin fails but that doesn't mean that the manager has failed. This will cause the robot to load properly and appear that the controller is running properly, but none of the commands will get to the robot in simulation.</p>\n<p>A possible fix for this is if you look in val_gazebo/launch/val_empty_world.launch Inside there you will find the call to the gazebo plugin which looks like:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"o\">&lt;</span><span class=\"n\">node</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s\">&quot;$(anon urdf_spawner)&quot;</span> <span class=\"n\">pkg</span><span class=\"o\">=</span><span class=\"s\">&quot;val_deploy&quot;</span> <span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;delayed_roslaunch.sh&quot;</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"s\">&quot;6 val_gazebo spawn_urdf_model_from_robot_description.launch modelName:=valkyrie zOffset:=1.25&quot;</span> <span class=\"n\">output</span><span class=\"o\">=</span><span class=\"s\">&quot;screen&quot;</span><span class=\"o\">/&gt;</span>\n</pre></div>\n\n\n<p>The first argument is a delay on the gazebo spawn. If you are having an issue with the plugin not loading properly, or if you increased the delay on the controller_manager spawn then you whould increase the delay here form 6.</p>", "type": "rendered"}, "created_on": "2016-11-28T17:33:17.294506+00:00", "user": {"display_name": "Frank Mathis", "uuid": "{c5dc4539-bf32-46cf-a835-2df9d61c1e67}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc5dc4539-bf32-46cf-a835-2df9d61c1e67%7D"}, "html": {"href": "https://bitbucket.org/%7Bc5dc4539-bf32-46cf-a835-2df9d61c1e67%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6de77305af815a499704cc9e544f26a3d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsFM-0.png"}}, "nickname": "frank_b_mathis", "type": "user", "account_id": "557058:5e5e53a9-f873-4bf4-b7d6-3c2e1ce82891"}, "updated_on": null, "type": "issue_comment", "id": 32499287}