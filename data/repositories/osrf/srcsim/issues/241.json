{"priority": "blocker", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "links": {"attachments": {"href": "data/repositories/osrf/srcsim/issues/241/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/srcsim/issues/241.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/srcsim/issues/241/watch"}, "comments": {"href": "data/repositories/osrf/srcsim/issues/241/comments_page=1.json"}, "html": {"href": "#!/osrf/srcsim/issues/241/valkyrie-cant-walk-after-reharnessing"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/srcsim/issues/241/vote"}}, "reporter": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "title": "Valkyrie can't walk after reharnessing following a fall", "component": null, "votes": 1, "watches": 1, "content": {"raw": "After falling, when Valkyrie is reharnessed, the /world to /pelvis transform changes -- namely, upon release, her pelvis pose is between half a meter and a few meters lower.  Attempting to command any footstep results in Valkyrie falling.\r\n\r\nIt looks like a whole body trajectory is given to the IHMC controller using Valkyrie's state prior to the fall (chest orientation, pelvis height, arm joint angles -- everything but  the pelvis orientation and pelvis x,y position).  Noticed this last part after Valkyrie fell and I skipped to a new checkpoint.\r\n\r\n[Here's a video](https://www.youtube.com/watch?v=T3AE5xG3I-0) trying to move the left foot forward only 5cm.  I use the current foot in world position from TF and displace it 5cm. Valkyrie lifts her foot and essentially sits down. \r\n\r\nThe image shown is Valkyrie's position before falling in the task 1 start box (red) and her position after reharnessing at task 1 checkpoint 2.  This is one of the more extreme vertical shifts I've seen.  It also shows her torso tracking it's orientation from before the fall.\r\n![3266145333-val_before_after.png](data/bitbucket.org/repo/xEbAAe/images/3537337421-3266145333-val_before_after.png)\r\n\r\n(Splitting this out from #207 as it is separate from Valkyrie being in a weird configuration as it reharnesses and also happens after a successful reharness and detach)", "markup": "markdown", "html": "<p>After falling, when Valkyrie is reharnessed, the /world to /pelvis transform changes -- namely, upon release, her pelvis pose is between half a meter and a few meters lower.  Attempting to command any footstep results in Valkyrie falling.</p>\n<p>It looks like a whole body trajectory is given to the IHMC controller using Valkyrie's state prior to the fall (chest orientation, pelvis height, arm joint angles -- everything but  the pelvis orientation and pelvis x,y position).  Noticed this last part after Valkyrie fell and I skipped to a new checkpoint.</p>\n<p><a data-is-external-link=\"true\" href=\"https://www.youtube.com/watch?v=T3AE5xG3I-0\" rel=\"nofollow\">Here's a video</a> trying to move the left foot forward only 5cm.  I use the current foot in world position from TF and displace it 5cm. Valkyrie lifts her foot and essentially sits down. </p>\n<p>The image shown is Valkyrie's position before falling in the task 1 start box (red) and her position after reharnessing at task 1 checkpoint 2.  This is one of the more extreme vertical shifts I've seen.  It also shows her torso tracking it's orientation from before the fall.\n<img alt=\"3266145333-val_before_after.png\" src=\"data/bitbucket.org/repo/xEbAAe/images/3537337421-3266145333-val_before_after.png\" /></p>\n<p>(Splitting this out from <a href=\"#!/osrf/srcsim/issues/207/robot-discombobulated-after-reharness\" rel=\"nofollow\" title=\"Robot Discombobulated After Reharness\" class=\"ap-connect-link\">#207</a> as it is separate from Valkyrie being in a weird configuration as it reharnesses and also happens after a successful reharness and detach)</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-06-09T13:23:01.106822+00:00", "milestone": null, "updated_on": "2017-06-12T23:58:37.604398+00:00", "type": "issue", "id": 241}