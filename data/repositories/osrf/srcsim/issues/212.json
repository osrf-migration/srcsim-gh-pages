{"priority": "major", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "links": {"attachments": {"href": "data/repositories/osrf/srcsim/issues/212/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/srcsim/issues/212.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/srcsim/issues/212/watch"}, "comments": {"href": "data/repositories/osrf/srcsim/issues/212/comments_page=1.json"}, "html": {"href": "#!/osrf/srcsim/issues/212/gazebo-78-crash-more-visible-or-more"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/srcsim/issues/212/vote"}}, "reporter": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "title": "gazebo 7.8 crash more visible or more common", "component": {"name": "world", "links": {"self": {"href": "data/repositories/osrf/srcsim/components/395699.json"}}}, "votes": 0, "watches": 1, "content": {"raw": "A gazebo server crash, which has been one of the common startup failures (but perhaps only 1 in 10 or even less than that), now seems to happen more often.\r\n\r\nNotably, it seems as though when we give it a checkpoint move instruction, and we're at the point of reharness, we seems to risk getting it again.  Perhaps nicely, this failure seems to come with more informaton.  I get the following on the terminal:\r\n\r\n```\r\n#!c++\r\n\r\n[libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp, type, serialized_data\r\nMaster Unknown message type[] From[44894]\r\n[libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type \"gazebo.msgs.Packet\" because it is missing required fields: stamp, type, serialized_data\r\nMaster Unknown message type[] From[44894]\r\ngzserver: /usr/include/boost/smart_ptr/shared_ptr.hpp:653: typename boost::detail::sp_member_access<T>::type boost::shared_ptr<T>::operator->() const [with T = gazebo::transport::Publisher; typename boost::detail::sp_member_access<T>::type = gazebo::transport::Publisher*]: Assertion `px != 0' failed.\r\nAborted (core dumped)\r\n[gazebo-6] process has died [pid 22627, exit code 134, cmd /opt/ros/indigo/lib/gazebo_ros/gzserver --verbose -e ode -r /home/jwhite/w/srcsim/worlds/final_2.world __name:=gazebo __log:=/home/high/.ros/log/d7154fac-4930-11e7-a564-fcf8ae5ce333/gazebo-6.log].\r\nlog file: /home/high/.ros/log/d7154fac-4930-11e7-a564-fcf8ae5ce333/gazebo-6*.log\r\n\r\n```\r\nThe can't parse message errors are familiar to me, and the gzserver crash is familiar as well.  The assertion failure is new.", "markup": "markdown", "html": "<p>A gazebo server crash, which has been one of the common startup failures (but perhaps only 1 in 10 or even less than that), now seems to happen more often.</p>\n<p>Notably, it seems as though when we give it a checkpoint move instruction, and we're at the point of reharness, we seems to risk getting it again.  Perhaps nicely, this failure seems to come with more informaton.  I get the following on the terminal:</p>\n<div class=\"codehilite language-c++\"><pre><span></span><span class=\"p\">[</span><span class=\"n\">libprotobuf</span> <span class=\"n\">ERROR</span> <span class=\"n\">google</span><span class=\"o\">/</span><span class=\"n\">protobuf</span><span class=\"o\">/</span><span class=\"n\">message_lite</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">123</span><span class=\"p\">]</span> <span class=\"n\">Can</span><span class=\"err\">&#39;</span><span class=\"n\">t</span> <span class=\"n\">parse</span> <span class=\"n\">message</span> <span class=\"n\">of</span> <span class=\"n\">type</span> <span class=\"s\">&quot;gazebo.msgs.Packet&quot;</span> <span class=\"n\">because</span> <span class=\"n\">it</span> <span class=\"n\">is</span> <span class=\"n\">missing</span> <span class=\"n\">required</span> <span class=\"nl\">fields</span><span class=\"p\">:</span> <span class=\"n\">stamp</span><span class=\"p\">,</span> <span class=\"n\">type</span><span class=\"p\">,</span> <span class=\"n\">serialized_data</span>\n<span class=\"n\">Master</span> <span class=\"n\">Unknown</span> <span class=\"n\">message</span> <span class=\"n\">type</span><span class=\"p\">[]</span> <span class=\"n\">From</span><span class=\"p\">[</span><span class=\"mi\">44894</span><span class=\"p\">]</span>\n<span class=\"p\">[</span><span class=\"n\">libprotobuf</span> <span class=\"n\">ERROR</span> <span class=\"n\">google</span><span class=\"o\">/</span><span class=\"n\">protobuf</span><span class=\"o\">/</span><span class=\"n\">message_lite</span><span class=\"p\">.</span><span class=\"nl\">cc</span><span class=\"p\">:</span><span class=\"mi\">123</span><span class=\"p\">]</span> <span class=\"n\">Can</span><span class=\"err\">&#39;</span><span class=\"n\">t</span> <span class=\"n\">parse</span> <span class=\"n\">message</span> <span class=\"n\">of</span> <span class=\"n\">type</span> <span class=\"s\">&quot;gazebo.msgs.Packet&quot;</span> <span class=\"n\">because</span> <span class=\"n\">it</span> <span class=\"n\">is</span> <span class=\"n\">missing</span> <span class=\"n\">required</span> <span class=\"nl\">fields</span><span class=\"p\">:</span> <span class=\"n\">stamp</span><span class=\"p\">,</span> <span class=\"n\">type</span><span class=\"p\">,</span> <span class=\"n\">serialized_data</span>\n<span class=\"n\">Master</span> <span class=\"n\">Unknown</span> <span class=\"n\">message</span> <span class=\"n\">type</span><span class=\"p\">[]</span> <span class=\"n\">From</span><span class=\"p\">[</span><span class=\"mi\">44894</span><span class=\"p\">]</span>\n<span class=\"nl\">gzserver</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">boost</span><span class=\"o\">/</span><span class=\"n\">smart_ptr</span><span class=\"o\">/</span><span class=\"n\">shared_ptr</span><span class=\"p\">.</span><span class=\"nl\">hpp</span><span class=\"p\">:</span><span class=\"mi\">653</span><span class=\"o\">:</span> <span class=\"k\">typename</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">detail</span><span class=\"o\">::</span><span class=\"n\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"n\">type</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">shared_ptr</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"k\">operator</span><span class=\"o\">-&gt;</span><span class=\"p\">()</span> <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"n\">with</span> <span class=\"n\">T</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Publisher</span><span class=\"p\">;</span> <span class=\"k\">typename</span> <span class=\"n\">boost</span><span class=\"o\">::</span><span class=\"n\">detail</span><span class=\"o\">::</span><span class=\"n\">sp_member_access</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;::</span><span class=\"n\">type</span> <span class=\"o\">=</span> <span class=\"n\">gazebo</span><span class=\"o\">::</span><span class=\"n\">transport</span><span class=\"o\">::</span><span class=\"n\">Publisher</span><span class=\"o\">*</span><span class=\"p\">]</span><span class=\"o\">:</span> <span class=\"n\">Assertion</span> <span class=\"err\">`</span><span class=\"n\">px</span> <span class=\"o\">!=</span> <span class=\"mi\">0</span><span class=\"err\">&#39;</span> <span class=\"n\">failed</span><span class=\"p\">.</span>\n<span class=\"n\">Aborted</span> <span class=\"p\">(</span><span class=\"n\">core</span> <span class=\"n\">dumped</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"p\">]</span> <span class=\"n\">process</span> <span class=\"n\">has</span> <span class=\"n\">died</span> <span class=\"p\">[</span><span class=\"n\">pid</span> <span class=\"mi\">22627</span><span class=\"p\">,</span> <span class=\"n\">exit</span> <span class=\"n\">code</span> <span class=\"mi\">134</span><span class=\"p\">,</span> <span class=\"n\">cmd</span> <span class=\"o\">/</span><span class=\"n\">opt</span><span class=\"o\">/</span><span class=\"n\">ros</span><span class=\"o\">/</span><span class=\"n\">indigo</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">gazebo_ros</span><span class=\"o\">/</span><span class=\"n\">gzserver</span> <span class=\"o\">--</span><span class=\"n\">verbose</span> <span class=\"o\">-</span><span class=\"n\">e</span> <span class=\"n\">ode</span> <span class=\"o\">-</span><span class=\"n\">r</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">jwhite</span><span class=\"o\">/</span><span class=\"n\">w</span><span class=\"o\">/</span><span class=\"n\">srcsim</span><span class=\"o\">/</span><span class=\"n\">worlds</span><span class=\"o\">/</span><span class=\"n\">final_2</span><span class=\"p\">.</span><span class=\"n\">world</span> <span class=\"nl\">__name</span><span class=\"p\">:</span><span class=\"o\">=</span><span class=\"n\">gazebo</span> <span class=\"nl\">__log</span><span class=\"p\">:</span><span class=\"o\">=/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">high</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">ros</span><span class=\"o\">/</span><span class=\"n\">log</span><span class=\"o\">/</span><span class=\"n\">d7154fac</span><span class=\"o\">-</span><span class=\"mi\">4930</span><span class=\"o\">-</span><span class=\"mf\">11e7</span><span class=\"o\">-</span><span class=\"n\">a564</span><span class=\"o\">-</span><span class=\"n\">fcf8ae5ce333</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mf\">6.</span><span class=\"n\">log</span><span class=\"p\">].</span>\n<span class=\"n\">log</span> <span class=\"nl\">file</span><span class=\"p\">:</span> <span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">high</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">ros</span><span class=\"o\">/</span><span class=\"n\">log</span><span class=\"o\">/</span><span class=\"n\">d7154fac</span><span class=\"o\">-</span><span class=\"mi\">4930</span><span class=\"o\">-</span><span class=\"mf\">11e7</span><span class=\"o\">-</span><span class=\"n\">a564</span><span class=\"o\">-</span><span class=\"n\">fcf8ae5ce333</span><span class=\"o\">/</span><span class=\"n\">gazebo</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"o\">*</span><span class=\"p\">.</span><span class=\"n\">log</span>\n</pre></div>\n\n\n<p>The can't parse message errors are familiar to me, and the gzserver crash is familiar as well.  The assertion failure is new.</p>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2017-06-04T14:26:58.642819+00:00", "milestone": null, "updated_on": "2017-06-13T04:45:47.101324+00:00", "type": "issue", "id": 212}