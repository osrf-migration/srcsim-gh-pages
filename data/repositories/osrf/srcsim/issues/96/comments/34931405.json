{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/96/comments/34931405.json"}, "html": {"href": "#!/osrf/srcsim/issues/96#comment-34931405"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/96.json"}}, "type": "issue", "id": 96, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "Head trajectory pitch > 0.47 hangs head / neck response"}, "content": {"raw": "Ok, it seems that one of the gains for the lower neck joint was a little low. I've raised it in the following PR:\n\n* https://gitlab.com/nasa-jsc-robotics/val_description/merge_requests/17\n\nThis can be manually patched by modifying the following code block in `/opt/nasa/indigo/share/val_description/model/urdf/valkyrie_sim_gazebo_sync.urdf`:\n\n~~~\n  <joint name=\"lowerNeckPitch\" type=\"revolute\">\n    <origin rpy=\"0.0 0.0 0.0\" xyz=\"0.0203518 0.0 0.33845\"/>\n    <axis xyz=\"0 1 0\"/>\n    <parent link=\"torso\"/>\n    <child link=\"lowerNeckPitchLink\"/>\n    <limit effort=\"26\" lower=\"0\" upper=\"1.162\" velocity=\"5\"/>\n    <controller_gains Kd=\"3\" Ki=\"3\" Kp=\"50\"/>\n    <dynamics damping=\"0.1\" friction=\"0.0\"/>\n~~~\n\nmake sure that `Ki=\"3\"`", "markup": "markdown", "html": "<p>Ok, it seems that one of the gains for the lower neck joint was a little low. I've raised it in the following PR:</p>\n<ul>\n<li><a href=\"https://gitlab.com/nasa-jsc-robotics/val_description/merge_requests/17\" rel=\"nofollow\" class=\"ap-connect-link\">https://gitlab.com/nasa-jsc-robotics/val_description/merge_requests/17</a></li>\n</ul>\n<p>This can be manually patched by modifying the following code block in <code>/opt/nasa/indigo/share/val_description/model/urdf/valkyrie_sim_gazebo_sync.urdf</code>:</p>\n<div class=\"codehilite\"><pre><span></span>  &lt;joint name=&quot;lowerNeckPitch&quot; type=&quot;revolute&quot;&gt;\n    &lt;origin rpy=&quot;0.0 0.0 0.0&quot; xyz=&quot;0.0203518 0.0 0.33845&quot;/&gt;\n    &lt;axis xyz=&quot;0 1 0&quot;/&gt;\n    &lt;parent link=&quot;torso&quot;/&gt;\n    &lt;child link=&quot;lowerNeckPitchLink&quot;/&gt;\n    &lt;limit effort=&quot;26&quot; lower=&quot;0&quot; upper=&quot;1.162&quot; velocity=&quot;5&quot;/&gt;\n    &lt;controller_gains Kd=&quot;3&quot; Ki=&quot;3&quot; Kp=&quot;50&quot;/&gt;\n    &lt;dynamics damping=&quot;0.1&quot; friction=&quot;0.0&quot;/&gt;\n</pre></div>\n\n\n<p>make sure that <code>Ki=\"3\"</code></p>", "type": "rendered"}, "created_on": "2017-03-07T22:15:14.457670+00:00", "user": {"display_name": "Steve Peters", "uuid": "{2ccfed09-18b8-4921-8d58-15ef01092802}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D"}, "html": {"href": "https://bitbucket.org/%7B2ccfed09-18b8-4921-8d58-15ef01092802%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/1fb4816dad9e68337d3096f750951f6cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSP-1.png"}}, "nickname": "Steven Peters", "type": "user", "account_id": "557058:5de38267-b118-494c-aa76-4fab35448816"}, "updated_on": null, "type": "issue_comment", "id": 34931405}