{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/70/comments/34304559.json"}, "html": {"href": "#!/osrf/srcsim/issues/70#comment-34304559"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/70.json"}}, "type": "issue", "id": 70, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "will the NeckTrajectory function be fixed?"}, "content": {"raw": "I'm running trajectory tests on the neck and publishing through the console with command:\n\n```\n#!\n\nrostopic pub /ihmc_ros/valkyrie/control/neck_trajectory ihmc_msgs/NeckTrajectoryRosMessage '{joint_trajectory_messages: [{trajectory_points: [time: 0.1, position: 0.01, velocity: 0.0, unique_id: 1]},{trajectory_points: [time: 0.1, position: 0.0, velocity: 0.0, unique_id: 1]},{trajectory_points: [time: 0.1, position: 0.0, velocity: 0.0, unique_id: 1]}], unique_id: 1}'\n```\nResults in this error:\n```\n#!\n\n[ERROR] [1486726549.250592385, 27.625000000]: Exception in thread \"SynchronousMultiThreadedRobotController-thread-1\" java.lang.RuntimeException: java.lang.RuntimeException: tried to cap a value 0.0 between a min of 0.0 and a max of -0.1. The max value is less than or equal to the min value\n[ERROR] [1486726549.251104968, 27.625000000]: \tat us.ihmc.wholeBodyController.DRCControllerThread.run(DRCControllerThread.java:360)\n[ERROR] [1486726549.251265208, 27.625000000]: \tat us.ihmc.wholeBodyController.concurrent.SynchronousMultiThreadedRobotController$ReentrantLockedControlElementRunner.run(SynchronousMultiThreadedRobotController.java:89)\n[ERROR] [1486726549.251947802, 27.625000000]: \tat java.lang.Thread.run(Thread.java:745)\n[ERROR] [1486726549.252543922, 27.625000000]: Caused by: java.lang.RuntimeException: tried to cap a value 0.0 between a min of 0.0 and a max of -0.1. The max value is less than or equal to the min value\n[ERROR] [1486726549.252693525, 27.625000000]: \tat us.ihmc.robotics.MathTools.clipToMinMax(MathTools.java:227)\n[ERROR] [1486726549.253040342, 27.625000000]: \tat us.ihmc.robotics.math.trajectories.PolynomialTrajectoryGenerator.compute(PolynomialTrajectoryGenerator.java:50)\n[ERROR] [1486726549.253271720, 27.625000000]: \tat us.ihmc.robotics.math.trajectories.CubicPolynomialTrajectoryGenerator.compute(CubicPolynomialTrajectoryGenerator.java:39)\n[ERROR] [1486726549.253474886, 27.625000000]: \tat us.ihmc.robotics.math.trajectories.PolynomialTrajectoryGenerator.initialize(PolynomialTrajectoryGenerator.java:42)\n[ERROR] [1486726549.253645216, 27.625000000]: \tat us.ihmc.robotics.math.trajectories.waypoints.MultipleWaypointsTrajectoryGenerator.initializeSubTrajectory(MultipleWaypointsTrajectoryGenerator.java:174)\n[ERROR] [1486726549.253788768, 27.625000000]: \tat us.ihmc.robotics.math.trajectories.waypoints.MultipleWaypointsTrajectoryGenerator.compute(MultipleWaypointsTrajectoryGenerator.java:186)\n[ERROR] [1486726549.253929907, 27.625000000]: \tat us.ihmc.commonWalkingControlModules.controlModules.head.JointspaceHeadControlState.doAction(JointspaceHeadControlState.java:103)\n[ERROR] [1486726549.254069216, 27.625000000]: \tat us.ihmc.robotics.stateMachines.GenericStateMachine.doAction(GenericStateMachine.java:152)\n[ERROR] [1486726549.254209877, 27.625000000]: \tat us.ihmc.commonWalkingControlModules.controlModules.head.HeadOrientationManager.compute(HeadOrientationManager.java:159)\n[ERROR] [1486726549.254361899, 27.625000000]: \tat us.ihmc.commonWalkingControlModules.highLevelHumanoidControl.highLevelStates.WalkingHighLevelHumanoidController.updateManagers(WalkingHighLevelHumanoidController.java:596)\n[ERROR] [1486726549.254505143, 27.625000000]: \tat us.ihmc.commonWalkingControlModules.highLevelHumanoidControl.highLevelStates.WalkingHighLevelHumanoidController.doAction(WalkingHighLevelHumanoidController.java:521)\n[ERROR] [1486726549.254680982, 27.625000000]: \tat us.ihmc.robotics.stateMachines.GenericStateMachine.doAction(GenericStateMachine.java:152)\n[ERROR] [1486726549.254826144, 27.625000000]: \tat us.ihmc.commonWalkingControlModules.highLevelHumanoidControl.HighLevelHumanoidControllerManager.doControl(HighLevelHumanoidControllerManager.java:178)\n[ERROR] [1486726549.254946228, 27.625000000]: \tat us.ihmc.simulationconstructionset.robotController.ModularRobotController.doControl(ModularRobotController.java:20)\n[ERROR] [1486726549.255089152, 27.625000000]: \tat us.ihmc.wholeBodyController.DRCControllerThread.run(DRCControllerThread.java:352)\n[ERROR] [1486726549.255229463, 27.625000000]: \t... 2 more\n\n```\nI really just want an update on the status of this fix. It seems that the min and max values for this are reversed. It results in Valkyrie performing backward somersaults.", "markup": "markdown", "html": "<p>I'm running trajectory tests on the neck and publishing through the console with command:</p>\n<div class=\"codehilite\"><pre><span></span>rostopic pub /ihmc_ros/valkyrie/control/neck_trajectory ihmc_msgs/NeckTrajectoryRosMessage &#39;{joint_trajectory_messages: [{trajectory_points: [time: 0.1, position: 0.01, velocity: 0.0, unique_id: 1]},{trajectory_points: [time: 0.1, position: 0.0, velocity: 0.0, unique_id: 1]},{trajectory_points: [time: 0.1, position: 0.0, velocity: 0.0, unique_id: 1]}], unique_id: 1}&#39;\n</pre></div>\n\n\n<p>Results in this error:</p>\n<div class=\"codehilite\"><pre><span></span>[ERROR] [1486726549.250592385, 27.625000000]: Exception in thread &quot;SynchronousMultiThreadedRobotController-thread-1&quot; java.lang.RuntimeException: java.lang.RuntimeException: tried to cap a value 0.0 between a min of 0.0 and a max of -0.1. The max value is less than or equal to the min value\n[ERROR] [1486726549.251104968, 27.625000000]:   at us.ihmc.wholeBodyController.DRCControllerThread.run(DRCControllerThread.java:360)\n[ERROR] [1486726549.251265208, 27.625000000]:   at us.ihmc.wholeBodyController.concurrent.SynchronousMultiThreadedRobotController$ReentrantLockedControlElementRunner.run(SynchronousMultiThreadedRobotController.java:89)\n[ERROR] [1486726549.251947802, 27.625000000]:   at java.lang.Thread.run(Thread.java:745)\n[ERROR] [1486726549.252543922, 27.625000000]: Caused by: java.lang.RuntimeException: tried to cap a value 0.0 between a min of 0.0 and a max of -0.1. The max value is less than or equal to the min value\n[ERROR] [1486726549.252693525, 27.625000000]:   at us.ihmc.robotics.MathTools.clipToMinMax(MathTools.java:227)\n[ERROR] [1486726549.253040342, 27.625000000]:   at us.ihmc.robotics.math.trajectories.PolynomialTrajectoryGenerator.compute(PolynomialTrajectoryGenerator.java:50)\n[ERROR] [1486726549.253271720, 27.625000000]:   at us.ihmc.robotics.math.trajectories.CubicPolynomialTrajectoryGenerator.compute(CubicPolynomialTrajectoryGenerator.java:39)\n[ERROR] [1486726549.253474886, 27.625000000]:   at us.ihmc.robotics.math.trajectories.PolynomialTrajectoryGenerator.initialize(PolynomialTrajectoryGenerator.java:42)\n[ERROR] [1486726549.253645216, 27.625000000]:   at us.ihmc.robotics.math.trajectories.waypoints.MultipleWaypointsTrajectoryGenerator.initializeSubTrajectory(MultipleWaypointsTrajectoryGenerator.java:174)\n[ERROR] [1486726549.253788768, 27.625000000]:   at us.ihmc.robotics.math.trajectories.waypoints.MultipleWaypointsTrajectoryGenerator.compute(MultipleWaypointsTrajectoryGenerator.java:186)\n[ERROR] [1486726549.253929907, 27.625000000]:   at us.ihmc.commonWalkingControlModules.controlModules.head.JointspaceHeadControlState.doAction(JointspaceHeadControlState.java:103)\n[ERROR] [1486726549.254069216, 27.625000000]:   at us.ihmc.robotics.stateMachines.GenericStateMachine.doAction(GenericStateMachine.java:152)\n[ERROR] [1486726549.254209877, 27.625000000]:   at us.ihmc.commonWalkingControlModules.controlModules.head.HeadOrientationManager.compute(HeadOrientationManager.java:159)\n[ERROR] [1486726549.254361899, 27.625000000]:   at us.ihmc.commonWalkingControlModules.highLevelHumanoidControl.highLevelStates.WalkingHighLevelHumanoidController.updateManagers(WalkingHighLevelHumanoidController.java:596)\n[ERROR] [1486726549.254505143, 27.625000000]:   at us.ihmc.commonWalkingControlModules.highLevelHumanoidControl.highLevelStates.WalkingHighLevelHumanoidController.doAction(WalkingHighLevelHumanoidController.java:521)\n[ERROR] [1486726549.254680982, 27.625000000]:   at us.ihmc.robotics.stateMachines.GenericStateMachine.doAction(GenericStateMachine.java:152)\n[ERROR] [1486726549.254826144, 27.625000000]:   at us.ihmc.commonWalkingControlModules.highLevelHumanoidControl.HighLevelHumanoidControllerManager.doControl(HighLevelHumanoidControllerManager.java:178)\n[ERROR] [1486726549.254946228, 27.625000000]:   at us.ihmc.simulationconstructionset.robotController.ModularRobotController.doControl(ModularRobotController.java:20)\n[ERROR] [1486726549.255089152, 27.625000000]:   at us.ihmc.wholeBodyController.DRCControllerThread.run(DRCControllerThread.java:352)\n[ERROR] [1486726549.255229463, 27.625000000]:   ... 2 more\n</pre></div>\n\n\n<p>I really just want an update on the status of this fix. It seems that the min and max values for this are reversed. It results in Valkyrie performing backward somersaults.</p>", "type": "rendered"}, "created_on": "2017-02-10T11:41:17.704972+00:00", "user": {"display_name": "Tom Tseemceeb Xiong", "uuid": "{07f3561e-974e-4e4d-962c-56f955baaac3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B07f3561e-974e-4e4d-962c-56f955baaac3%7D"}, "html": {"href": "https://bitbucket.org/%7B07f3561e-974e-4e4d-962c-56f955baaac3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/6aaf7437b4e057d91bcfca8bb6b456c9d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsTX-1.png"}}, "nickname": "Tom_Xiong", "type": "user", "account_id": "557058:5667b998-d71d-4e95-94f3-a06536d031b0"}, "updated_on": null, "type": "issue_comment", "id": 34304559}