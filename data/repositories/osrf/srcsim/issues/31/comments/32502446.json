{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/31/comments/32502446.json"}, "html": {"href": "#!/osrf/srcsim/issues/31#comment-32502446"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/31.json"}}, "type": "issue", "id": 31, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "Setup step for exporting ROS_IP"}, "content": {"raw": "@nkoenig @rmerriam It seems to be an intermittent bug that's heavily correlated with the network setup and local network configuration (e.g. contests of /etc/hosts), we have a hard time reproducing it reliably ourselves but it's a real issue. We don't know exactly what the nature of the bug is, the TL;DR version being that when a hostname-style URI is passed in to our stack, we always convert this to an IP address using DNS lookup to avoid any ambiguity, and for whatever reason sometimes ROSJava and native ROS don't always agree that a hostname that resolves to an IP is the same thing as the IP itself. We've done experiments where we preserve the hostname instead of doing a lookup but it doesn't seem to change the behavior, so we suspect that ROSJava is doing the same thing we are under the hood but haven't looked it up.\n\nSo as an example, sometimes \"localhost\" and \"127.0.0.1\" don't get treated as the same thing and as such our ROS node (that is configured to use http://127.0.0.1:11311) can't always talk to a ROS Core started up on http://localhost:11311. I've also in the past seen totally clean Ubuntu 14.04 machines with a fresh ROS install use \"http://ubuntu:11311\" as their ROS_MASTER_URI when `roscore` is spun up.\n\nThis impacts at least one other real-world site, University of Edinburgh, where they cannot get our software to work correctly without setting ROS_IP: https://github.com/ihmcrobotics/ihmc-open-robotics-software/issues/43", "markup": "markdown", "html": "<p>@nkoenig @rmerriam It seems to be an intermittent bug that's heavily correlated with the network setup and local network configuration (e.g. contests of /etc/hosts), we have a hard time reproducing it reliably ourselves but it's a real issue. We don't know exactly what the nature of the bug is, the TL;DR version being that when a hostname-style URI is passed in to our stack, we always convert this to an IP address using DNS lookup to avoid any ambiguity, and for whatever reason sometimes ROSJava and native ROS don't always agree that a hostname that resolves to an IP is the same thing as the IP itself. We've done experiments where we preserve the hostname instead of doing a lookup but it doesn't seem to change the behavior, so we suspect that ROSJava is doing the same thing we are under the hood but haven't looked it up.</p>\n<p>So as an example, sometimes \"localhost\" and \"127.0.0.1\" don't get treated as the same thing and as such our ROS node (that is configured to use <a href=\"http://127.0.0.1:11311\" rel=\"nofollow\" class=\"ap-connect-link\">http://127.0.0.1:11311</a>) can't always talk to a ROS Core started up on <a href=\"http://localhost:11311\" rel=\"nofollow\" class=\"ap-connect-link\">http://localhost:11311</a>. I've also in the past seen totally clean Ubuntu 14.04 machines with a fresh ROS install use \"<a href=\"http://ubuntu:11311\" rel=\"nofollow\" class=\"ap-connect-link\">http://ubuntu:11311</a>\" as their ROS_MASTER_URI when <code>roscore</code> is spun up.</p>\n<p>This impacts at least one other real-world site, University of Edinburgh, where they cannot get our software to work correctly without setting ROS_IP: <a href=\"https://github.com/ihmcrobotics/ihmc-open-robotics-software/issues/43\" rel=\"nofollow\" class=\"ap-connect-link\">https://github.com/ihmcrobotics/ihmc-open-robotics-software/issues/43</a></p>", "type": "rendered"}, "created_on": "2016-11-28T19:55:29.225477+00:00", "user": {"display_name": "DouglasS", "uuid": "{ea29a6ad-0ab6-4e98-b04b-530214ed0d17}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bea29a6ad-0ab6-4e98-b04b-530214ed0d17%7D"}, "html": {"href": "https://bitbucket.org/%7Bea29a6ad-0ab6-4e98-b04b-530214ed0d17%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/0f7a49bbd50256a8d8fff1b2be570bdbd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsD-6.png"}}, "nickname": "DouglasS", "type": "user", "account_id": "557058:64e82c12-2ab2-4ace-b2f6-42a54c96704e"}, "updated_on": null, "type": "issue_comment", "id": 32502446}