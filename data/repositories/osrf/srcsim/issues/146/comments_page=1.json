{"pagelen": 100, "values": [{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/36360944.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-36360944"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": null, "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2017-04-27T17:32:01.205143+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 36360944}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/36360959.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-36360959"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Possible duplicate of #125", "markup": "markdown", "html": "<p>Possible duplicate of <a href=\"#!/osrf/srcsim/issues/125/bandwidth-limitations\" rel=\"nofollow\" title=\"Bandwidth Limitations\" class=\"ap-connect-link\">#125</a></p>", "type": "rendered"}, "created_on": "2017-04-27T17:32:48.558865+00:00", "user": {"display_name": "Louise Poubel", "uuid": "{5cfa2075-477b-4ded-bdb9-8d2479544ec4}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D"}, "html": {"href": "https://bitbucket.org/%7B5cfa2075-477b-4ded-bdb9-8d2479544ec4%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8/7d903d90-c5ea-4182-b7ef-0d467e9e1c74/128"}}, "nickname": "chapulina", "type": "user", "account_id": "557058:6ff86fcb-b7ab-44a5-b8a6-f6d9cae8b6e8"}, "updated_on": null, "type": "issue_comment", "id": 36360959}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/36362456.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-36362456"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "This issue is asking for specific data and, in that sense, is a subissue to #125.  However, this issue is now blocking for us, as we are unable to further develop tools without knowing the details of the bandwidth.  Since I did not create #125 I could not designate it as blocking.", "markup": "markdown", "html": "<p>This issue is asking for specific data and, in that sense, is a subissue to <a href=\"#!/osrf/srcsim/issues/125/bandwidth-limitations\" rel=\"nofollow\" title=\"Bandwidth Limitations\" class=\"ap-connect-link\">#125</a>.  However, this issue is now blocking for us, as we are unable to further develop tools without knowing the details of the bandwidth.  Since I did not create <a href=\"#!/osrf/srcsim/issues/125/bandwidth-limitations\" rel=\"nofollow\" title=\"Bandwidth Limitations\" class=\"ap-connect-link\">#125</a> I could not designate it as blocking.</p>", "type": "rendered"}, "created_on": "2017-04-27T18:53:48.183867+00:00", "user": {"display_name": "dan", "uuid": "{a93bd0ec-35fc-49a5-aa8a-b0b57403c2d0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba93bd0ec-35fc-49a5-aa8a-b0b57403c2d0%7D"}, "html": {"href": "https://bitbucket.org/%7Ba93bd0ec-35fc-49a5-aa8a-b0b57403c2d0%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dd56d3105d7602d83d5c35a320f6b36cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsD-6.png"}}, "nickname": "dan77062", "type": "user", "account_id": "557058:e0e36946-cb60-4776-8f47-2e9a0285ad35"}, "updated_on": null, "type": "issue_comment", "id": 36362456}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37323950.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37323950"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "What additional information do you need that is not in the tc script? The script currently contains all the parameters.", "markup": "markdown", "html": "<p>What additional information do you need that is not in the tc script? The script currently contains all the parameters.</p>", "type": "rendered"}, "created_on": "2017-06-01T21:55:53.555946+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 37323950}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37325382.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37325382"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Is there traffic shaping?  How is latency applied and can we get an example script to test with both latency and bandwidth restricted?", "markup": "markdown", "html": "<p>Is there traffic shaping?  How is latency applied and can we get an example script to test with both latency and bandwidth restricted?</p>", "type": "rendered"}, "created_on": "2017-06-02T00:54:53.977764+00:00", "user": {"display_name": "dan", "uuid": "{a93bd0ec-35fc-49a5-aa8a-b0b57403c2d0}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Ba93bd0ec-35fc-49a5-aa8a-b0b57403c2d0%7D"}, "html": {"href": "https://bitbucket.org/%7Ba93bd0ec-35fc-49a5-aa8a-b0b57403c2d0%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/dd56d3105d7602d83d5c35a320f6b36cd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsD-6.png"}}, "nickname": "dan77062", "type": "user", "account_id": "557058:e0e36946-cb60-4776-8f47-2e9a0285ad35"}, "updated_on": null, "type": "issue_comment", "id": 37325382}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37341707.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37341707"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "The [example tc script](#!/osrf/srcsim/raw/296baf70dbd5c48426c2fa088c5de2ccbdab68fe/scripts/src_tc.rb) has been updated with latency.", "markup": "markdown", "html": "<p>The <a data-is-external-link=\"true\" href=\"#!/osrf/srcsim/raw/296baf70dbd5c48426c2fa088c5de2ccbdab68fe/scripts/src_tc.rb\" rel=\"nofollow\">example tc script</a> has been updated with latency.</p>", "type": "rendered"}, "created_on": "2017-06-02T15:15:38.738368+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 37341707}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37346696.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37346696"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I used the example script in what seemed like the obvious way on a constellation in an attempt to experience the simulated latency and bandwidth restriction.  I captured my terminal output, on both sides.  I was unable to experience any latency or degredation in bandwidth.  If there is something obviously wrong with my command sequence, I'd appreciate the point.", "markup": "markdown", "html": "<p>I used the example script in what seemed like the obvious way on a constellation in an attempt to experience the simulated latency and bandwidth restriction.  I captured my terminal output, on both sides.  I was unable to experience any latency or degredation in bandwidth.  If there is something obviously wrong with my command sequence, I'd appreciate the point.</p>", "type": "rendered"}, "created_on": "2017-06-02T20:45:27.711725+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37346696}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37346709.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37346709"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "", "markup": "markdown", "html": "", "type": "rendered"}, "created_on": "2017-06-02T20:46:08.455223+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37346709}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37346737.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37346737"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Running the script against eth0 'worked', in that it shut off all traffic; not even a high latency, low bandwidth connection seemed possible.\n\npings from my oc to 192.168.2.150 remain low latency however, and I seem to be able to connect to the field computer instance.", "markup": "markdown", "html": "<p>Running the script against eth0 'worked', in that it shut off all traffic; not even a high latency, low bandwidth connection seemed possible.</p>\n<p>pings from my oc to 192.168.2.150 remain low latency however, and I seem to be able to connect to the field computer instance.</p>", "type": "rendered"}, "created_on": "2017-06-02T20:50:11.798740+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37346737}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37346939.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37346939"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Try changing the `-f` parameter to `-f 192.168.2.150/26`", "markup": "markdown", "html": "<p>Try changing the <code>-f</code> parameter to <code>-f 192.168.2.150/26</code></p>", "type": "rendered"}, "created_on": "2017-06-02T21:05:36.096303+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 37346939}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37349109.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37349109"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I had the same experience as @knitfoo.  Not even on the constellation, I tried the script on my local network (I have changed the IPs to match the competition machines) and didn't see any throttling. Is there something wrong with how I'm calling the script?\n\n```\n$ sudo ./src_tc.rb -i eth0 -d 64bit -u 50kbit -f 192.168.2.10/26 -l 10s\nRTNETLINK answers: File exists\n$ ping 192.168.2.150\nPING 192.168.2.150 (192.168.2.150) 56(84) bytes of data.\n64 bytes from 192.168.2.150: icmp_seq=1 ttl=64 time=0.538 ms\n64 bytes from 192.168.2.150: icmp_seq=2 ttl=64 time=0.461 ms\n64 bytes from 192.168.2.150: icmp_seq=3 ttl=64 time=0.516 ms\n```", "markup": "markdown", "html": "<p>I had the same experience as @knitfoo.  Not even on the constellation, I tried the script on my local network (I have changed the IPs to match the competition machines) and didn't see any throttling. Is there something wrong with how I'm calling the script?</p>\n<div class=\"codehilite\"><pre><span></span>$ sudo ./src_tc.rb -i eth0 -d 64bit -u 50kbit -f <span class=\"m\">192</span>.168.2.10/26 -l 10s\nRTNETLINK answers: File exists\n$ ping <span class=\"m\">192</span>.168.2.150\nPING <span class=\"m\">192</span>.168.2.150 <span class=\"o\">(</span><span class=\"m\">192</span>.168.2.150<span class=\"o\">)</span> <span class=\"m\">56</span><span class=\"o\">(</span><span class=\"m\">84</span><span class=\"o\">)</span> bytes of data.\n<span class=\"m\">64</span> bytes from <span class=\"m\">192</span>.168.2.150: <span class=\"nv\">icmp_seq</span><span class=\"o\">=</span><span class=\"m\">1</span> <span class=\"nv\">ttl</span><span class=\"o\">=</span><span class=\"m\">64</span> <span class=\"nv\">time</span><span class=\"o\">=</span><span class=\"m\">0</span>.538 ms\n<span class=\"m\">64</span> bytes from <span class=\"m\">192</span>.168.2.150: <span class=\"nv\">icmp_seq</span><span class=\"o\">=</span><span class=\"m\">2</span> <span class=\"nv\">ttl</span><span class=\"o\">=</span><span class=\"m\">64</span> <span class=\"nv\">time</span><span class=\"o\">=</span><span class=\"m\">0</span>.461 ms\n<span class=\"m\">64</span> bytes from <span class=\"m\">192</span>.168.2.150: <span class=\"nv\">icmp_seq</span><span class=\"o\">=</span><span class=\"m\">3</span> <span class=\"nv\">ttl</span><span class=\"o\">=</span><span class=\"m\">64</span> <span class=\"nv\">time</span><span class=\"o\">=</span><span class=\"m\">0</span>.516 ms\n</pre></div>", "type": "rendered"}, "created_on": "2017-06-03T03:30:24.560386+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37349109}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37383314.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37383314"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I made another pass at this today and did not get success.  I thought I'd share notes in the hopes it might help others.  First, I was being naive about my initial test; I was testing traffic between the fc and the ocu.  Instead, I should have been using the \n```\n#!bash\n\ndocker exec -it gazebo_run bash\n```\ncommand and testing from inside the docker image.  Nicely, netcat is installed there, so I can do testing with ping and netcat.\n\nOddly, today, once I invoked the src_tb.rb script, the vpn connection between the ocu and the docker image was broken, and nothing I tried would bring it back.  (In my experience with tc, deleting the qdev generally clears things, and I wasn't seeing that).  That is, I could netcat from inside the docker container to my ocu up until the point I first ran src_tb, and then never again after that.\n\nI did notice that the vpn conf file I downloaded actually has the ocu connecting to the sim, not the fc, which surprised me.  I would have thought the vpn would go directly to the fc.", "markup": "markdown", "html": "<p>I made another pass at this today and did not get success.  I thought I'd share notes in the hopes it might help others.  First, I was being naive about my initial test; I was testing traffic between the fc and the ocu.  Instead, I should have been using the </p>\n<div class=\"codehilite language-bash\"><pre><span></span>docker <span class=\"nb\">exec</span> -it gazebo_run bash\n</pre></div>\n\n\n<p>command and testing from inside the docker image.  Nicely, netcat is installed there, so I can do testing with ping and netcat.</p>\n<p>Oddly, today, once I invoked the src_tb.rb script, the vpn connection between the ocu and the docker image was broken, and nothing I tried would bring it back.  (In my experience with tc, deleting the qdev generally clears things, and I wasn't seeing that).  That is, I could netcat from inside the docker container to my ocu up until the point I first ran src_tb, and then never again after that.</p>\n<p>I did notice that the vpn conf file I downloaded actually has the ocu connecting to the sim, not the fc, which surprised me.  I would have thought the vpn would go directly to the fc.</p>", "type": "rendered"}, "created_on": "2017-06-05T17:35:09.593525+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37383314}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37384504.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37384504"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@knitfoo Does the new script work for you on a local network?  Whenever I try it, I only get the latency changes and no throttling.  The older version worked to throttle, though it seems it uses some sort of moving-average in limiting the bandwidth -- so maybe 5-6 ping commands would get through immediately before they ceasing when limited to 64bps.\n\n@nkoenig Is the new script what will be run during the competition?", "markup": "markdown", "html": "<p>@knitfoo Does the new script work for you on a local network?  Whenever I try it, I only get the latency changes and no throttling.  The older version worked to throttle, though it seems it uses some sort of moving-average in limiting the bandwidth -- so maybe 5-6 ping commands would get through immediately before they ceasing when limited to 64bps.</p>\n<p>@nkoenig Is the new script what will be run during the competition?</p>", "type": "rendered"}, "created_on": "2017-06-05T18:51:59.946884+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-05T18:52:33.398206+00:00", "type": "issue_comment", "id": 37384504}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37384909.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37384909"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I haven't tried it locally.  My (limited) experience with tc and traffic shaping leads me to feel that it's fiddly, and so having a local success won't prove anything.  I crave being able to exactly replicate what we will experience during the competition.\n\nI think I also haven't quite puzzled out what the network topology looks like; I'm used to a direct openvpn, and we seem to be going from ocu to sim and then on to the fc, and I haven't worked that out.  That's all code for me saying that I'm not even sure throttling tapi0 is the right approach :-/.", "markup": "markdown", "html": "<p>I haven't tried it locally.  My (limited) experience with tc and traffic shaping leads me to feel that it's fiddly, and so having a local success won't prove anything.  I crave being able to exactly replicate what we will experience during the competition.</p>\n<p>I think I also haven't quite puzzled out what the network topology looks like; I'm used to a direct openvpn, and we seem to be going from ocu to sim and then on to the fc, and I haven't worked that out.  That's all code for me saying that I'm not even sure throttling tapi0 is the right approach :-/.</p>", "type": "rendered"}, "created_on": "2017-06-05T19:25:42.243297+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37384909}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37387683.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37387683"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@stgray, can you try running tc with `-f 192.168.2.150/26`, not `-f 192.168.2.10/26`?\n\nThis example script will be run during the competition.\n\n@knitfoo, your connection is from the OCU to the field computer.", "markup": "markdown", "html": "<p>@stgray, can you try running tc with <code>-f 192.168.2.150/26</code>, not <code>-f 192.168.2.10/26</code>?</p>\n<p>This example script will be run during the competition.</p>\n<p>@knitfoo, your connection is from the OCU to the field computer.</p>", "type": "rendered"}, "created_on": "2017-06-05T23:11:20.503850+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 37387683}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37388848.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37388848"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@nkoenig I've tried the script again with the other IP as you suggested and now it just renders the connection inoperable.  I ran with generous bandwidth limits and almost no lag, using `sudo ./src_tc.rb -i eth0 -d 50mbit -u 50mbit -f 192.168.2.150/26 -l 10ms`.  I ran the script on 192.168.2.10 and was unable to ping 192.168.2.150.  I was also unable to receive UDP packets. \n\nWith the old script, I was able to clear the settings with:\n```\ntc qdisc del dev eth0 root\ntc qdisc del dev ifb0 root\n```\nbut this now no longer clears them.", "markup": "markdown", "html": "<p>@nkoenig I've tried the script again with the other IP as you suggested and now it just renders the connection inoperable.  I ran with generous bandwidth limits and almost no lag, using <code>sudo ./src_tc.rb -i eth0 -d 50mbit -u 50mbit -f 192.168.2.150/26 -l 10ms</code>.  I ran the script on 192.168.2.10 and was unable to ping 192.168.2.150.  I was also unable to receive UDP packets. </p>\n<p>With the old script, I was able to clear the settings with:</p>\n<div class=\"codehilite\"><pre><span></span>tc qdisc del dev eth0 root\ntc qdisc del dev ifb0 root\n</pre></div>\n\n\n<p>but this now no longer clears them.</p>", "type": "rendered"}, "created_on": "2017-06-06T01:44:30.321578+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-06-06T23:40:41.044654+00:00", "type": "issue_comment", "id": 37388848}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37405720.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37405720"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@iche033 Has the [example comms reduction script](#!/osrf/srcsim/raw/296baf70dbd5c48426c2fa088c5de2ccbdab68fe/scripts/src_tc.rb) been tested on the CloudSim setup?  Could you please post instructions for using it (ie, the right interface and IP to test it, and should it be running in the docker container?)  Every time I've tried it it prevents anything at all coming through, regardless of latency and bandwidth throttling settings.  I also haven't had any luck running it just on the connection between machines on my local network, as in the post above.  Thanks in advance.", "markup": "markdown", "html": "<p>@iche033 Has the <a data-is-external-link=\"true\" href=\"#!/osrf/srcsim/raw/296baf70dbd5c48426c2fa088c5de2ccbdab68fe/scripts/src_tc.rb\" rel=\"nofollow\">example comms reduction script</a> been tested on the CloudSim setup?  Could you please post instructions for using it (ie, the right interface and IP to test it, and should it be running in the docker container?)  Every time I've tried it it prevents anything at all coming through, regardless of latency and bandwidth throttling settings.  I also haven't had any luck running it just on the connection between machines on my local network, as in the post above.  Thanks in advance.</p>", "type": "rendered"}, "created_on": "2017-06-06T14:33:02.091346+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37405720}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37413789.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37413789"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@nkoenig  Copying the IP of the current running *simulator* gives 54.183.180.208.  My currently running FC is 54.183.207.48.\n\nAnd I've just downloaded openvpn config info and done:\n```\n#!shell\n\n[~/xfer/cloudsim] grep remote openvpn.conf \n#   'remote'                #\nremote 54.183.180.208 1196 # Server IP and port\n\n```\nAs you can see, the remote given in the vpn corresponds to the sim computer, *not* the field computer.  I appreciate that the final endpoint of the vpn is the FC, and it works, but I had not previously realized that the vpn went through the sim computer.\n\nThat is what I meant.", "markup": "markdown", "html": "<p>@nkoenig  Copying the IP of the current running <em>simulator</em> gives 54.183.180.208.  My currently running FC is 54.183.207.48.</p>\n<p>And I've just downloaded openvpn config info and done:</p>\n<div class=\"codehilite language-shell\"><pre><span></span><span class=\"o\">[</span>~/xfer/cloudsim<span class=\"o\">]</span> grep remote openvpn.conf \n<span class=\"c1\">#   &#39;remote&#39;                #</span>\nremote <span class=\"m\">54</span>.183.180.208 <span class=\"m\">1196</span> <span class=\"c1\"># Server IP and port</span>\n</pre></div>\n\n\n<p>As you can see, the remote given in the vpn corresponds to the sim computer, <em>not</em> the field computer.  I appreciate that the final endpoint of the vpn is the FC, and it works, but I had not previously realized that the vpn went through the sim computer.</p>\n<p>That is what I meant.</p>", "type": "rendered"}, "created_on": "2017-06-06T20:18:06.916432+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37413789}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37414637.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37414637"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Made another pass.  Was unable to achieve anything.  I tried running the script against the br0 and docker0 interfaces on the fc.  I couldn't run the script inside the docker container because of kernel issues.  I also tried running the script against the bridge interface on the sim.\n\nThis time, I never bricked anything, but I also never got a material change.  I may have imposed bandwidth limitations; I was only probing latency at the time, though (latency is easy to check; bandwidth a bit trickier).", "markup": "markdown", "html": "<p>Made another pass.  Was unable to achieve anything.  I tried running the script against the br0 and docker0 interfaces on the fc.  I couldn't run the script inside the docker container because of kernel issues.  I also tried running the script against the bridge interface on the sim.</p>\n<p>This time, I never bricked anything, but I also never got a material change.  I may have imposed bandwidth limitations; I was only probing latency at the time, though (latency is easy to check; bandwidth a bit trickier).</p>", "type": "rendered"}, "created_on": "2017-06-06T21:10:04.324364+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37414637}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37416831.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37416831"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@nkoenig I think @knitfoo and I have had a similar experience -- either the connection is not modified at all or it is completely blocked.  Any suggestions would be greatly appreciated.", "markup": "markdown", "html": "<p>@nkoenig I think @knitfoo and I have had a similar experience -- either the connection is not modified at all or it is completely blocked.  Any suggestions would be greatly appreciated.</p>", "type": "rendered"}, "created_on": "2017-06-06T23:42:48.636453+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37416831}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37417550.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37417550"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Can you try things piecemeal and with only your local computer first? For example, try to just set an outbound bandwidth limitation on your local machine, and test using something like [this](http://speedtest.googlefiber.net/). \n\nIf you can change successfully change settings on your local computer, then try between your local host and local docker container. You can using [iperf](https://www.linode.com/docs/networking/diagnostics/diagnosing-network-speed-with-iperf).\n\nOnce you have the confirmed, then move to cloudsim. You can ssh into the field computer, and try running the tc command directly.", "markup": "markdown", "html": "<p>Can you try things piecemeal and with only your local computer first? For example, try to just set an outbound bandwidth limitation on your local machine, and test using something like <a data-is-external-link=\"true\" href=\"http://speedtest.googlefiber.net/\" rel=\"nofollow\">this</a>. </p>\n<p>If you can change successfully change settings on your local computer, then try between your local host and local docker container. You can using <a data-is-external-link=\"true\" href=\"https://www.linode.com/docs/networking/diagnostics/diagnosing-network-speed-with-iperf\" rel=\"nofollow\">iperf</a>.</p>\n<p>Once you have the confirmed, then move to cloudsim. You can ssh into the field computer, and try running the tc command directly.</p>", "type": "rendered"}, "created_on": "2017-06-07T01:06:35.133226+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 37417550}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37417759.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37417759"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I've got two computers on the same local network.  For fun, I gave them the competition IPs, 192.168.2.10 and 192.168.2.150.  I restarted the one ending in 2.10 to clear any setting I had from messing with tc earlier. I ran the script and saw:\n```\nsudo ./src_tc.rb -i eth0 -d 50mbit -u 50mbit -f 192.168.2.150/26 -l 10ms\n[sudo] password for steve: \nRTNETLINK answers: No such file or directory\nCannot find device \"ifb0\"\n```\nOn 2.10, I also ran `iperf -s`.  On 2.150, I ran `iperf -c 192.168.2.10` and got `connect failed: Connection timed out`.  I also can't ping between machines anymore.\n\nThe craziest thing is that before I rebooted 2.10, I had tried the script and tested with iperf -- and it worked.  I had been messing with the older version of the script before that.  I'll see if I can reproduce.", "markup": "markdown", "html": "<p>I've got two computers on the same local network.  For fun, I gave them the competition IPs, 192.168.2.10 and 192.168.2.150.  I restarted the one ending in 2.10 to clear any setting I had from messing with tc earlier. I ran the script and saw:</p>\n<div class=\"codehilite\"><pre><span></span>sudo ./src_tc.rb -i eth0 -d 50mbit -u 50mbit -f 192.168.2.150/26 -l 10ms\n[sudo] password for steve: \nRTNETLINK answers: No such file or directory\nCannot find device &quot;ifb0&quot;\n</pre></div>\n\n\n<p>On 2.10, I also ran <code>iperf -s</code>.  On 2.150, I ran <code>iperf -c 192.168.2.10</code> and got <code>connect failed: Connection timed out</code>.  I also can't ping between machines anymore.</p>\n<p>The craziest thing is that before I rebooted 2.10, I had tried the script and tested with iperf -- and it worked.  I had been messing with the older version of the script before that.  I'll see if I can reproduce.</p>", "type": "rendered"}, "created_on": "2017-06-07T01:33:00.099678+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37417759}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37417855.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37417855"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I followed up by running a variant of the old script, which got things flowing again. I ran `sudo ./start_tc.rb -i eth0 -d 50kbit -u 50kbit -l 20ms` on the script below.  Afterwards, I ran the new example script again, and lo and behold, it worked.  I ran \n`sudo ./src_tc.rb -i eth0 -d 50mbit -u 50mbit -f 192.168.2.150/26 -l 15ms` and saw pings of 30ms between machines, and iperf showed a 50mbit connection.   There must be a critical setting in the old script still (or the variant I made).\n\nThe script is:\n```\n#!/usr/bin/env ruby\n\nrequire 'optparse'\n\n# The physical interface\niface = ARGV[0]\n\n# Downlink bandwidth limit\ndownlinkBandwidth = \"1mbit\"\n\n# Uplink bandwidth limit\nuplinkBandwidth = \"100mbit\"\n\n# Default options\noptions = {:iface => \"eth0\", :downlink => \"100mb\", :uplink => \"10mb\", :latency => \"100\"}\n\nOptionParser.new do |opts|\n  opts.banner = \"Usage: sudo ./src_tc.rb [options]\\n\\n\" +\n    \"A bandwidth value must have one of the following suffixes:\\n\" +\n    \"  b\\t\\tBytes\\n\" +\n    \"  kbit\\t\\tKilobits\\n\"+\n    \"  k, or kb\\tKilobytes\\n\"+\n    \"  mbit\\t\\tMegabits\\n\" +\n    \"  m, or mb\\tMegabits\\n\" +\n    \"  gbit\\t\\tGigabits\" +\n    \"  g, or gb\\t Gigabytes\\n\\n\" +\n    \"Example:\\n  sudo ./src_tc.rb -i eth0 -d 100mbit -u 10kb -l 100ms \\n\\n\" +\n    \"Options:\"\n\n  opts.on('-i', '--iface INTERFACE', \"Ethernet interface name. Default=#{options[:iface]}\") { |v|\n    options[:iface] = v\n  }\n\n  opts.on('-d', '--downlink BANDWIDTH', \"Downlink bandwidth. Default=#{options[:downlink]}\") { |v|\n    options[:downlink] = v\n  }\n\n  opts.on('-u', '--uplink BANDWIDTH', \"Uplink bandwidth. Default=#{options[:uplink]}\") { |v|\n    options[:uplink] = v\n  }\n  opts.on('-l', '--latency Delay', \"Round trip latency in ms. Default=#{options[:latency]}\") { |v|\n    options[:latency] = v\n  }\n\nend.parse!\n\n# Clear tc\n`tc qdisc del dev #{options[:iface]} root`\n`tc qdisc del dev ifb0 root`\n\n# Insert the ifb module so that we can redirect incoming (ingress) traffic\n# to a virtual interface. This will allow us to apply a bandwidth limit to\n# incoming traffic. Bandwidth limits can only be applied to send queues.\n# This is why we must redirect incoming traffic to a virtual interface, and\n# then limit the virtual interface's outbound queue.\n`modprobe ifb numifbs=1`\n\n# Create the virtual interface\n`ip link set dev ifb0 up`\n# Redirect ingress traffic from the physical interface to the virtual\n# interface.\n`tc qdisc add dev #{options[:iface]} root netem delay #{options[:latency]}`\n`tc qdisc add dev #{options[:iface]} handle ffff: ingress`\n`tc filter add dev #{options[:iface]} parent ffff: protocol ip u32 match u32 0 0 action mirred egress redirect dev ifb0`\n\n# Apply egress (uplink) rules for the physical interface\n`tc qdisc add dev #{options[:iface]} root handle 1: htb default 10`\n`tc class add dev #{options[:iface]} parent 1: classid 1:1 htb rate #{options[:uplink]}`\n`tc class add dev #{options[:iface]} parent 1:1 classid 1:10 htb rate #{options[:uplink]}`\n\n# Apply ingress (downlink) rules for the physical interface\n# via egress rules for the virtual interface.\n`tc qdisc add dev ifb0 root handle 1: htb default 10`\n`tc class add dev ifb0 parent 1: classid 1:1 htb rate #{options[:downlink]}`\n`tc class add dev ifb0 parent 1:1 classid 1:10 htb rate #{options[:downlink]}`\n\n```", "markup": "markdown", "html": "<p>I followed up by running a variant of the old script, which got things flowing again. I ran <code>sudo ./start_tc.rb -i eth0 -d 50kbit -u 50kbit -l 20ms</code> on the script below.  Afterwards, I ran the new example script again, and lo and behold, it worked.  I ran \n<code>sudo ./src_tc.rb -i eth0 -d 50mbit -u 50mbit -f 192.168.2.150/26 -l 15ms</code> and saw pings of 30ms between machines, and iperf showed a 50mbit connection.   There must be a critical setting in the old script still (or the variant I made).</p>\n<p>The script is:</p>\n<div class=\"codehilite language-ruby\"><pre><span></span><span class=\"ch\">#!/usr/bin/env ruby</span>\n\n<span class=\"nb\">require</span> <span class=\"s1\">&#39;optparse&#39;</span>\n\n<span class=\"c1\"># The physical interface</span>\n<span class=\"n\">iface</span> <span class=\"o\">=</span> <span class=\"no\">ARGV</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n\n<span class=\"c1\"># Downlink bandwidth limit</span>\n<span class=\"n\">downlinkBandwidth</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;1mbit&quot;</span>\n\n<span class=\"c1\"># Uplink bandwidth limit</span>\n<span class=\"n\">uplinkBandwidth</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;100mbit&quot;</span>\n\n<span class=\"c1\"># Default options</span>\n<span class=\"n\">options</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"ss\">:iface</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">&quot;eth0&quot;</span><span class=\"p\">,</span> <span class=\"ss\">:downlink</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">&quot;100mb&quot;</span><span class=\"p\">,</span> <span class=\"ss\">:uplink</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">&quot;10mb&quot;</span><span class=\"p\">,</span> <span class=\"ss\">:latency</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">&quot;100&quot;</span><span class=\"p\">}</span>\n\n<span class=\"no\">OptionParser</span><span class=\"o\">.</span><span class=\"n\">new</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">opts</span><span class=\"o\">|</span>\n  <span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">banner</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;Usage: sudo ./src_tc.rb [options]</span><span class=\"se\">\\n\\n</span><span class=\"s2\">&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;A bandwidth value must have one of the following suffixes:</span><span class=\"se\">\\n</span><span class=\"s2\">&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;  b</span><span class=\"se\">\\t\\t</span><span class=\"s2\">Bytes</span><span class=\"se\">\\n</span><span class=\"s2\">&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;  kbit</span><span class=\"se\">\\t\\t</span><span class=\"s2\">Kilobits</span><span class=\"se\">\\n</span><span class=\"s2\">&quot;</span><span class=\"o\">+</span>\n    <span class=\"s2\">&quot;  k, or kb</span><span class=\"se\">\\t</span><span class=\"s2\">Kilobytes</span><span class=\"se\">\\n</span><span class=\"s2\">&quot;</span><span class=\"o\">+</span>\n    <span class=\"s2\">&quot;  mbit</span><span class=\"se\">\\t\\t</span><span class=\"s2\">Megabits</span><span class=\"se\">\\n</span><span class=\"s2\">&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;  m, or mb</span><span class=\"se\">\\t</span><span class=\"s2\">Megabits</span><span class=\"se\">\\n</span><span class=\"s2\">&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;  gbit</span><span class=\"se\">\\t\\t</span><span class=\"s2\">Gigabits&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;  g, or gb</span><span class=\"se\">\\t</span><span class=\"s2\"> Gigabytes</span><span class=\"se\">\\n\\n</span><span class=\"s2\">&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;Example:</span><span class=\"se\">\\n</span><span class=\"s2\">  sudo ./src_tc.rb -i eth0 -d 100mbit -u 10kb -l 100ms </span><span class=\"se\">\\n\\n</span><span class=\"s2\">&quot;</span> <span class=\"o\">+</span>\n    <span class=\"s2\">&quot;Options:&quot;</span>\n\n  <span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">on</span><span class=\"p\">(</span><span class=\"s1\">&#39;-i&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;--iface INTERFACE&#39;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Ethernet interface name. Default=</span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"o\">|</span><span class=\"n\">v</span><span class=\"o\">|</span>\n    <span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span> <span class=\"o\">=</span> <span class=\"n\">v</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">on</span><span class=\"p\">(</span><span class=\"s1\">&#39;-d&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;--downlink BANDWIDTH&#39;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Downlink bandwidth. Default=</span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:downlink</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"o\">|</span><span class=\"n\">v</span><span class=\"o\">|</span>\n    <span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:downlink</span><span class=\"o\">]</span> <span class=\"o\">=</span> <span class=\"n\">v</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">on</span><span class=\"p\">(</span><span class=\"s1\">&#39;-u&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;--uplink BANDWIDTH&#39;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Uplink bandwidth. Default=</span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:uplink</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"o\">|</span><span class=\"n\">v</span><span class=\"o\">|</span>\n    <span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:uplink</span><span class=\"o\">]</span> <span class=\"o\">=</span> <span class=\"n\">v</span>\n  <span class=\"p\">}</span>\n  <span class=\"n\">opts</span><span class=\"o\">.</span><span class=\"n\">on</span><span class=\"p\">(</span><span class=\"s1\">&#39;-l&#39;</span><span class=\"p\">,</span> <span class=\"s1\">&#39;--latency Delay&#39;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Round trip latency in ms. Default=</span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:latency</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span> <span class=\"p\">{</span> <span class=\"o\">|</span><span class=\"n\">v</span><span class=\"o\">|</span>\n    <span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:latency</span><span class=\"o\">]</span> <span class=\"o\">=</span> <span class=\"n\">v</span>\n  <span class=\"p\">}</span>\n\n<span class=\"k\">end</span><span class=\"o\">.</span><span class=\"n\">parse!</span>\n\n<span class=\"c1\"># Clear tc</span>\n<span class=\"sb\">`tc qdisc del dev </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\"> root`</span>\n<span class=\"sb\">`tc qdisc del dev ifb0 root`</span>\n\n<span class=\"c1\"># Insert the ifb module so that we can redirect incoming (ingress) traffic</span>\n<span class=\"c1\"># to a virtual interface. This will allow us to apply a bandwidth limit to</span>\n<span class=\"c1\"># incoming traffic. Bandwidth limits can only be applied to send queues.</span>\n<span class=\"c1\"># This is why we must redirect incoming traffic to a virtual interface, and</span>\n<span class=\"c1\"># then limit the virtual interface&#39;s outbound queue.</span>\n<span class=\"sb\">`modprobe ifb numifbs=1`</span>\n\n<span class=\"c1\"># Create the virtual interface</span>\n<span class=\"sb\">`ip link set dev ifb0 up`</span>\n<span class=\"c1\"># Redirect ingress traffic from the physical interface to the virtual</span>\n<span class=\"c1\"># interface.</span>\n<span class=\"sb\">`tc qdisc add dev </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\"> root netem delay </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:latency</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\">`</span>\n<span class=\"sb\">`tc qdisc add dev </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\"> handle ffff: ingress`</span>\n<span class=\"sb\">`tc filter add dev </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\"> parent ffff: protocol ip u32 match u32 0 0 action mirred egress redirect dev ifb0`</span>\n\n<span class=\"c1\"># Apply egress (uplink) rules for the physical interface</span>\n<span class=\"sb\">`tc qdisc add dev </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\"> root handle 1: htb default 10`</span>\n<span class=\"sb\">`tc class add dev </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\"> parent 1: classid 1:1 htb rate </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:uplink</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\">`</span>\n<span class=\"sb\">`tc class add dev </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:iface</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\"> parent 1:1 classid 1:10 htb rate </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:uplink</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\">`</span>\n\n<span class=\"c1\"># Apply ingress (downlink) rules for the physical interface</span>\n<span class=\"c1\"># via egress rules for the virtual interface.</span>\n<span class=\"sb\">`tc qdisc add dev ifb0 root handle 1: htb default 10`</span>\n<span class=\"sb\">`tc class add dev ifb0 parent 1: classid 1:1 htb rate </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:downlink</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\">`</span>\n<span class=\"sb\">`tc class add dev ifb0 parent 1:1 classid 1:10 htb rate </span><span class=\"si\">#{</span><span class=\"n\">options</span><span class=\"o\">[</span><span class=\"ss\">:downlink</span><span class=\"o\">]</span><span class=\"si\">}</span><span class=\"sb\">`</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-06-07T01:45:43.290509+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37417855}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37418876.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37418876"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "just catching up on the discussion, here's the [pull request](https://bitbucket.org/osrf/cloudsim-sim/pull-requests/61/add-latency-to-traffic-shapper/diff) containing a TC script that'll be run on the FC. Note that there have been some updates to the script today, so try testing [this version](https://bitbucket.org/osrf/cloudsim-sim/src/e0d8aaeb459210a6db56a69a870ba1bc65fc2377/src_commands/src_tc.rb?fileviewer=file-view-default). \n\nI just tested it on cloudsim FC computer with the same command you guys are already using:\n\n~~~\nsudo ./src_tc.rb -i tap0 -u 2mbit -d 380kbit -f 192.168.2.150/26 -l 250ms\n~~~\n\nThe 250ms latency is applied to inbound and outbound traffic, resulting in a ping time of 500ms. If you set a large value (like 10 or 20 seconds), you'll get a connection timed out with iperf, and ping will drop packets for the amount of time you set but should work after the initial delay period.\n\nthe uplink here is the outbound traffic: FC -> OCU, and downlink is inbound: OCU -> FC\n\nNote I find that sometimes if I've been experimenting with various rules using TC, some are left behind and were not cleaned up with just the command: `tc qdisc del dev tap0 root`", "markup": "markdown", "html": "<p>just catching up on the discussion, here's the <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/cloudsim-sim/pull-requests/61/add-latency-to-traffic-shapper/diff\" rel=\"nofollow\">pull request</a> containing a TC script that'll be run on the FC. Note that there have been some updates to the script today, so try testing <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/cloudsim-sim/src/e0d8aaeb459210a6db56a69a870ba1bc65fc2377/src_commands/src_tc.rb?fileviewer=file-view-default\" rel=\"nofollow\">this version</a>. </p>\n<p>I just tested it on cloudsim FC computer with the same command you guys are already using:</p>\n<div class=\"codehilite\"><pre><span></span>sudo ./src_tc.rb -i tap0 -u 2mbit -d 380kbit -f 192.168.2.150/26 -l 250ms\n</pre></div>\n\n\n<p>The 250ms latency is applied to inbound and outbound traffic, resulting in a ping time of 500ms. If you set a large value (like 10 or 20 seconds), you'll get a connection timed out with iperf, and ping will drop packets for the amount of time you set but should work after the initial delay period.</p>\n<p>the uplink here is the outbound traffic: FC -&gt; OCU, and downlink is inbound: OCU -&gt; FC</p>\n<p>Note I find that sometimes if I've been experimenting with various rules using TC, some are left behind and were not cleaned up with just the command: <code>tc qdisc del dev tap0 root</code></p>", "type": "rendered"}, "created_on": "2017-06-07T03:07:10.721897+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": null, "type": "issue_comment", "id": 37418876}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37419197.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37419197"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Also note, FC host IP address has recently changed to 192.168.2.8 **but** the FC docker container IP address remains at **192.168.2.10**. Your code will be run inside the container with 192.168.2.10 but in case you're doing iperf test from the FC host machine, use the 192.168.2.8 address.", "markup": "markdown", "html": "<p>Also note, FC host IP address has recently changed to 192.168.2.8 <strong>but</strong> the FC docker container IP address remains at <strong>192.168.2.10</strong>. Your code will be run inside the container with 192.168.2.10 but in case you're doing iperf test from the FC host machine, use the 192.168.2.8 address.</p>", "type": "rendered"}, "created_on": "2017-06-07T03:37:24.245476+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": null, "type": "issue_comment", "id": 37419197}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37419408.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37419408"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Thanks @iche033!  That new script worked great for me.  Looks like all my local traffic is being adjusted correctly.  I'll try it on CloudSim tomorrow.", "markup": "markdown", "html": "<p>Thanks @iche033!  That new script worked great for me.  Looks like all my local traffic is being adjusted correctly.  I'll try it on CloudSim tomorrow.</p>", "type": "rendered"}, "created_on": "2017-06-07T04:01:30.507030+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37419408}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37421501.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37421501"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Actually keep monitoring the pull request for the latest version of the script. It's actively being tested and reviewed so there're (but hopefully no more) minor tweaks to it.", "markup": "markdown", "html": "<p>Actually keep monitoring the pull request for the latest version of the script. It's actively being tested and reviewed so there're (but hopefully no more) minor tweaks to it.</p>", "type": "rendered"}, "created_on": "2017-06-07T06:27:59.000835+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": null, "type": "issue_comment", "id": 37421501}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37426313.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37426313"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I am trying to execute the latest version of the script on the merge request on the Field computer, it fails, here's the log:\n\n```\n#!bash\n\n sudo ./src_tc.rb -i tap0 -l 5000ms\nRTNETLINK answers: No such file or directory\nCannot find device \"ifb0\"\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nRTNETLINK answers: No such file or directory\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nRTNETLINK answers: No such file or directory\n\n```\n\n\nI also tried to download it and execute it inside the running team container:\n\n```\n\nubuntu@ip-172-31-13-121:~$ docker exec team_container bash -c \"wget https://bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb && chmod +x src_tc.rb && ./src_tc.rb  -i eth0 -l 5000ms\"\n--2017-06-07 09:25:55--  https://bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb\nResolving bitbucket.org (bitbucket.org)... 104.192.143.1, 104.192.143.2, 104.192.143.3, ...\nConnecting to bitbucket.org (bitbucket.org)|104.192.143.1|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 3212 (3.1K) [text/plain]\nSaving to: \u2018src_tc.rb.1\u2019\n\n     0K ...                                                   100%  454M=0s\n\n2017-06-07 09:25:55 (454 MB/s) - \u2018src_tc.rb.1\u2019 saved [3212/3212]\n\nRTNETLINK answers: Operation not permitted\nCannot find device \"ifb0\"\nmodprobe: ERROR: ../libkmod/libkmod.c:556 kmod_search_moddep() could not open moddep file '/lib/modules/4.4.0-78-generic/modules.dep.bin'\nCannot find device \"ifb0\"\nRTNETLINK answers: Operation not permitted\nCannot find device \"ifb0\"\nbad action parsing\nparse_action: bad value (5:mirred)!\nIllegal \"action\"\nRTNETLINK answers: Operation not permitted\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nRTNETLINK answers: Operation not permitted\nWe have an error talking to the kernel\nRTNETLINK answers: Operation not permitted\nCannot find device \"ifb0\"\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nCannot find device \"ifb0\"\nCannot find device \"ifb0\"\n\n```", "markup": "markdown", "html": "<p>I am trying to execute the latest version of the script on the merge request on the Field computer, it fails, here's the log:</p>\n<div class=\"codehilite language-bash\"><pre><span></span> sudo ./src_tc.rb -i tap0 -l 5000ms\nRTNETLINK answers: No such file or directory\nCannot find device <span class=\"s2\">&quot;ifb0&quot;</span>\nIllegal <span class=\"s2\">&quot;rate&quot;</span>\nUsage: ... qdisc add ... htb <span class=\"o\">[</span>default N<span class=\"o\">]</span> <span class=\"o\">[</span>r2q N<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>direct_qlen P<span class=\"o\">]</span>\n default  minor id of class to which unclassified packets are sent <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n r2q      DRR quantums are computed as rate in Bps/r2q <span class=\"o\">{</span><span class=\"m\">10</span><span class=\"o\">}</span>\n debug    string of <span class=\"m\">16</span> numbers each <span class=\"m\">0</span>-3 <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n\n direct_qlen  Limit of the direct queue <span class=\"o\">{</span>in packets<span class=\"o\">}</span>\n... class add ... htb rate R1 <span class=\"o\">[</span>burst B1<span class=\"o\">]</span> <span class=\"o\">[</span>mpu B<span class=\"o\">]</span> <span class=\"o\">[</span>overhead O<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>prio P<span class=\"o\">]</span> <span class=\"o\">[</span>slot S<span class=\"o\">]</span> <span class=\"o\">[</span>pslot PS<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>ceil R2<span class=\"o\">]</span> <span class=\"o\">[</span>cburst B2<span class=\"o\">]</span> <span class=\"o\">[</span>mtu MTU<span class=\"o\">]</span> <span class=\"o\">[</span>quantum Q<span class=\"o\">]</span>\n rate     rate allocated to this class <span class=\"o\">(</span>class can still borrow<span class=\"o\">)</span>\n burst    max bytes burst which can be accumulated during idle period <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate <span class=\"o\">(</span>no borrows<span class=\"o\">)</span> <span class=\"o\">{</span>rate<span class=\"o\">}</span>\n cburst   burst but <span class=\"k\">for</span> ceil <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mtu      max packet size we create rate map <span class=\"k\">for</span> <span class=\"o\">{</span><span class=\"m\">1600</span><span class=\"o\">}</span>\n prio     priority of leaf<span class=\"p\">;</span> lower are served first <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n quantum  how much bytes to serve from leaf at once <span class=\"o\">{</span>use r2q<span class=\"o\">}</span>\n\nTC HTB version <span class=\"m\">3</span>.3\nRTNETLINK answers: No such file or directory\nIllegal <span class=\"s2\">&quot;rate&quot;</span>\nUsage: ... qdisc add ... htb <span class=\"o\">[</span>default N<span class=\"o\">]</span> <span class=\"o\">[</span>r2q N<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>direct_qlen P<span class=\"o\">]</span>\n default  minor id of class to which unclassified packets are sent <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n r2q      DRR quantums are computed as rate in Bps/r2q <span class=\"o\">{</span><span class=\"m\">10</span><span class=\"o\">}</span>\n debug    string of <span class=\"m\">16</span> numbers each <span class=\"m\">0</span>-3 <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n\n direct_qlen  Limit of the direct queue <span class=\"o\">{</span>in packets<span class=\"o\">}</span>\n... class add ... htb rate R1 <span class=\"o\">[</span>burst B1<span class=\"o\">]</span> <span class=\"o\">[</span>mpu B<span class=\"o\">]</span> <span class=\"o\">[</span>overhead O<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>prio P<span class=\"o\">]</span> <span class=\"o\">[</span>slot S<span class=\"o\">]</span> <span class=\"o\">[</span>pslot PS<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>ceil R2<span class=\"o\">]</span> <span class=\"o\">[</span>cburst B2<span class=\"o\">]</span> <span class=\"o\">[</span>mtu MTU<span class=\"o\">]</span> <span class=\"o\">[</span>quantum Q<span class=\"o\">]</span>\n rate     rate allocated to this class <span class=\"o\">(</span>class can still borrow<span class=\"o\">)</span>\n burst    max bytes burst which can be accumulated during idle period <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate <span class=\"o\">(</span>no borrows<span class=\"o\">)</span> <span class=\"o\">{</span>rate<span class=\"o\">}</span>\n cburst   burst but <span class=\"k\">for</span> ceil <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mtu      max packet size we create rate map <span class=\"k\">for</span> <span class=\"o\">{</span><span class=\"m\">1600</span><span class=\"o\">}</span>\n prio     priority of leaf<span class=\"p\">;</span> lower are served first <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n quantum  how much bytes to serve from leaf at once <span class=\"o\">{</span>use r2q<span class=\"o\">}</span>\n\nTC HTB version <span class=\"m\">3</span>.3\nRTNETLINK answers: No such file or directory\n</pre></div>\n\n\n<p>I also tried to download it and execute it inside the running team container:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">ubuntu</span><span class=\"p\">@</span><span class=\"n\">ip</span><span class=\"o\">-</span><span class=\"mi\">172</span><span class=\"o\">-</span><span class=\"mi\">31</span><span class=\"o\">-</span><span class=\"mi\">13</span><span class=\"o\">-</span><span class=\"mi\">121</span><span class=\"o\">:~</span><span class=\"err\">$</span> <span class=\"n\">docker</span> <span class=\"n\">exec</span> <span class=\"n\">team_container</span> <span class=\"n\">bash</span> <span class=\"o\">-</span><span class=\"n\">c</span> <span class=\"s\">&quot;wget https://bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb &amp;&amp; chmod +x src_tc.rb &amp;&amp; ./src_tc.rb  -i eth0 -l 5000ms&quot;</span>\n<span class=\"o\">--</span><span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mo\">06</span><span class=\"o\">-</span><span class=\"mo\">07</span> <span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">25</span><span class=\"o\">:</span><span class=\"mi\">55</span><span class=\"o\">--</span>  <span class=\"nl\">https</span><span class=\"p\">:</span><span class=\"c1\">//bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb</span>\n<span class=\"n\">Resolving</span> <span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span> <span class=\"p\">(</span><span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span><span class=\"p\">)...</span> <span class=\"mf\">104.192.143.1</span><span class=\"p\">,</span> <span class=\"mf\">104.192.143.2</span><span class=\"p\">,</span> <span class=\"mf\">104.192.143.3</span><span class=\"p\">,</span> <span class=\"p\">...</span>\n<span class=\"n\">Connecting</span> <span class=\"n\">to</span> <span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span> <span class=\"p\">(</span><span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span><span class=\"p\">)</span><span class=\"o\">|</span><span class=\"mf\">104.192.143.1</span><span class=\"o\">|:</span><span class=\"mf\">443.</span><span class=\"p\">..</span> <span class=\"n\">connected</span><span class=\"p\">.</span>\n<span class=\"n\">HTTP</span> <span class=\"n\">request</span> <span class=\"n\">sent</span><span class=\"p\">,</span> <span class=\"n\">awaiting</span> <span class=\"n\">response</span><span class=\"p\">...</span> <span class=\"mi\">200</span> <span class=\"n\">OK</span>\n<span class=\"nl\">Length</span><span class=\"p\">:</span> <span class=\"mi\">3212</span> <span class=\"p\">(</span><span class=\"mf\">3.1</span><span class=\"n\">K</span><span class=\"p\">)</span> <span class=\"p\">[</span><span class=\"n\">text</span><span class=\"o\">/</span><span class=\"n\">plain</span><span class=\"p\">]</span>\n<span class=\"n\">Saving</span> <span class=\"nl\">to</span><span class=\"p\">:</span> <span class=\"err\">\u2018</span><span class=\"n\">src_tc</span><span class=\"p\">.</span><span class=\"n\">rb</span><span class=\"mf\">.1</span><span class=\"err\">\u2019</span>\n\n     <span class=\"mi\">0</span><span class=\"n\">K</span> <span class=\"p\">...</span>                                                   <span class=\"mi\">100</span><span class=\"o\">%</span>  <span class=\"mi\">454</span><span class=\"n\">M</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"n\">s</span>\n\n<span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mo\">06</span><span class=\"o\">-</span><span class=\"mo\">07</span> <span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">25</span><span class=\"o\">:</span><span class=\"mi\">55</span> <span class=\"p\">(</span><span class=\"mi\">454</span> <span class=\"n\">MB</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"err\">\u2018</span><span class=\"n\">src_tc</span><span class=\"p\">.</span><span class=\"n\">rb</span><span class=\"mf\">.1</span><span class=\"err\">\u2019</span> <span class=\"n\">saved</span> <span class=\"p\">[</span><span class=\"mi\">3212</span><span class=\"o\">/</span><span class=\"mi\">3212</span><span class=\"p\">]</span>\n\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"nl\">modprobe</span><span class=\"p\">:</span> <span class=\"nl\">ERROR</span><span class=\"p\">:</span> <span class=\"p\">..</span><span class=\"o\">/</span><span class=\"n\">libkmod</span><span class=\"o\">/</span><span class=\"n\">libkmod</span><span class=\"p\">.</span><span class=\"nl\">c</span><span class=\"p\">:</span><span class=\"mi\">556</span> <span class=\"n\">kmod_search_moddep</span><span class=\"p\">()</span> <span class=\"n\">could</span> <span class=\"n\">not</span> <span class=\"n\">open</span> <span class=\"n\">moddep</span> <span class=\"n\">file</span> <span class=\"err\">&#39;</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">modules</span><span class=\"o\">/</span><span class=\"mf\">4.4.0</span><span class=\"o\">-</span><span class=\"mi\">78</span><span class=\"o\">-</span><span class=\"n\">generic</span><span class=\"o\">/</span><span class=\"n\">modules</span><span class=\"p\">.</span><span class=\"n\">dep</span><span class=\"p\">.</span><span class=\"n\">bin</span><span class=\"err\">&#39;</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">bad</span> <span class=\"n\">action</span> <span class=\"n\">parsing</span>\n<span class=\"nl\">parse_action</span><span class=\"p\">:</span> <span class=\"n\">bad</span> <span class=\"n\">value</span> <span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"o\">:</span><span class=\"n\">mirred</span><span class=\"p\">)</span><span class=\"o\">!</span>\n<span class=\"n\">Illegal</span> <span class=\"s\">&quot;action&quot;</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Illegal</span> <span class=\"s\">&quot;rate&quot;</span>\n<span class=\"nl\">Usage</span><span class=\"p\">:</span> <span class=\"p\">...</span> <span class=\"n\">qdisc</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"p\">[</span><span class=\"k\">default</span> <span class=\"n\">N</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">r2q</span> <span class=\"n\">N</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">direct_qlen</span> <span class=\"n\">P</span><span class=\"p\">]</span>\n <span class=\"k\">default</span>  <span class=\"n\">minor</span> <span class=\"kt\">id</span> <span class=\"n\">of</span> <span class=\"k\">class</span> <span class=\"n\">to</span> <span class=\"n\">which</span> <span class=\"n\">unclassified</span> <span class=\"n\">packets</span> <span class=\"n\">are</span> <span class=\"n\">sent</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">r2q</span>      <span class=\"n\">DRR</span> <span class=\"n\">quantums</span> <span class=\"n\">are</span> <span class=\"n\">computed</span> <span class=\"n\">as</span> <span class=\"n\">rate</span> <span class=\"k\">in</span> <span class=\"n\">Bps</span><span class=\"o\">/</span><span class=\"n\">r2q</span> <span class=\"p\">{</span><span class=\"mi\">10</span><span class=\"p\">}</span>\n <span class=\"n\">debug</span>    <span class=\"n\">string</span> <span class=\"n\">of</span> <span class=\"mi\">16</span> <span class=\"n\">numbers</span> <span class=\"n\">each</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">3</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n\n <span class=\"n\">direct_qlen</span>  <span class=\"n\">Limit</span> <span class=\"n\">of</span> <span class=\"n\">the</span> <span class=\"n\">direct</span> <span class=\"n\">queue</span> <span class=\"p\">{</span><span class=\"k\">in</span> <span class=\"n\">packets</span><span class=\"p\">}</span>\n<span class=\"p\">...</span> <span class=\"k\">class</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"n\">rate</span> <span class=\"n\">R1</span> <span class=\"p\">[</span><span class=\"n\">burst</span> <span class=\"n\">B1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mpu</span> <span class=\"n\">B</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">overhead</span> <span class=\"n\">O</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">prio</span> <span class=\"n\">P</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">slot</span> <span class=\"n\">S</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">pslot</span> <span class=\"n\">PS</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">ceil</span> <span class=\"n\">R2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">cburst</span> <span class=\"n\">B2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mtu</span> <span class=\"n\">MTU</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">quantum</span> <span class=\"n\">Q</span><span class=\"p\">]</span>\n <span class=\"n\">rate</span>     <span class=\"n\">rate</span> <span class=\"n\">allocated</span> <span class=\"n\">to</span> <span class=\"n\">this</span> <span class=\"k\">class</span> <span class=\"p\">(</span><span class=\"k\">class</span> <span class=\"n\">can</span> <span class=\"n\">still</span> <span class=\"n\">borrow</span><span class=\"p\">)</span>\n <span class=\"n\">burst</span>    <span class=\"n\">max</span> <span class=\"n\">bytes</span> <span class=\"n\">burst</span> <span class=\"n\">which</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">accumulated</span> <span class=\"n\">during</span> <span class=\"n\">idle</span> <span class=\"n\">period</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mpu</span>      <span class=\"n\">minimum</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">overhead</span> <span class=\"n\">per</span><span class=\"o\">-</span><span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">overhead</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">linklay</span>  <span class=\"n\">adapting</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">linklayer</span> <span class=\"n\">e</span><span class=\"p\">.</span><span class=\"n\">g</span><span class=\"p\">.</span> <span class=\"n\">atm</span>\n <span class=\"n\">ceil</span>     <span class=\"n\">definite</span> <span class=\"n\">upper</span> <span class=\"k\">class</span> <span class=\"n\">rate</span> <span class=\"p\">(</span><span class=\"n\">no</span> <span class=\"n\">borrows</span><span class=\"p\">)</span> <span class=\"p\">{</span><span class=\"n\">rate</span><span class=\"p\">}</span>\n <span class=\"n\">cburst</span>   <span class=\"n\">burst</span> <span class=\"n\">but</span> <span class=\"k\">for</span> <span class=\"n\">ceil</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mtu</span>      <span class=\"n\">max</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">we</span> <span class=\"n\">create</span> <span class=\"n\">rate</span> <span class=\"n\">map</span> <span class=\"k\">for</span> <span class=\"p\">{</span><span class=\"mi\">1600</span><span class=\"p\">}</span>\n <span class=\"n\">prio</span>     <span class=\"n\">priority</span> <span class=\"n\">of</span> <span class=\"n\">leaf</span><span class=\"p\">;</span> <span class=\"n\">lower</span> <span class=\"n\">are</span> <span class=\"n\">served</span> <span class=\"n\">first</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">quantum</span>  <span class=\"n\">how</span> <span class=\"n\">much</span> <span class=\"n\">bytes</span> <span class=\"n\">to</span> <span class=\"n\">serve</span> <span class=\"n\">from</span> <span class=\"n\">leaf</span> <span class=\"n\">at</span> <span class=\"n\">once</span> <span class=\"p\">{</span><span class=\"n\">use</span> <span class=\"n\">r2q</span><span class=\"p\">}</span>\n\n<span class=\"n\">TC</span> <span class=\"n\">HTB</span> <span class=\"n\">version</span> <span class=\"mf\">3.3</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">We</span> <span class=\"n\">have</span> <span class=\"n\">an</span> <span class=\"n\">error</span> <span class=\"n\">talking</span> <span class=\"n\">to</span> <span class=\"n\">the</span> <span class=\"n\">kernel</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">Illegal</span> <span class=\"s\">&quot;rate&quot;</span>\n<span class=\"nl\">Usage</span><span class=\"p\">:</span> <span class=\"p\">...</span> <span class=\"n\">qdisc</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"p\">[</span><span class=\"k\">default</span> <span class=\"n\">N</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">r2q</span> <span class=\"n\">N</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">direct_qlen</span> <span class=\"n\">P</span><span class=\"p\">]</span>\n <span class=\"k\">default</span>  <span class=\"n\">minor</span> <span class=\"kt\">id</span> <span class=\"n\">of</span> <span class=\"k\">class</span> <span class=\"n\">to</span> <span class=\"n\">which</span> <span class=\"n\">unclassified</span> <span class=\"n\">packets</span> <span class=\"n\">are</span> <span class=\"n\">sent</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">r2q</span>      <span class=\"n\">DRR</span> <span class=\"n\">quantums</span> <span class=\"n\">are</span> <span class=\"n\">computed</span> <span class=\"n\">as</span> <span class=\"n\">rate</span> <span class=\"k\">in</span> <span class=\"n\">Bps</span><span class=\"o\">/</span><span class=\"n\">r2q</span> <span class=\"p\">{</span><span class=\"mi\">10</span><span class=\"p\">}</span>\n <span class=\"n\">debug</span>    <span class=\"n\">string</span> <span class=\"n\">of</span> <span class=\"mi\">16</span> <span class=\"n\">numbers</span> <span class=\"n\">each</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">3</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n\n <span class=\"n\">direct_qlen</span>  <span class=\"n\">Limit</span> <span class=\"n\">of</span> <span class=\"n\">the</span> <span class=\"n\">direct</span> <span class=\"n\">queue</span> <span class=\"p\">{</span><span class=\"k\">in</span> <span class=\"n\">packets</span><span class=\"p\">}</span>\n<span class=\"p\">...</span> <span class=\"k\">class</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"n\">rate</span> <span class=\"n\">R1</span> <span class=\"p\">[</span><span class=\"n\">burst</span> <span class=\"n\">B1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mpu</span> <span class=\"n\">B</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">overhead</span> <span class=\"n\">O</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">prio</span> <span class=\"n\">P</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">slot</span> <span class=\"n\">S</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">pslot</span> <span class=\"n\">PS</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">ceil</span> <span class=\"n\">R2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">cburst</span> <span class=\"n\">B2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mtu</span> <span class=\"n\">MTU</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">quantum</span> <span class=\"n\">Q</span><span class=\"p\">]</span>\n <span class=\"n\">rate</span>     <span class=\"n\">rate</span> <span class=\"n\">allocated</span> <span class=\"n\">to</span> <span class=\"n\">this</span> <span class=\"k\">class</span> <span class=\"p\">(</span><span class=\"k\">class</span> <span class=\"n\">can</span> <span class=\"n\">still</span> <span class=\"n\">borrow</span><span class=\"p\">)</span>\n <span class=\"n\">burst</span>    <span class=\"n\">max</span> <span class=\"n\">bytes</span> <span class=\"n\">burst</span> <span class=\"n\">which</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">accumulated</span> <span class=\"n\">during</span> <span class=\"n\">idle</span> <span class=\"n\">period</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mpu</span>      <span class=\"n\">minimum</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">overhead</span> <span class=\"n\">per</span><span class=\"o\">-</span><span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">overhead</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">linklay</span>  <span class=\"n\">adapting</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">linklayer</span> <span class=\"n\">e</span><span class=\"p\">.</span><span class=\"n\">g</span><span class=\"p\">.</span> <span class=\"n\">atm</span>\n <span class=\"n\">ceil</span>     <span class=\"n\">definite</span> <span class=\"n\">upper</span> <span class=\"k\">class</span> <span class=\"n\">rate</span> <span class=\"p\">(</span><span class=\"n\">no</span> <span class=\"n\">borrows</span><span class=\"p\">)</span> <span class=\"p\">{</span><span class=\"n\">rate</span><span class=\"p\">}</span>\n <span class=\"n\">cburst</span>   <span class=\"n\">burst</span> <span class=\"n\">but</span> <span class=\"k\">for</span> <span class=\"n\">ceil</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mtu</span>      <span class=\"n\">max</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">we</span> <span class=\"n\">create</span> <span class=\"n\">rate</span> <span class=\"n\">map</span> <span class=\"k\">for</span> <span class=\"p\">{</span><span class=\"mi\">1600</span><span class=\"p\">}</span>\n <span class=\"n\">prio</span>     <span class=\"n\">priority</span> <span class=\"n\">of</span> <span class=\"n\">leaf</span><span class=\"p\">;</span> <span class=\"n\">lower</span> <span class=\"n\">are</span> <span class=\"n\">served</span> <span class=\"n\">first</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">quantum</span>  <span class=\"n\">how</span> <span class=\"n\">much</span> <span class=\"n\">bytes</span> <span class=\"n\">to</span> <span class=\"n\">serve</span> <span class=\"n\">from</span> <span class=\"n\">leaf</span> <span class=\"n\">at</span> <span class=\"n\">once</span> <span class=\"p\">{</span><span class=\"n\">use</span> <span class=\"n\">r2q</span><span class=\"p\">}</span>\n\n<span class=\"n\">TC</span> <span class=\"n\">HTB</span> <span class=\"n\">version</span> <span class=\"mf\">3.3</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-06-07T09:19:41.719631+00:00", "user": {"display_name": "V\u00edctor L\u00f3pez", "uuid": "{45ae86e9-e602-472d-b978-9915cf7f0b94}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D"}, "html": {"href": "https://bitbucket.org/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/441581ed0d88303764d0971c84961d4dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsVL-3.png"}}, "nickname": "Victor Lopez", "type": "user", "account_id": "557058:be4eaa58-1e6c-457d-b177-531b37dc6861"}, "updated_on": "2017-06-07T09:27:20.186268+00:00", "type": "issue_comment", "id": 37426313}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37439056.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37439056"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "[Here is a tutorial](#!/osrf/srcsim/wiki/Network%20testing) that describes how to use `tc` and test your settings.", "markup": "markdown", "html": "<p><a data-is-external-link=\"true\" href=\"#!/osrf/srcsim/wiki/Network%20testing\" rel=\"nofollow\">Here is a tutorial</a> that describes how to use <code>tc</code> and test your settings.</p>", "type": "rendered"}, "created_on": "2017-06-07T17:15:00.712886+00:00", "user": {"display_name": "Nate Koenig", "uuid": "{c862cdd9-fcc8-4419-9fc7-e20db14b8fcb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D"}, "html": {"href": "https://bitbucket.org/%7Bc862cdd9-fcc8-4419-9fc7-e20db14b8fcb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:095b1e12-74ed-4e20-b44f-2f0745b616e0/ca24bb11-4787-4b14-a20d-d91835e9bde2/128"}}, "nickname": "Nathan Koenig", "type": "user", "account_id": "557058:095b1e12-74ed-4e20-b44f-2f0745b616e0"}, "updated_on": null, "type": "issue_comment", "id": 37439056}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37439216.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37439216"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Thanks @nkoenig much appreciated.\n\nDo you also have something about reducing the upload/download speed to emulate the finals settings?", "markup": "markdown", "html": "<p>Thanks @nkoenig much appreciated.</p>\n<p>Do you also have something about reducing the upload/download speed to emulate the finals settings?</p>", "type": "rendered"}, "created_on": "2017-06-07T17:23:14.888495+00:00", "user": {"display_name": "V\u00edctor L\u00f3pez", "uuid": "{45ae86e9-e602-472d-b978-9915cf7f0b94}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D"}, "html": {"href": "https://bitbucket.org/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/441581ed0d88303764d0971c84961d4dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsVL-3.png"}}, "nickname": "Victor Lopez", "type": "user", "account_id": "557058:be4eaa58-1e6c-457d-b177-531b37dc6861"}, "updated_on": null, "type": "issue_comment", "id": 37439216}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37439769.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37439769"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@vlopez87, looks like tc doesn't like the default uplink and downlink values in our script. You can try specifying up/link values like `-u 50mbit -d 50mbit`", "markup": "markdown", "html": "<p>@vlopez87, looks like tc doesn't like the default uplink and downlink values in our script. You can try specifying up/link values like <code>-u 50mbit -d 50mbit</code></p>", "type": "rendered"}, "created_on": "2017-06-07T17:58:30.665440+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": null, "type": "issue_comment", "id": 37439769}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37440116.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37440116"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@iche033 I will try tomorrow, but I had the same issue in the past in my computer and I believe it was due to a missing kernel module that allowed to create the kind of interface that allows to separate upload and download. Never managed to solve it on my computer.", "markup": "markdown", "html": "<p>@iche033 I will try tomorrow, but I had the same issue in the past in my computer and I believe it was due to a missing kernel module that allowed to create the kind of interface that allows to separate upload and download. Never managed to solve it on my computer.</p>", "type": "rendered"}, "created_on": "2017-06-07T18:18:41.454866+00:00", "user": {"display_name": "V\u00edctor L\u00f3pez", "uuid": "{45ae86e9-e602-472d-b978-9915cf7f0b94}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D"}, "html": {"href": "https://bitbucket.org/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/441581ed0d88303764d0971c84961d4dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsVL-3.png"}}, "nickname": "Victor Lopez", "type": "user", "account_id": "557058:be4eaa58-1e6c-457d-b177-531b37dc6861"}, "updated_on": null, "type": "issue_comment", "id": 37440116}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37441336.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37441336"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Great, thank you, I am now able to experiment with and feel that I am simulating potential competition conditions.\n\nMy first observations (via wireshark):  there is a lot of ARP chatter on the link.  I've also got an SSSD process chattering; I'm going to want to be very careful to quiet anything similar to that.  (That's more a note for myself).\n\nI've also noticed that if I change the shaping conditions, it breaks the connection to ros.", "markup": "markdown", "html": "<p>Great, thank you, I am now able to experiment with and feel that I am simulating potential competition conditions.</p>\n<p>My first observations (via wireshark):  there is a lot of ARP chatter on the link.  I've also got an SSSD process chattering; I'm going to want to be very careful to quiet anything similar to that.  (That's more a note for myself).</p>\n<p>I've also noticed that if I change the shaping conditions, it breaks the connection to ros.</p>", "type": "rendered"}, "created_on": "2017-06-07T19:33:51.881840+00:00", "user": {"display_name": "Jeremy White", "uuid": "{abab48b0-35b1-4102-8373-e88a492c5294}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D"}, "html": {"href": "https://bitbucket.org/%7Babab48b0-35b1-4102-8373-e88a492c5294%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/2764d3b5adf560de71f57e48a30550bad=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsJW-3.png"}}, "nickname": "knitfoo", "type": "user", "account_id": "557058:5de786d6-615c-44ef-8e12-f079efa38357"}, "updated_on": null, "type": "issue_comment", "id": 37441336}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37447448.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37447448"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@iche033 I copied the newest script [(pull request d98623f)](https://bitbucket.org/osrf/cloudsim-sim/commits/d98623fb3495bb2201bb67e1bcb5e31855a07512) over to the FC.  Ran \n```\nsudo ./src_tc.rb -i tap0 -u 50kbit -d 2kbit -f 192.168.2.150/26 -l 10s\n```\nI noticed I had to run it 3x before the settings seemed to take effect (ie, ran `ping 192.168.2.10` from my OCU machine after each try running the script.  After 3rd iteration, saw 20s latency).  Aside from that, seems to work great.", "markup": "markdown", "html": "<p>@iche033 I copied the newest script <a data-is-external-link=\"true\" href=\"https://bitbucket.org/osrf/cloudsim-sim/commits/d98623fb3495bb2201bb67e1bcb5e31855a07512\" rel=\"nofollow\">(pull request d98623f)</a> over to the FC.  Ran </p>\n<div class=\"codehilite\"><pre><span></span>sudo ./src_tc.rb -i tap0 -u 50kbit -d 2kbit -f 192.168.2.150/26 -l 10s\n</pre></div>\n\n\n<p>I noticed I had to run it 3x before the settings seemed to take effect (ie, ran <code>ping 192.168.2.10</code> from my OCU machine after each try running the script.  After 3rd iteration, saw 20s latency).  Aside from that, seems to work great.</p>", "type": "rendered"}, "created_on": "2017-06-08T04:38:16.553678+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37447448}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37453889.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37453889"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "Nevermind my comment that was here, probably my container was hogging all the bandwidth.", "markup": "markdown", "html": "<p>Nevermind my comment that was here, probably my container was hogging all the bandwidth.</p>", "type": "rendered"}, "created_on": "2017-06-08T09:20:24.496136+00:00", "user": {"display_name": "V\u00edctor L\u00f3pez", "uuid": "{45ae86e9-e602-472d-b978-9915cf7f0b94}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D"}, "html": {"href": "https://bitbucket.org/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/441581ed0d88303764d0971c84961d4dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsVL-3.png"}}, "nickname": "Victor Lopez", "type": "user", "account_id": "557058:be4eaa58-1e6c-457d-b177-531b37dc6861"}, "updated_on": "2017-06-08T09:31:20.602588+00:00", "type": "issue_comment", "id": 37453889}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37463461.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37463461"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "@stgray interesting, so the first 2 times did not work or had a different effect? We'll keep testing the script", "markup": "markdown", "html": "<p>@stgray interesting, so the first 2 times did not work or had a different effect? We'll keep testing the script</p>", "type": "rendered"}, "created_on": "2017-06-08T15:02:42.700828+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": null, "type": "issue_comment", "id": 37463461}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37463581.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37463581"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "First two times seemed to have no effect.  Third time applying it worked. (I only looked at the ping from 192.168.2.10 to 192.168.2.150)", "markup": "markdown", "html": "<p>First two times seemed to have no effect.  Third time applying it worked. (I only looked at the ping from 192.168.2.10 to 192.168.2.150)</p>", "type": "rendered"}, "created_on": "2017-06-08T15:06:32.338489+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": null, "type": "issue_comment", "id": 37463581}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37464075.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37464075"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I tried this on my computer trying to throttle the docker0 interface (or the interface with random name that is created per docker) but after some seconds working, the connection went completely dead and I couldn't ping either way. It resumed only after I called the stop src script.\n\nSo I'm only able to test it on the Cloud, which is complicated because for every change I have to make on the FC software I need to rebuild the image.", "markup": "markdown", "html": "<p>I tried this on my computer trying to throttle the docker0 interface (or the interface with random name that is created per docker) but after some seconds working, the connection went completely dead and I couldn't ping either way. It resumed only after I called the stop src script.</p>\n<p>So I'm only able to test it on the Cloud, which is complicated because for every change I have to make on the FC software I need to rebuild the image.</p>", "type": "rendered"}, "created_on": "2017-06-08T15:24:32.090333+00:00", "user": {"display_name": "V\u00edctor L\u00f3pez", "uuid": "{45ae86e9-e602-472d-b978-9915cf7f0b94}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D"}, "html": {"href": "https://bitbucket.org/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/441581ed0d88303764d0971c84961d4dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsVL-3.png"}}, "nickname": "Victor Lopez", "type": "user", "account_id": "557058:be4eaa58-1e6c-457d-b177-531b37dc6861"}, "updated_on": null, "type": "issue_comment", "id": 37464075}, {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37464486.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37464486"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I haven't tried this but when you do docker run to start your container, try passing in `--net=host` and apply the TC script to `eth0` and see if that works.", "markup": "markdown", "html": "<p>I haven't tried this but when you do docker run to start your container, try passing in <code>--net=host</code> and apply the TC script to <code>eth0</code> and see if that works.</p>", "type": "rendered"}, "created_on": "2017-06-08T15:39:41.263561+00:00", "user": {"display_name": "Ian Chen", "uuid": "{eaa6fca5-6deb-43f6-907f-971c144735dd}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D"}, "html": {"href": "https://bitbucket.org/%7Beaa6fca5-6deb-43f6-907f-971c144735dd%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5/1e4adcdf-1946-4280-9aea-eb5f15a7f912/128"}}, "nickname": "Ian Chen", "type": "user", "account_id": "557058:10b01d41-a2e9-4a41-a907-e6e2f03b6cd5"}, "updated_on": null, "type": "issue_comment", "id": 37464486}], "page": 1, "size": 39}