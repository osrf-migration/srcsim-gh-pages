{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146/comments/37426313.json"}, "html": {"href": "#!/osrf/srcsim/issues/146#comment-37426313"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/146.json"}}, "type": "issue", "id": 146, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "traffic control parameters"}, "content": {"raw": "I am trying to execute the latest version of the script on the merge request on the Field computer, it fails, here's the log:\n\n```\n#!bash\n\n sudo ./src_tc.rb -i tap0 -l 5000ms\nRTNETLINK answers: No such file or directory\nCannot find device \"ifb0\"\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nRTNETLINK answers: No such file or directory\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nRTNETLINK answers: No such file or directory\n\n```\n\n\nI also tried to download it and execute it inside the running team container:\n\n```\n\nubuntu@ip-172-31-13-121:~$ docker exec team_container bash -c \"wget https://bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb && chmod +x src_tc.rb && ./src_tc.rb  -i eth0 -l 5000ms\"\n--2017-06-07 09:25:55--  https://bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb\nResolving bitbucket.org (bitbucket.org)... 104.192.143.1, 104.192.143.2, 104.192.143.3, ...\nConnecting to bitbucket.org (bitbucket.org)|104.192.143.1|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 3212 (3.1K) [text/plain]\nSaving to: \u2018src_tc.rb.1\u2019\n\n     0K ...                                                   100%  454M=0s\n\n2017-06-07 09:25:55 (454 MB/s) - \u2018src_tc.rb.1\u2019 saved [3212/3212]\n\nRTNETLINK answers: Operation not permitted\nCannot find device \"ifb0\"\nmodprobe: ERROR: ../libkmod/libkmod.c:556 kmod_search_moddep() could not open moddep file '/lib/modules/4.4.0-78-generic/modules.dep.bin'\nCannot find device \"ifb0\"\nRTNETLINK answers: Operation not permitted\nCannot find device \"ifb0\"\nbad action parsing\nparse_action: bad value (5:mirred)!\nIllegal \"action\"\nRTNETLINK answers: Operation not permitted\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nRTNETLINK answers: Operation not permitted\nWe have an error talking to the kernel\nRTNETLINK answers: Operation not permitted\nCannot find device \"ifb0\"\nIllegal \"rate\"\nUsage: ... qdisc add ... htb [default N] [r2q N]\n                      [direct_qlen P]\n default  minor id of class to which unclassified packets are sent {0}\n r2q      DRR quantums are computed as rate in Bps/r2q {10}\n debug    string of 16 numbers each 0-3 {0}\n\n direct_qlen  Limit of the direct queue {in packets}\n... class add ... htb rate R1 [burst B1] [mpu B] [overhead O]\n                      [prio P] [slot S] [pslot PS]\n                      [ceil R2] [cburst B2] [mtu MTU] [quantum Q]\n rate     rate allocated to this class (class can still borrow)\n burst    max bytes burst which can be accumulated during idle period {computed}\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate (no borrows) {rate}\n cburst   burst but for ceil {computed}\n mtu      max packet size we create rate map for {1600}\n prio     priority of leaf; lower are served first {0}\n quantum  how much bytes to serve from leaf at once {use r2q}\n\nTC HTB version 3.3\nCannot find device \"ifb0\"\nCannot find device \"ifb0\"\n\n```", "markup": "markdown", "html": "<p>I am trying to execute the latest version of the script on the merge request on the Field computer, it fails, here's the log:</p>\n<div class=\"codehilite language-bash\"><pre><span></span> sudo ./src_tc.rb -i tap0 -l 5000ms\nRTNETLINK answers: No such file or directory\nCannot find device <span class=\"s2\">&quot;ifb0&quot;</span>\nIllegal <span class=\"s2\">&quot;rate&quot;</span>\nUsage: ... qdisc add ... htb <span class=\"o\">[</span>default N<span class=\"o\">]</span> <span class=\"o\">[</span>r2q N<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>direct_qlen P<span class=\"o\">]</span>\n default  minor id of class to which unclassified packets are sent <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n r2q      DRR quantums are computed as rate in Bps/r2q <span class=\"o\">{</span><span class=\"m\">10</span><span class=\"o\">}</span>\n debug    string of <span class=\"m\">16</span> numbers each <span class=\"m\">0</span>-3 <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n\n direct_qlen  Limit of the direct queue <span class=\"o\">{</span>in packets<span class=\"o\">}</span>\n... class add ... htb rate R1 <span class=\"o\">[</span>burst B1<span class=\"o\">]</span> <span class=\"o\">[</span>mpu B<span class=\"o\">]</span> <span class=\"o\">[</span>overhead O<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>prio P<span class=\"o\">]</span> <span class=\"o\">[</span>slot S<span class=\"o\">]</span> <span class=\"o\">[</span>pslot PS<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>ceil R2<span class=\"o\">]</span> <span class=\"o\">[</span>cburst B2<span class=\"o\">]</span> <span class=\"o\">[</span>mtu MTU<span class=\"o\">]</span> <span class=\"o\">[</span>quantum Q<span class=\"o\">]</span>\n rate     rate allocated to this class <span class=\"o\">(</span>class can still borrow<span class=\"o\">)</span>\n burst    max bytes burst which can be accumulated during idle period <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate <span class=\"o\">(</span>no borrows<span class=\"o\">)</span> <span class=\"o\">{</span>rate<span class=\"o\">}</span>\n cburst   burst but <span class=\"k\">for</span> ceil <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mtu      max packet size we create rate map <span class=\"k\">for</span> <span class=\"o\">{</span><span class=\"m\">1600</span><span class=\"o\">}</span>\n prio     priority of leaf<span class=\"p\">;</span> lower are served first <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n quantum  how much bytes to serve from leaf at once <span class=\"o\">{</span>use r2q<span class=\"o\">}</span>\n\nTC HTB version <span class=\"m\">3</span>.3\nRTNETLINK answers: No such file or directory\nIllegal <span class=\"s2\">&quot;rate&quot;</span>\nUsage: ... qdisc add ... htb <span class=\"o\">[</span>default N<span class=\"o\">]</span> <span class=\"o\">[</span>r2q N<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>direct_qlen P<span class=\"o\">]</span>\n default  minor id of class to which unclassified packets are sent <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n r2q      DRR quantums are computed as rate in Bps/r2q <span class=\"o\">{</span><span class=\"m\">10</span><span class=\"o\">}</span>\n debug    string of <span class=\"m\">16</span> numbers each <span class=\"m\">0</span>-3 <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n\n direct_qlen  Limit of the direct queue <span class=\"o\">{</span>in packets<span class=\"o\">}</span>\n... class add ... htb rate R1 <span class=\"o\">[</span>burst B1<span class=\"o\">]</span> <span class=\"o\">[</span>mpu B<span class=\"o\">]</span> <span class=\"o\">[</span>overhead O<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>prio P<span class=\"o\">]</span> <span class=\"o\">[</span>slot S<span class=\"o\">]</span> <span class=\"o\">[</span>pslot PS<span class=\"o\">]</span>\n                      <span class=\"o\">[</span>ceil R2<span class=\"o\">]</span> <span class=\"o\">[</span>cburst B2<span class=\"o\">]</span> <span class=\"o\">[</span>mtu MTU<span class=\"o\">]</span> <span class=\"o\">[</span>quantum Q<span class=\"o\">]</span>\n rate     rate allocated to this class <span class=\"o\">(</span>class can still borrow<span class=\"o\">)</span>\n burst    max bytes burst which can be accumulated during idle period <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mpu      minimum packet size used in rate computations\n overhead per-packet size overhead used in rate computations\n linklay  adapting to a linklayer e.g. atm\n ceil     definite upper class rate <span class=\"o\">(</span>no borrows<span class=\"o\">)</span> <span class=\"o\">{</span>rate<span class=\"o\">}</span>\n cburst   burst but <span class=\"k\">for</span> ceil <span class=\"o\">{</span>computed<span class=\"o\">}</span>\n mtu      max packet size we create rate map <span class=\"k\">for</span> <span class=\"o\">{</span><span class=\"m\">1600</span><span class=\"o\">}</span>\n prio     priority of leaf<span class=\"p\">;</span> lower are served first <span class=\"o\">{</span><span class=\"m\">0</span><span class=\"o\">}</span>\n quantum  how much bytes to serve from leaf at once <span class=\"o\">{</span>use r2q<span class=\"o\">}</span>\n\nTC HTB version <span class=\"m\">3</span>.3\nRTNETLINK answers: No such file or directory\n</pre></div>\n\n\n<p>I also tried to download it and execute it inside the running team container:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">ubuntu</span><span class=\"p\">@</span><span class=\"n\">ip</span><span class=\"o\">-</span><span class=\"mi\">172</span><span class=\"o\">-</span><span class=\"mi\">31</span><span class=\"o\">-</span><span class=\"mi\">13</span><span class=\"o\">-</span><span class=\"mi\">121</span><span class=\"o\">:~</span><span class=\"err\">$</span> <span class=\"n\">docker</span> <span class=\"n\">exec</span> <span class=\"n\">team_container</span> <span class=\"n\">bash</span> <span class=\"o\">-</span><span class=\"n\">c</span> <span class=\"s\">&quot;wget https://bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb &amp;&amp; chmod +x src_tc.rb &amp;&amp; ./src_tc.rb  -i eth0 -l 5000ms&quot;</span>\n<span class=\"o\">--</span><span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mo\">06</span><span class=\"o\">-</span><span class=\"mo\">07</span> <span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">25</span><span class=\"o\">:</span><span class=\"mi\">55</span><span class=\"o\">--</span>  <span class=\"nl\">https</span><span class=\"p\">:</span><span class=\"c1\">//bitbucket.org/osrf/cloudsim-sim/raw/d98623fb3495bb2201bb67e1bcb5e31855a07512/src_commands/src_tc.rb</span>\n<span class=\"n\">Resolving</span> <span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span> <span class=\"p\">(</span><span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span><span class=\"p\">)...</span> <span class=\"mf\">104.192.143.1</span><span class=\"p\">,</span> <span class=\"mf\">104.192.143.2</span><span class=\"p\">,</span> <span class=\"mf\">104.192.143.3</span><span class=\"p\">,</span> <span class=\"p\">...</span>\n<span class=\"n\">Connecting</span> <span class=\"n\">to</span> <span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span> <span class=\"p\">(</span><span class=\"n\">bitbucket</span><span class=\"p\">.</span><span class=\"n\">org</span><span class=\"p\">)</span><span class=\"o\">|</span><span class=\"mf\">104.192.143.1</span><span class=\"o\">|:</span><span class=\"mf\">443.</span><span class=\"p\">..</span> <span class=\"n\">connected</span><span class=\"p\">.</span>\n<span class=\"n\">HTTP</span> <span class=\"n\">request</span> <span class=\"n\">sent</span><span class=\"p\">,</span> <span class=\"n\">awaiting</span> <span class=\"n\">response</span><span class=\"p\">...</span> <span class=\"mi\">200</span> <span class=\"n\">OK</span>\n<span class=\"nl\">Length</span><span class=\"p\">:</span> <span class=\"mi\">3212</span> <span class=\"p\">(</span><span class=\"mf\">3.1</span><span class=\"n\">K</span><span class=\"p\">)</span> <span class=\"p\">[</span><span class=\"n\">text</span><span class=\"o\">/</span><span class=\"n\">plain</span><span class=\"p\">]</span>\n<span class=\"n\">Saving</span> <span class=\"nl\">to</span><span class=\"p\">:</span> <span class=\"err\">\u2018</span><span class=\"n\">src_tc</span><span class=\"p\">.</span><span class=\"n\">rb</span><span class=\"mf\">.1</span><span class=\"err\">\u2019</span>\n\n     <span class=\"mi\">0</span><span class=\"n\">K</span> <span class=\"p\">...</span>                                                   <span class=\"mi\">100</span><span class=\"o\">%</span>  <span class=\"mi\">454</span><span class=\"n\">M</span><span class=\"o\">=</span><span class=\"mi\">0</span><span class=\"n\">s</span>\n\n<span class=\"mi\">2017</span><span class=\"o\">-</span><span class=\"mo\">06</span><span class=\"o\">-</span><span class=\"mo\">07</span> <span class=\"mi\">09</span><span class=\"o\">:</span><span class=\"mi\">25</span><span class=\"o\">:</span><span class=\"mi\">55</span> <span class=\"p\">(</span><span class=\"mi\">454</span> <span class=\"n\">MB</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"o\">-</span> <span class=\"err\">\u2018</span><span class=\"n\">src_tc</span><span class=\"p\">.</span><span class=\"n\">rb</span><span class=\"mf\">.1</span><span class=\"err\">\u2019</span> <span class=\"n\">saved</span> <span class=\"p\">[</span><span class=\"mi\">3212</span><span class=\"o\">/</span><span class=\"mi\">3212</span><span class=\"p\">]</span>\n\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"nl\">modprobe</span><span class=\"p\">:</span> <span class=\"nl\">ERROR</span><span class=\"p\">:</span> <span class=\"p\">..</span><span class=\"o\">/</span><span class=\"n\">libkmod</span><span class=\"o\">/</span><span class=\"n\">libkmod</span><span class=\"p\">.</span><span class=\"nl\">c</span><span class=\"p\">:</span><span class=\"mi\">556</span> <span class=\"n\">kmod_search_moddep</span><span class=\"p\">()</span> <span class=\"n\">could</span> <span class=\"n\">not</span> <span class=\"n\">open</span> <span class=\"n\">moddep</span> <span class=\"n\">file</span> <span class=\"err\">&#39;</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">modules</span><span class=\"o\">/</span><span class=\"mf\">4.4.0</span><span class=\"o\">-</span><span class=\"mi\">78</span><span class=\"o\">-</span><span class=\"n\">generic</span><span class=\"o\">/</span><span class=\"n\">modules</span><span class=\"p\">.</span><span class=\"n\">dep</span><span class=\"p\">.</span><span class=\"n\">bin</span><span class=\"err\">&#39;</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">bad</span> <span class=\"n\">action</span> <span class=\"n\">parsing</span>\n<span class=\"nl\">parse_action</span><span class=\"p\">:</span> <span class=\"n\">bad</span> <span class=\"n\">value</span> <span class=\"p\">(</span><span class=\"mi\">5</span><span class=\"o\">:</span><span class=\"n\">mirred</span><span class=\"p\">)</span><span class=\"o\">!</span>\n<span class=\"n\">Illegal</span> <span class=\"s\">&quot;action&quot;</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Illegal</span> <span class=\"s\">&quot;rate&quot;</span>\n<span class=\"nl\">Usage</span><span class=\"p\">:</span> <span class=\"p\">...</span> <span class=\"n\">qdisc</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"p\">[</span><span class=\"k\">default</span> <span class=\"n\">N</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">r2q</span> <span class=\"n\">N</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">direct_qlen</span> <span class=\"n\">P</span><span class=\"p\">]</span>\n <span class=\"k\">default</span>  <span class=\"n\">minor</span> <span class=\"kt\">id</span> <span class=\"n\">of</span> <span class=\"k\">class</span> <span class=\"n\">to</span> <span class=\"n\">which</span> <span class=\"n\">unclassified</span> <span class=\"n\">packets</span> <span class=\"n\">are</span> <span class=\"n\">sent</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">r2q</span>      <span class=\"n\">DRR</span> <span class=\"n\">quantums</span> <span class=\"n\">are</span> <span class=\"n\">computed</span> <span class=\"n\">as</span> <span class=\"n\">rate</span> <span class=\"k\">in</span> <span class=\"n\">Bps</span><span class=\"o\">/</span><span class=\"n\">r2q</span> <span class=\"p\">{</span><span class=\"mi\">10</span><span class=\"p\">}</span>\n <span class=\"n\">debug</span>    <span class=\"n\">string</span> <span class=\"n\">of</span> <span class=\"mi\">16</span> <span class=\"n\">numbers</span> <span class=\"n\">each</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">3</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n\n <span class=\"n\">direct_qlen</span>  <span class=\"n\">Limit</span> <span class=\"n\">of</span> <span class=\"n\">the</span> <span class=\"n\">direct</span> <span class=\"n\">queue</span> <span class=\"p\">{</span><span class=\"k\">in</span> <span class=\"n\">packets</span><span class=\"p\">}</span>\n<span class=\"p\">...</span> <span class=\"k\">class</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"n\">rate</span> <span class=\"n\">R1</span> <span class=\"p\">[</span><span class=\"n\">burst</span> <span class=\"n\">B1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mpu</span> <span class=\"n\">B</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">overhead</span> <span class=\"n\">O</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">prio</span> <span class=\"n\">P</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">slot</span> <span class=\"n\">S</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">pslot</span> <span class=\"n\">PS</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">ceil</span> <span class=\"n\">R2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">cburst</span> <span class=\"n\">B2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mtu</span> <span class=\"n\">MTU</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">quantum</span> <span class=\"n\">Q</span><span class=\"p\">]</span>\n <span class=\"n\">rate</span>     <span class=\"n\">rate</span> <span class=\"n\">allocated</span> <span class=\"n\">to</span> <span class=\"n\">this</span> <span class=\"k\">class</span> <span class=\"p\">(</span><span class=\"k\">class</span> <span class=\"n\">can</span> <span class=\"n\">still</span> <span class=\"n\">borrow</span><span class=\"p\">)</span>\n <span class=\"n\">burst</span>    <span class=\"n\">max</span> <span class=\"n\">bytes</span> <span class=\"n\">burst</span> <span class=\"n\">which</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">accumulated</span> <span class=\"n\">during</span> <span class=\"n\">idle</span> <span class=\"n\">period</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mpu</span>      <span class=\"n\">minimum</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">overhead</span> <span class=\"n\">per</span><span class=\"o\">-</span><span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">overhead</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">linklay</span>  <span class=\"n\">adapting</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">linklayer</span> <span class=\"n\">e</span><span class=\"p\">.</span><span class=\"n\">g</span><span class=\"p\">.</span> <span class=\"n\">atm</span>\n <span class=\"n\">ceil</span>     <span class=\"n\">definite</span> <span class=\"n\">upper</span> <span class=\"k\">class</span> <span class=\"n\">rate</span> <span class=\"p\">(</span><span class=\"n\">no</span> <span class=\"n\">borrows</span><span class=\"p\">)</span> <span class=\"p\">{</span><span class=\"n\">rate</span><span class=\"p\">}</span>\n <span class=\"n\">cburst</span>   <span class=\"n\">burst</span> <span class=\"n\">but</span> <span class=\"k\">for</span> <span class=\"n\">ceil</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mtu</span>      <span class=\"n\">max</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">we</span> <span class=\"n\">create</span> <span class=\"n\">rate</span> <span class=\"n\">map</span> <span class=\"k\">for</span> <span class=\"p\">{</span><span class=\"mi\">1600</span><span class=\"p\">}</span>\n <span class=\"n\">prio</span>     <span class=\"n\">priority</span> <span class=\"n\">of</span> <span class=\"n\">leaf</span><span class=\"p\">;</span> <span class=\"n\">lower</span> <span class=\"n\">are</span> <span class=\"n\">served</span> <span class=\"n\">first</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">quantum</span>  <span class=\"n\">how</span> <span class=\"n\">much</span> <span class=\"n\">bytes</span> <span class=\"n\">to</span> <span class=\"n\">serve</span> <span class=\"n\">from</span> <span class=\"n\">leaf</span> <span class=\"n\">at</span> <span class=\"n\">once</span> <span class=\"p\">{</span><span class=\"n\">use</span> <span class=\"n\">r2q</span><span class=\"p\">}</span>\n\n<span class=\"n\">TC</span> <span class=\"n\">HTB</span> <span class=\"n\">version</span> <span class=\"mf\">3.3</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">We</span> <span class=\"n\">have</span> <span class=\"n\">an</span> <span class=\"n\">error</span> <span class=\"n\">talking</span> <span class=\"n\">to</span> <span class=\"n\">the</span> <span class=\"n\">kernel</span>\n<span class=\"n\">RTNETLINK</span> <span class=\"nl\">answers</span><span class=\"p\">:</span> <span class=\"n\">Operation</span> <span class=\"n\">not</span> <span class=\"n\">permitted</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">Illegal</span> <span class=\"s\">&quot;rate&quot;</span>\n<span class=\"nl\">Usage</span><span class=\"p\">:</span> <span class=\"p\">...</span> <span class=\"n\">qdisc</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"p\">[</span><span class=\"k\">default</span> <span class=\"n\">N</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">r2q</span> <span class=\"n\">N</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">direct_qlen</span> <span class=\"n\">P</span><span class=\"p\">]</span>\n <span class=\"k\">default</span>  <span class=\"n\">minor</span> <span class=\"kt\">id</span> <span class=\"n\">of</span> <span class=\"k\">class</span> <span class=\"n\">to</span> <span class=\"n\">which</span> <span class=\"n\">unclassified</span> <span class=\"n\">packets</span> <span class=\"n\">are</span> <span class=\"n\">sent</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">r2q</span>      <span class=\"n\">DRR</span> <span class=\"n\">quantums</span> <span class=\"n\">are</span> <span class=\"n\">computed</span> <span class=\"n\">as</span> <span class=\"n\">rate</span> <span class=\"k\">in</span> <span class=\"n\">Bps</span><span class=\"o\">/</span><span class=\"n\">r2q</span> <span class=\"p\">{</span><span class=\"mi\">10</span><span class=\"p\">}</span>\n <span class=\"n\">debug</span>    <span class=\"n\">string</span> <span class=\"n\">of</span> <span class=\"mi\">16</span> <span class=\"n\">numbers</span> <span class=\"n\">each</span> <span class=\"mi\">0</span><span class=\"o\">-</span><span class=\"mi\">3</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n\n <span class=\"n\">direct_qlen</span>  <span class=\"n\">Limit</span> <span class=\"n\">of</span> <span class=\"n\">the</span> <span class=\"n\">direct</span> <span class=\"n\">queue</span> <span class=\"p\">{</span><span class=\"k\">in</span> <span class=\"n\">packets</span><span class=\"p\">}</span>\n<span class=\"p\">...</span> <span class=\"k\">class</span> <span class=\"n\">add</span> <span class=\"p\">...</span> <span class=\"n\">htb</span> <span class=\"n\">rate</span> <span class=\"n\">R1</span> <span class=\"p\">[</span><span class=\"n\">burst</span> <span class=\"n\">B1</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mpu</span> <span class=\"n\">B</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">overhead</span> <span class=\"n\">O</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">prio</span> <span class=\"n\">P</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">slot</span> <span class=\"n\">S</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">pslot</span> <span class=\"n\">PS</span><span class=\"p\">]</span>\n                      <span class=\"p\">[</span><span class=\"n\">ceil</span> <span class=\"n\">R2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">cburst</span> <span class=\"n\">B2</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">mtu</span> <span class=\"n\">MTU</span><span class=\"p\">]</span> <span class=\"p\">[</span><span class=\"n\">quantum</span> <span class=\"n\">Q</span><span class=\"p\">]</span>\n <span class=\"n\">rate</span>     <span class=\"n\">rate</span> <span class=\"n\">allocated</span> <span class=\"n\">to</span> <span class=\"n\">this</span> <span class=\"k\">class</span> <span class=\"p\">(</span><span class=\"k\">class</span> <span class=\"n\">can</span> <span class=\"n\">still</span> <span class=\"n\">borrow</span><span class=\"p\">)</span>\n <span class=\"n\">burst</span>    <span class=\"n\">max</span> <span class=\"n\">bytes</span> <span class=\"n\">burst</span> <span class=\"n\">which</span> <span class=\"n\">can</span> <span class=\"n\">be</span> <span class=\"n\">accumulated</span> <span class=\"n\">during</span> <span class=\"n\">idle</span> <span class=\"n\">period</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mpu</span>      <span class=\"n\">minimum</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">overhead</span> <span class=\"n\">per</span><span class=\"o\">-</span><span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">overhead</span> <span class=\"n\">used</span> <span class=\"k\">in</span> <span class=\"n\">rate</span> <span class=\"n\">computations</span>\n <span class=\"n\">linklay</span>  <span class=\"n\">adapting</span> <span class=\"n\">to</span> <span class=\"n\">a</span> <span class=\"n\">linklayer</span> <span class=\"n\">e</span><span class=\"p\">.</span><span class=\"n\">g</span><span class=\"p\">.</span> <span class=\"n\">atm</span>\n <span class=\"n\">ceil</span>     <span class=\"n\">definite</span> <span class=\"n\">upper</span> <span class=\"k\">class</span> <span class=\"n\">rate</span> <span class=\"p\">(</span><span class=\"n\">no</span> <span class=\"n\">borrows</span><span class=\"p\">)</span> <span class=\"p\">{</span><span class=\"n\">rate</span><span class=\"p\">}</span>\n <span class=\"n\">cburst</span>   <span class=\"n\">burst</span> <span class=\"n\">but</span> <span class=\"k\">for</span> <span class=\"n\">ceil</span> <span class=\"p\">{</span><span class=\"n\">computed</span><span class=\"p\">}</span>\n <span class=\"n\">mtu</span>      <span class=\"n\">max</span> <span class=\"n\">packet</span> <span class=\"n\">size</span> <span class=\"n\">we</span> <span class=\"n\">create</span> <span class=\"n\">rate</span> <span class=\"n\">map</span> <span class=\"k\">for</span> <span class=\"p\">{</span><span class=\"mi\">1600</span><span class=\"p\">}</span>\n <span class=\"n\">prio</span>     <span class=\"n\">priority</span> <span class=\"n\">of</span> <span class=\"n\">leaf</span><span class=\"p\">;</span> <span class=\"n\">lower</span> <span class=\"n\">are</span> <span class=\"n\">served</span> <span class=\"n\">first</span> <span class=\"p\">{</span><span class=\"mi\">0</span><span class=\"p\">}</span>\n <span class=\"n\">quantum</span>  <span class=\"n\">how</span> <span class=\"n\">much</span> <span class=\"n\">bytes</span> <span class=\"n\">to</span> <span class=\"n\">serve</span> <span class=\"n\">from</span> <span class=\"n\">leaf</span> <span class=\"n\">at</span> <span class=\"n\">once</span> <span class=\"p\">{</span><span class=\"n\">use</span> <span class=\"n\">r2q</span><span class=\"p\">}</span>\n\n<span class=\"n\">TC</span> <span class=\"n\">HTB</span> <span class=\"n\">version</span> <span class=\"mf\">3.3</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n<span class=\"n\">Cannot</span> <span class=\"n\">find</span> <span class=\"n\">device</span> <span class=\"s\">&quot;ifb0&quot;</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-06-07T09:19:41.719631+00:00", "user": {"display_name": "V\u00edctor L\u00f3pez", "uuid": "{45ae86e9-e602-472d-b978-9915cf7f0b94}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D"}, "html": {"href": "https://bitbucket.org/%7B45ae86e9-e602-472d-b978-9915cf7f0b94%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/441581ed0d88303764d0971c84961d4dd=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsVL-3.png"}}, "nickname": "Victor Lopez", "type": "user", "account_id": "557058:be4eaa58-1e6c-457d-b177-531b37dc6861"}, "updated_on": "2017-06-07T09:27:20.186268+00:00", "type": "issue_comment", "id": 37426313}