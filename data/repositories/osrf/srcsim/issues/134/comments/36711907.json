{"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/134/comments/36711907.json"}, "html": {"href": "#!/osrf/srcsim/issues/134#comment-36711907"}}, "issue": {"links": {"self": {"href": "data/repositories/osrf/srcsim/issues/134.json"}}, "type": "issue", "id": 134, "repository": {"links": {"self": {"href": "data/repositories/osrf/srcsim.json"}, "html": {"href": "#!/osrf/srcsim"}, "avatar": {"href": "data/bytebucket.org/ravatar/{c41021d9-0217-4628-999d-7f8d82f98dcb}ts=c_plus_plus"}}, "type": "repository", "name": "srcsim", "full_name": "osrf/srcsim", "uuid": "{c41021d9-0217-4628-999d-7f8d82f98dcb}"}, "title": "java.io.IOException: Too many open files"}, "content": {"raw": "@scpeters Here's an easy way to reproduce the java IOException in under 30 seconds.  I just make 6+ instances of the test node below, which subscribes to most of the Valkyrie topics.  It doesn't matter if I just use rosrun and cause the previous instance to shutdown each time I start a new one, or if I make instances with anonymous ids.  The exact number of instances seems to vary between test runs that I've tried.  Sometimes it's as low as 6, others it could be 10 or more.\n\n```\n#include <ros/ros.h>\n#include <std_msgs/Float64MultiArray.h>\n#include <sensor_msgs/JointState.h>\n#include <nav_msgs/Odometry.h>\n\n#include <ihmc_msgs/FootstepDataListRosMessage.h>\n#include <ihmc_msgs/HeadTrajectoryRosMessage.h>\n#include <ihmc_msgs/PelvisHeightTrajectoryRosMessage.h>\n#include <ihmc_msgs/WholeBodyTrajectoryRosMessage.h>\n#include <ihmc_msgs/ArmTrajectoryRosMessage.h>\n#include <ihmc_msgs/NeckTrajectoryRosMessage.h>\n#include <ihmc_msgs/StopAllTrajectoryRosMessage.h>\n#include <ihmc_msgs/PauseWalkingRosMessage.h>\n#include <ihmc_msgs/AbortWalkingRosMessage.h>\n#include <ihmc_msgs/GoHomeRosMessage.h>\n#include <ihmc_msgs/FootstepStatusRosMessage.h>\n#include <ihmc_msgs/HighLevelStateRosMessage.h>\n#include <ihmc_msgs/WalkingStatusRosMessage.h>\n\nvoid jsCallback(const sensor_msgs::JointStateConstPtr &js){};\nvoid fsCallback(const ihmc_msgs::FootstepStatusRosMessageConstPtr &fs){};\nvoid hlsCallback(const ihmc_msgs::HighLevelStateRosMessageConstPtr &hls){};\nvoid pCallback(const nav_msgs::OdometryConstPtr &p){};\nvoid wsCallback(const ihmc_msgs::WalkingStatusRosMessage &ws){};\n\nint main(int argc, char** argv) {\n\n  ros::init(argc, argv, \"val_network_test\");\n  ros::NodeHandle nh;\n\n  // Advertise topics\n  ros::Publisher footstep_pub_ = nh.advertise<ihmc_msgs::FootstepDataListRosMessage>(\"/ihmc_ros/valkyrie/control/footstep_list\", 1);\n  ros::Publisher head_traj_pub_ = nh.advertise<ihmc_msgs::HeadTrajectoryRosMessage>( \"/ihmc_ros/valkyrie/control/head_trajectory\", 1);\n  ros::Publisher pelvis_height_pub_ = nh.advertise<ihmc_msgs::PelvisHeightTrajectoryRosMessage >( \"/ihmc_ros/valkyrie/control/pelvis_height_trajectory\", 1);\n  ros::Publisher pelvis_traj_pub_ = nh.advertise<ihmc_msgs::PelvisTrajectoryRosMessage>( \"/ihmc_ros/valkyrie/control/pelvis_trajectory\", 1);\n  ros::Publisher foot_traj_pub_ = nh.advertise<ihmc_msgs::FootTrajectoryRosMessage>( \"/ihmc_ros/valkyrie/control/foot_trajectory\", 1);\n  ros::Publisher hand_traj_pub_ = nh.advertise<ihmc_msgs::HandTrajectoryRosMessage >( \"/ihmc_ros/valkyrie/control/hand_trajectory\", 1);\n  ros::Publisher chest_traj_pub_ = nh.advertise<ihmc_msgs::ChestTrajectoryRosMessage>( \"/ihmc_ros/valkyrie/control/chest_trajectory\", 1);\n  ros::Publisher wholebody_traj_pub_ = nh.advertise<ihmc_msgs::WholeBodyTrajectoryRosMessage>( \"/ihmc_ros/valkyrie/control/whole_body_trajectory\", 1);\n  ros::Publisher arm_traj_pub_ = nh.advertise<ihmc_msgs::ArmTrajectoryRosMessage>( \"/ihmc_ros/valkyrie/control/arm_trajectory\", 1);\n  ros::Publisher neck_traj_pub_ = nh.advertise<ihmc_msgs::NeckTrajectoryRosMessage>( \"/ihmc_ros/valkyrie/control/neck_trajectory\", 1);\n  ros::Publisher stop_all_pub_ = nh.advertise<ihmc_msgs::StopAllTrajectoryRosMessage >( \"/ihmc_ros/valkyrie/control/stop_all_trajectories\", 1);\n  ros::Publisher walk_pause_pub_ = nh.advertise<ihmc_msgs::PauseWalkingRosMessage>( \"/ihmc_ros/valkyrie/control/pause_walking\", 1);\n  ros::Publisher walk_abort_pub_ = nh.advertise<ihmc_msgs::AbortWalkingRosMessage>( \"/ihmc_ros/valkyrie/control/abort_walking\", 1);\n  ros::Publisher go_home_pub_ = nh.advertise<ihmc_msgs::GoHomeRosMessage>( \"/ihmc_ros/valkyrie/control/go_home\", 1);\n  ros::Publisher left_hand_pub_ = nh.advertise<std_msgs::Float64MultiArray>( \"/left_hand_position_controller/command\", 1);\n  ros::Publisher right_hand_pub_ = nh.advertise<std_msgs::Float64MultiArray>( \"/right_hand_position_controller/command\", 1);\n\n  ros::Subscriber joint_state_sub_ = nh.subscribe(\"/ihmc_ros/valkyrie/output/joint_states\", 1, jsCallback);\n  ros::Subscriber footstep_sub_ = nh.subscribe(\"/ihmc_ros/valkyrie/output/footstep_status\", 1, fsCallback);\n  ros::Subscriber state_sub_ = nh.subscribe(\"/ihmc_ros/valkyrie/output/high_level_state\", 1, hlsCallback);\n  ros::Subscriber pose_sub_ = nh.subscribe(\"/ihmc_ros/valkyrie/output/robot_pose\", 1, pCallback);\n  ros::Subscriber walk_status_sub_ = nh.subscribe(\"/ihmc_ros/valkyrie/output/walking_status\", 1, wsCallback);\n\n  ros::AsyncSpinner spinner(2);\n  spinner.start();\n  ros::waitForShutdown();\n}\n\n```", "markup": "markdown", "html": "<p>@scpeters Here's an easy way to reproduce the java IOException in under 30 seconds.  I just make 6+ instances of the test node below, which subscribes to most of the Valkyrie topics.  It doesn't matter if I just use rosrun and cause the previous instance to shutdown each time I start a new one, or if I make instances with anonymous ids.  The exact number of instances seems to vary between test runs that I've tried.  Sometimes it's as low as 6, others it could be 10 or more.</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ros/ros.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;std_msgs/Float64MultiArray.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;sensor_msgs/JointState.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;nav_msgs/Odometry.h&gt;</span><span class=\"cp\"></span>\n\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/FootstepDataListRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/HeadTrajectoryRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/PelvisHeightTrajectoryRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/WholeBodyTrajectoryRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/ArmTrajectoryRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/NeckTrajectoryRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/StopAllTrajectoryRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/PauseWalkingRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/AbortWalkingRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/GoHomeRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/FootstepStatusRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/HighLevelStateRosMessage.h&gt;</span><span class=\"cp\"></span>\n<span class=\"cp\">#include</span> <span class=\"cpf\">&lt;ihmc_msgs/WalkingStatusRosMessage.h&gt;</span><span class=\"cp\"></span>\n\n<span class=\"kt\">void</span> <span class=\"nf\">jsCallback</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">sensor_msgs</span><span class=\"o\">::</span><span class=\"n\">JointStateConstPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">js</span><span class=\"p\">){};</span>\n<span class=\"kt\">void</span> <span class=\"nf\">fsCallback</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">FootstepStatusRosMessageConstPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">fs</span><span class=\"p\">){};</span>\n<span class=\"kt\">void</span> <span class=\"nf\">hlsCallback</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">HighLevelStateRosMessageConstPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">hls</span><span class=\"p\">){};</span>\n<span class=\"kt\">void</span> <span class=\"nf\">pCallback</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">nav_msgs</span><span class=\"o\">::</span><span class=\"n\">OdometryConstPtr</span> <span class=\"o\">&amp;</span><span class=\"n\">p</span><span class=\"p\">){};</span>\n<span class=\"kt\">void</span> <span class=\"nf\">wsCallback</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">WalkingStatusRosMessage</span> <span class=\"o\">&amp;</span><span class=\"n\">ws</span><span class=\"p\">){};</span>\n\n<span class=\"kt\">int</span> <span class=\"nf\">main</span><span class=\"p\">(</span><span class=\"kt\">int</span> <span class=\"n\">argc</span><span class=\"p\">,</span> <span class=\"kt\">char</span><span class=\"o\">**</span> <span class=\"n\">argv</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">init</span><span class=\"p\">(</span><span class=\"n\">argc</span><span class=\"p\">,</span> <span class=\"n\">argv</span><span class=\"p\">,</span> <span class=\"s\">&quot;val_network_test&quot;</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">NodeHandle</span> <span class=\"n\">nh</span><span class=\"p\">;</span>\n\n  <span class=\"c1\">// Advertise topics</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">footstep_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">FootstepDataListRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"s\">&quot;/ihmc_ros/valkyrie/control/footstep_list&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">head_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">HeadTrajectoryRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/head_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">pelvis_height_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">PelvisHeightTrajectoryRosMessage</span> <span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/pelvis_height_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">pelvis_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">PelvisTrajectoryRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/pelvis_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">foot_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">FootTrajectoryRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/foot_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">hand_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">HandTrajectoryRosMessage</span> <span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/hand_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">chest_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">ChestTrajectoryRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/chest_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">wholebody_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">WholeBodyTrajectoryRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/whole_body_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">arm_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">ArmTrajectoryRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/arm_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">neck_traj_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">NeckTrajectoryRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/neck_trajectory&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">stop_all_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">StopAllTrajectoryRosMessage</span> <span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/stop_all_trajectories&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">walk_pause_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">PauseWalkingRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/pause_walking&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">walk_abort_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">AbortWalkingRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/abort_walking&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">go_home_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">ihmc_msgs</span><span class=\"o\">::</span><span class=\"n\">GoHomeRosMessage</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/ihmc_ros/valkyrie/control/go_home&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">left_hand_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">std_msgs</span><span class=\"o\">::</span><span class=\"n\">Float64MultiArray</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/left_hand_position_controller/command&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Publisher</span> <span class=\"n\">right_hand_pub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">advertise</span><span class=\"o\">&lt;</span><span class=\"n\">std_msgs</span><span class=\"o\">::</span><span class=\"n\">Float64MultiArray</span><span class=\"o\">&gt;</span><span class=\"p\">(</span> <span class=\"s\">&quot;/right_hand_position_controller/command&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">);</span>\n\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Subscriber</span> <span class=\"n\">joint_state_sub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s\">&quot;/ihmc_ros/valkyrie/output/joint_states&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">jsCallback</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Subscriber</span> <span class=\"n\">footstep_sub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s\">&quot;/ihmc_ros/valkyrie/output/footstep_status&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">fsCallback</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Subscriber</span> <span class=\"n\">state_sub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s\">&quot;/ihmc_ros/valkyrie/output/high_level_state&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">hlsCallback</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Subscriber</span> <span class=\"n\">pose_sub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s\">&quot;/ihmc_ros/valkyrie/output/robot_pose&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">pCallback</span><span class=\"p\">);</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">Subscriber</span> <span class=\"n\">walk_status_sub_</span> <span class=\"o\">=</span> <span class=\"n\">nh</span><span class=\"p\">.</span><span class=\"n\">subscribe</span><span class=\"p\">(</span><span class=\"s\">&quot;/ihmc_ros/valkyrie/output/walking_status&quot;</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">wsCallback</span><span class=\"p\">);</span>\n\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">AsyncSpinner</span> <span class=\"n\">spinner</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">);</span>\n  <span class=\"n\">spinner</span><span class=\"p\">.</span><span class=\"n\">start</span><span class=\"p\">();</span>\n  <span class=\"n\">ros</span><span class=\"o\">::</span><span class=\"n\">waitForShutdown</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n</pre></div>", "type": "rendered"}, "created_on": "2017-05-11T02:19:15.013423+00:00", "user": {"display_name": "Steven Gray", "uuid": "{7470e809-c304-4b17-b986-685f31fa15c3}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D"}, "html": {"href": "https://bitbucket.org/%7B7470e809-c304-4b17-b986-685f31fa15c3%7D/"}, "avatar": {"href": "data/secure.gravatar.com/avatar/e6bee642b76507eb51c2839771722e68d=httpsavatar-management--avatars.us-west-2.prod.public.atl-paas.netinitialsSG-0.png"}}, "nickname": "stgray", "type": "user", "account_id": "557058:e6cc7c7b-9d1b-4abe-87d5-5f0da7c863e1"}, "updated_on": "2017-05-11T02:32:54.615407+00:00", "type": "issue_comment", "id": 36711907}